<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: tcp_old::TCPMsgBasedSendQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacetcp__old.html">tcp_old</a>::<a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html">TCPMsgBasedSendQueue</a>
  </div>
</div>
<div class="contents">
<h1>tcp_old::TCPMsgBasedSendQueue Class Reference</h1><!-- doxytag: class="tcp_old::TCPMsgBasedSendQueue" --><!-- doxytag: inherits="tcp_old::TCPSendQueue" -->
<p><code>#include &lt;<a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html">TCPMsgBasedSendQueue_old.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tcp_old::TCPMsgBasedSendQueue:</div>
<div class="dynsection">
 <div class="center">
  <img src="classtcp__old_1_1_t_c_p_msg_based_send_queue.gif" usemap="#tcp_old::TCPMsgBasedSendQueue_map" alt=""/>
  <map id="tcp_old::TCPMsgBasedSendQueue_map" name="tcp_old::TCPMsgBasedSendQueue_map">
<area href="classtcp__old_1_1_t_c_p_send_queue.html" alt="tcp_old::TCPSendQueue" shape="rect" coords="0,0,209,24"/>
</map>
 </div>
</div>

<p><a href="classtcp__old_1_1_t_c_p_msg_based_send_queue-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtcp__old_1_1_t_c_p_msg_based_send_queue_1_1_payload.html">Payload</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a825708443c5793af0f03091d3b9de5b7">TCPMsgBasedSendQueue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a0f90f019fd72a38d899571fde3df69ad">~TCPMsgBasedSendQueue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a52bd8710e88e7237f55e25b0279c0875">init</a> (uint32 startSeq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ace39e614dd94548a8325cfc72341cae2">info</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ac926a3c84df79870d64b8e41f662b2cb">enqueueAppData</a> (cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a9eb3ff42a452940baa9eff18ce1b45fc">getBufferEndSeq</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_t_c_p_segment.html">TCPSegment</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a7a567c8b65da65321342021a83246aa1">createSegmentWithBytes</a> (uint32 fromSeq, <a class="el" href="bsdint_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> numBytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a8adba4316eb73e75f956062a60774ce5">discardUpTo</a> (uint32 seqNum)</td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::list&lt; <a class="el" href="structtcp__old_1_1_t_c_p_msg_based_send_queue_1_1_payload.html">Payload</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#abc021a3a0b6816f63ebcdbed6512b3b1">PayloadQueue</a></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#abc021a3a0b6816f63ebcdbed6512b3b1">PayloadQueue</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a749cee7cbcd716219664543acdb48f7a">begin</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Send queue that manages messages.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_rcv_queue.html">TCPMsgBasedRcvQueue</a> </dd></dl>

<p>Definition at line <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html#l00031">31</a> of file <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html">TCPMsgBasedSendQueue_old.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="abc021a3a0b6816f63ebcdbed6512b3b1"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::PayloadQueue" ref="abc021a3a0b6816f63ebcdbed6512b3b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;<a class="el" href="structtcp__old_1_1_t_c_p_msg_based_send_queue_1_1_payload.html">Payload</a>&gt; <a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#abc021a3a0b6816f63ebcdbed6512b3b1">tcp_old::TCPMsgBasedSendQueue::PayloadQueue</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html#l00039">39</a> of file <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html">TCPMsgBasedSendQueue_old.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a825708443c5793af0f03091d3b9de5b7"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::TCPMsgBasedSendQueue" ref="a825708443c5793af0f03091d3b9de5b7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCPMsgBasedSendQueue::TCPMsgBasedSendQueue </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ctor </p>

<p>Definition at line <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00025">25</a> of file <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00025"></a>00025                                            : <a class="code" href="classtcp__old_1_1_t_c_p_send_queue.html#a984bb3ffca5eee87b389ae950a51a61a">TCPSendQueue</a>()
<a name="l00026"></a>00026 {
<a name="l00027"></a>00027     <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a749cee7cbcd716219664543acdb48f7a">begin</a> = <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a> = 0;
<a name="l00028"></a>00028 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0f90f019fd72a38d899571fde3df69ad"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::~TCPMsgBasedSendQueue" ref="a0f90f019fd72a38d899571fde3df69ad" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCPMsgBasedSendQueue::~TCPMsgBasedSendQueue </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Virtual dtor. </p>

<p>Definition at line <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00030">30</a> of file <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00031"></a>00031 {
<a name="l00032"></a>00032     <span class="keywordflow">for</span> (PayloadQueue::iterator it=<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.begin(); it!=<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.end(); ++it)
<a name="l00033"></a>00033         <span class="keyword">delete</span> it-&gt;msg;
<a name="l00034"></a>00034 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7a567c8b65da65321342021a83246aa1"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::createSegmentWithBytes" ref="a7a567c8b65da65321342021a83246aa1" args="(uint32 fromSeq, ulong numBytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p_segment.html">TCPSegment</a> * TCPMsgBasedSendQueue::createSegmentWithBytes </td>
          <td>(</td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>fromSeq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bsdint_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&nbsp;</td>
          <td class="paramname"> <em>maxNumBytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called when the <a class="el" href="classtcp__old_1_1_t_c_p.html">TCP</a> wants to send or retransmit data, it constructs a <a class="el" href="classtcp__old_1_1_t_c_p.html">TCP</a> segment which contains the data from the requested sequence number range. The actually returned segment may contain less then maxNumBytes bytes if the subclass wants to reproduce the original segment boundaries when retransmitting. </p>

<p>Implements <a class="el" href="classtcp__old_1_1_t_c_p_send_queue.html#aa2bd6a59bbf6f5adf7ce1d73e374d7fa">tcp_old::TCPSendQueue</a>.</p>

<p>Definition at line <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00065">65</a> of file <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066 {
<a name="l00067"></a>00067     <span class="comment">//tcpEV &lt;&lt; &quot;sendQ: &quot; &lt;&lt; info() &lt;&lt; &quot; createSeg(seq=&quot; &lt;&lt; fromSeq &lt;&lt; &quot; len=&quot; &lt;&lt; numBytes &lt;&lt; &quot;)\n&quot;;</span>
<a name="l00068"></a>00068     ASSERT(<a class="code" href="namespacetcp__old.html#a2a4d76c437a6e0eb1e1440c02153e5db">seqLE</a>(<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a749cee7cbcd716219664543acdb48f7a">begin</a>,fromSeq) &amp;&amp; <a class="code" href="namespacetcp__old.html#a2a4d76c437a6e0eb1e1440c02153e5db">seqLE</a>(fromSeq+numBytes,<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a>));
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <a class="code" href="class_t_c_p_segment.html">TCPSegment</a> *tcpseg = <a class="code" href="classtcp__old_1_1_t_c_p_send_queue.html#a95ebf87f03012a368714d2477da32cc1">conn</a>-&gt;<a class="code" href="classtcp__old_1_1_t_c_p_connection.html#a462206e0bc50ae521a47a797552a0057">createTCPSegment</a>(NULL);
<a name="l00071"></a>00071     tcpseg-&gt;<a class="code" href="class_t_c_p_segment___base.html#aaacb6a24b814593e3235b54f851867e3">setSequenceNo</a>(fromSeq);
<a name="l00072"></a>00072     tcpseg-&gt;<a class="code" href="class_t_c_p_segment___base.html#a8572e8a96867e101111e66dfe31dd278">setPayloadLength</a>(numBytes);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="comment">// add payload messages whose endSequenceNo is between fromSeq and fromSeq+numBytes</span>
<a name="l00075"></a>00075     PayloadQueue::iterator i = <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.begin();
<a name="l00076"></a>00076     <span class="keywordflow">while</span> (i!=<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.end() &amp;&amp; <a class="code" href="namespacetcp__old.html#a2a4d76c437a6e0eb1e1440c02153e5db">seqLE</a>(i-&gt;endSequenceNo, fromSeq))
<a name="l00077"></a>00077         ++i;
<a name="l00078"></a>00078     uint32 toSeq = fromSeq+numBytes;
<a name="l00079"></a>00079     <span class="keyword">const</span> <span class="keywordtype">char</span> *payloadName = NULL;
<a name="l00080"></a>00080     <span class="keywordflow">while</span> (i!=<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.end() &amp;&amp; <a class="code" href="namespacetcp__old.html#a2a4d76c437a6e0eb1e1440c02153e5db">seqLE</a>(i-&gt;endSequenceNo, toSeq))
<a name="l00081"></a>00081     {
<a name="l00082"></a>00082         <span class="keywordflow">if</span> (!payloadName) payloadName = i-&gt;msg-&gt;getName();
<a name="l00083"></a>00083         tcpseg-&gt;<a class="code" href="class_t_c_p_segment.html#a7a0e84405cd795856fbb14b6c6264253">addPayloadMessage</a>(i-&gt;msg-&gt;dup(), i-&gt;endSequenceNo);
<a name="l00084"></a>00084         ++i;
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="comment">// give segment a name</span>
<a name="l00088"></a>00088     <span class="keywordtype">char</span> msgname[80];
<a name="l00089"></a>00089     <span class="keywordflow">if</span> (!payloadName)
<a name="l00090"></a>00090         sprintf(msgname, <span class="stringliteral">&quot;tcpseg(l=%lu,%dmsg)&quot;</span>, numBytes, tcpseg-&gt;<a class="code" href="class_t_c_p_segment.html#a6b6bdc4bf4819b125921f35269193100">getPayloadArraySize</a>());
<a name="l00091"></a>00091     <span class="keywordflow">else</span>
<a name="l00092"></a>00092         sprintf(msgname, <span class="stringliteral">&quot;%.10s(l=%lu,%dmsg)&quot;</span>, payloadName, numBytes, tcpseg-&gt;<a class="code" href="class_t_c_p_segment.html#a6b6bdc4bf4819b125921f35269193100">getPayloadArraySize</a>());
<a name="l00093"></a>00093     tcpseg-&gt;setName(msgname);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <span class="keywordflow">return</span> tcpseg;
<a name="l00096"></a>00096 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8adba4316eb73e75f956062a60774ce5"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::discardUpTo" ref="a8adba4316eb73e75f956062a60774ce5" args="(uint32 seqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPMsgBasedSendQueue::discardUpTo </td>
          <td>(</td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>seqNum</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tells the queue that bytes up to (but NOT including) seqNum have been transmitted and ACKed, so they can be removed from the queue. </p>

<p>Implements <a class="el" href="classtcp__old_1_1_t_c_p_send_queue.html#aced2fde7fde0ec8f6a32b1e16d6bbda9">tcp_old::TCPSendQueue</a>.</p>

<p>Definition at line <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00098">98</a> of file <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00099"></a>00099 {
<a name="l00100"></a>00100     <span class="comment">//tcpEV &lt;&lt; &quot;sendQ: &quot; &lt;&lt; info() &lt;&lt; &quot; discardUpTo(seq=&quot; &lt;&lt; seqNum &lt;&lt; &quot;)\n&quot;;</span>
<a name="l00101"></a>00101     ASSERT(<a class="code" href="namespacetcp__old.html#a2a4d76c437a6e0eb1e1440c02153e5db">seqLE</a>(<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a749cee7cbcd716219664543acdb48f7a">begin</a>,seqNum) &amp;&amp; <a class="code" href="namespacetcp__old.html#a2a4d76c437a6e0eb1e1440c02153e5db">seqLE</a>(seqNum,<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a>));
<a name="l00102"></a>00102     <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a749cee7cbcd716219664543acdb48f7a">begin</a> = seqNum;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     <span class="comment">// remove payload messages whose endSequenceNo is below seqNum</span>
<a name="l00105"></a>00105     <span class="keywordflow">while</span> (!<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.empty() &amp;&amp; <a class="code" href="namespacetcp__old.html#a2a4d76c437a6e0eb1e1440c02153e5db">seqLE</a>(<a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.front().endSequenceNo, seqNum))
<a name="l00106"></a>00106     {
<a name="l00107"></a>00107         <span class="keyword">delete</span> <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.front().msg;
<a name="l00108"></a>00108         <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.pop_front();
<a name="l00109"></a>00109     }
<a name="l00110"></a>00110 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac926a3c84df79870d64b8e41f662b2cb"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::enqueueAppData" ref="ac926a3c84df79870d64b8e41f662b2cb" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPMsgBasedSendQueue::enqueueAppData </td>
          <td>(</td>
          <td class="paramtype">cPacket *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called on SEND app command, it inserts in the queue the data the user wants to send. Implementations of this abstract class will decide what this means: copying actual bytes, just increasing the "last byte queued" variable, or storing cMessage object(s). The msg object should not be referenced after this point (sendQueue may delete it.) </p>

<p>Implements <a class="el" href="classtcp__old_1_1_t_c_p_send_queue.html#a8f1b685a3f9020032805d119adb3089a">tcp_old::TCPSendQueue</a>.</p>

<p>Definition at line <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00049">49</a> of file <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00050"></a>00050 {
<a name="l00051"></a>00051     <span class="comment">//tcpEV &lt;&lt; &quot;sendQ: &quot; &lt;&lt; info() &lt;&lt; &quot; enqueueAppData(bytes=&quot; &lt;&lt; msg-&gt;getByteLength() &lt;&lt; &quot;)\n&quot;;</span>
<a name="l00052"></a>00052     <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a> += msg-&gt;getByteLength();
<a name="l00053"></a>00053 
<a name="l00054"></a>00054     Payload payload;
<a name="l00055"></a>00055     payload.endSequenceNo = <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a>;
<a name="l00056"></a>00056     payload.msg = msg;
<a name="l00057"></a>00057     <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.push_back(payload);
<a name="l00058"></a>00058 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9eb3ff42a452940baa9eff18ce1b45fc"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::getBufferEndSeq" ref="a9eb3ff42a452940baa9eff18ce1b45fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPMsgBasedSendQueue::getBufferEndSeq </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the sequence number of the last byte stored in the buffer plus one. (The first byte of the next send operation would get this sequence number.) </p>

<p>Implements <a class="el" href="classtcp__old_1_1_t_c_p_send_queue.html#addf53d15d095b683486ca61554dccae3">tcp_old::TCPSendQueue</a>.</p>

<p>Definition at line <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00060">60</a> of file <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00061"></a>00061 {
<a name="l00062"></a>00062     <span class="keywordflow">return</span> <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a>;
<a name="l00063"></a>00063 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ace39e614dd94548a8325cfc72341cae2"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::info" ref="ace39e614dd94548a8325cfc72341cae2" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string TCPMsgBasedSendQueue::info </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a string with the region stored. </p>

<p>Definition at line <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00042">42</a> of file <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00043"></a>00043 {
<a name="l00044"></a>00044     std::stringstream out;
<a name="l00045"></a>00045     out &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a749cee7cbcd716219664543acdb48f7a">begin</a> &lt;&lt; <span class="stringliteral">&quot;..&quot;</span> &lt;&lt; <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a> &lt;&lt; <span class="stringliteral">&quot;), &quot;</span> &lt;&lt; <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">payloadQueue</a>.size() &lt;&lt; <span class="stringliteral">&quot; packets&quot;</span>;
<a name="l00046"></a>00046     <span class="keywordflow">return</span> out.str();
<a name="l00047"></a>00047 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a52bd8710e88e7237f55e25b0279c0875"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::init" ref="a52bd8710e88e7237f55e25b0279c0875" args="(uint32 startSeq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPMsgBasedSendQueue::init </td>
          <td>(</td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>startSeq</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the object. The startSeq parameter tells what sequence number the first byte of app data should get. This is usually ISS+1 because SYN consumes one byte in the sequence number space.</p>
<p><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a52bd8710e88e7237f55e25b0279c0875">init()</a> may be called more than once; every call flushes the existing contents of the queue. </p>

<p>Implements <a class="el" href="classtcp__old_1_1_t_c_p_send_queue.html#ace918ba2cb215baffc2c3136e35a0d16">tcp_old::TCPSendQueue</a>.</p>

<p>Definition at line <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00036">36</a> of file <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00037"></a>00037 {
<a name="l00038"></a>00038     <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a749cee7cbcd716219664543acdb48f7a">begin</a> = startSeq;
<a name="l00039"></a>00039     <a class="code" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">end</a> = startSeq;
<a name="l00040"></a>00040 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a749cee7cbcd716219664543acdb48f7a"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::begin" ref="a749cee7cbcd716219664543acdb48f7a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a749cee7cbcd716219664543acdb48f7a">tcp_old::TCPMsgBasedSendQueue::begin</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html#l00042">42</a> of file <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html">TCPMsgBasedSendQueue_old.h</a>.</p>

<p>Referenced by <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00065">createSegmentWithBytes()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00098">discardUpTo()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00042">info()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00036">init()</a>, and <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00025">TCPMsgBasedSendQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ab63b01ec4f334edd8ddd0627e72368a9"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::end" ref="ab63b01ec4f334edd8ddd0627e72368a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#ab63b01ec4f334edd8ddd0627e72368a9">tcp_old::TCPMsgBasedSendQueue::end</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html#l00043">43</a> of file <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html">TCPMsgBasedSendQueue_old.h</a>.</p>

<p>Referenced by <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00065">createSegmentWithBytes()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00098">discardUpTo()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00049">enqueueAppData()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00060">getBufferEndSeq()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00042">info()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00036">init()</a>, and <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00025">TCPMsgBasedSendQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a01d8b463d5576ece6f755b3cfd76f4d0"></a><!-- doxytag: member="tcp_old::TCPMsgBasedSendQueue::payloadQueue" ref="a01d8b463d5576ece6f755b3cfd76f4d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#abc021a3a0b6816f63ebcdbed6512b3b1">PayloadQueue</a> <a class="el" href="classtcp__old_1_1_t_c_p_msg_based_send_queue.html#a01d8b463d5576ece6f755b3cfd76f4d0">tcp_old::TCPMsgBasedSendQueue::payloadQueue</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html#l00040">40</a> of file <a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html">TCPMsgBasedSendQueue_old.h</a>.</p>

<p>Referenced by <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00065">createSegmentWithBytes()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00098">discardUpTo()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00049">enqueueAppData()</a>, <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00042">info()</a>, and <a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html#l00030">~TCPMsgBasedSendQueue()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_t_c_p_msg_based_send_queue__old_8h_source.html">TCPMsgBasedSendQueue_old.h</a></li>
<li><a class="el" href="old_2queues_2_t_c_p_msg_based_send_queue_8cc_source.html">old/queues/TCPMsgBasedSendQueue.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Mar 23 17:08:39 2010 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
