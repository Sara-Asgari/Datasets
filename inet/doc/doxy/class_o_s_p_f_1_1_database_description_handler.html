<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: OSPF::DatabaseDescriptionHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespace_o_s_p_f.html">OSPF</a>::<a class="el" href="class_o_s_p_f_1_1_database_description_handler.html">DatabaseDescriptionHandler</a>
  </div>
</div>
<div class="contents">
<h1>OSPF::DatabaseDescriptionHandler Class Reference</h1><!-- doxytag: class="OSPF::DatabaseDescriptionHandler" --><!-- doxytag: inherits="OSPF::IMessageHandler" -->
<p><code>#include &lt;<a class="el" href="_database_description_handler_8h_source.html">DatabaseDescriptionHandler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for OSPF::DatabaseDescriptionHandler:</div>
<div class="dynsection">
 <div class="center">
  <img src="class_o_s_p_f_1_1_database_description_handler.gif" usemap="#OSPF::DatabaseDescriptionHandler_map" alt=""/>
  <map id="OSPF::DatabaseDescriptionHandler_map" name="OSPF::DatabaseDescriptionHandler_map">
<area href="class_o_s_p_f_1_1_i_message_handler.html" alt="OSPF::IMessageHandler" shape="rect" coords="0,0,214,24"/>
</map>
 </div>
</div>

<p><a href="class_o_s_p_f_1_1_database_description_handler-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_database_description_handler.html#a0c573454fafa46000ad7624e449ab19d">DatabaseDescriptionHandler</a> (<a class="el" href="class_o_s_p_f_1_1_router.html">Router</a> *containingRouter)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_database_description_handler.html#a16c34f7cbe35797f0cd9c45b35e62137">ProcessPacket</a> (<a class="el" href="class_o_s_p_f_packet.html">OSPFPacket</a> *packet, <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *intf, <a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *neighbor)</td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_1_1_database_description_handler.html#adc25d3b381b76c21203d40fbc42b411f">ProcessDDPacket</a> (<a class="el" href="class_o_s_p_f_database_description_packet.html">OSPFDatabaseDescriptionPacket</a> *ddPacket, <a class="el" href="class_o_s_p_f_1_1_interface.html">Interface</a> *intf, <a class="el" href="class_o_s_p_f_1_1_neighbor.html">Neighbor</a> *neighbor, bool inExchangeStart)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="_database_description_handler_8h_source.html#l00025">25</a> of file <a class="el" href="_database_description_handler_8h_source.html">DatabaseDescriptionHandler.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0c573454fafa46000ad7624e449ab19d"></a><!-- doxytag: member="OSPF::DatabaseDescriptionHandler::DatabaseDescriptionHandler" ref="a0c573454fafa46000ad7624e449ab19d" args="(Router *containingRouter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSPF::DatabaseDescriptionHandler::DatabaseDescriptionHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_s_p_f_1_1_router.html">OSPF::Router</a> *&nbsp;</td>
          <td class="paramname"> <em>containingRouter</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_database_description_handler_8cc_source.html#l00024">24</a> of file <a class="el" href="_database_description_handler_8cc_source.html">DatabaseDescriptionHandler.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00024"></a>00024                                                                                        :
<a name="l00025"></a>00025     <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#afa003e6c747b4a1961dede68915231ee">OSPF::IMessageHandler</a>(containingRouter)
<a name="l00026"></a>00026 {
<a name="l00027"></a>00027 }

</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="adc25d3b381b76c21203d40fbc42b411f"></a><!-- doxytag: member="OSPF::DatabaseDescriptionHandler::ProcessDDPacket" ref="adc25d3b381b76c21203d40fbc42b411f" args="(OSPFDatabaseDescriptionPacket *ddPacket, Interface *intf, Neighbor *neighbor, bool inExchangeStart)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OSPF::DatabaseDescriptionHandler::ProcessDDPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_s_p_f_database_description_packet.html">OSPFDatabaseDescriptionPacket</a> *&nbsp;</td>
          <td class="paramname"> <em>ddPacket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a> *&nbsp;</td>
          <td class="paramname"> <em>intf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a> *&nbsp;</td>
          <td class="paramname"> <em>neighbor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>inExchangeStart</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_database_description_handler_8cc_source.html#l00178">178</a> of file <a class="el" href="_database_description_handler_8cc_source.html">DatabaseDescriptionHandler.cc</a>.</p>

<p>Referenced by <a class="el" href="_database_description_handler_8cc_source.html#l00029">ProcessPacket()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00179"></a>00179 {
<a name="l00180"></a>00180     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;  Processing packet contents(ddOptions=&quot;</span>
<a name="l00181"></a>00181        &lt;&lt; ((ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a6dd39616b4a729e0f10ce8bb7dbabd93">getDdOptions</a>().<a class="code" href="struct_o_s_p_f_d_d_options.html#a5b89a1ecd60217e80cd957ab8b912ad0">I_Init</a>) ? <span class="stringliteral">&quot;I &quot;</span> : <span class="stringliteral">&quot;_ &quot;</span>)
<a name="l00182"></a>00182        &lt;&lt; ((ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a6dd39616b4a729e0f10ce8bb7dbabd93">getDdOptions</a>().<a class="code" href="struct_o_s_p_f_d_d_options.html#a378b4775cffedf62f289e57ab0f756c0">M_More</a>) ? <span class="stringliteral">&quot;M &quot;</span> : <span class="stringliteral">&quot;_ &quot;</span>)
<a name="l00183"></a>00183        &lt;&lt; ((ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a6dd39616b4a729e0f10ce8bb7dbabd93">getDdOptions</a>().<a class="code" href="struct_o_s_p_f_d_d_options.html#a2c0601f852a00c2ee1313977a23b0fd2">MS_MasterSlave</a>) ? <span class="stringliteral">&quot;MS&quot;</span> : <span class="stringliteral">&quot;__&quot;</span>)
<a name="l00184"></a>00184        &lt;&lt; <span class="stringliteral">&quot;; seqNumber=&quot;</span>
<a name="l00185"></a>00185        &lt;&lt; ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#af679fc4105e146617fd1d9db7814da25">getDdSequenceNumber</a>()
<a name="l00186"></a>00186        &lt;&lt; <span class="stringliteral">&quot;):\n&quot;</span>;
<a name="l00187"></a>00187 
<a name="l00188"></a>00188     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> headerCount = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a2bde67c5dcd8c9a19a804c4ac0884ee2">getLsaHeadersArraySize</a>();
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; headerCount; i++) {
<a name="l00191"></a>00191         <a class="code" href="class_o_s_p_f_l_s_a_header.html">OSPFLSAHeader</a>&amp; currentHeader = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a390b9bbc57e76778c8ede5ba267b2765">getLsaHeaders</a>(i);
<a name="l00192"></a>00192         <a class="code" href="_o_s_p_f_packet__m_8h.html#a13a450dbb578c4bd7714af8581c4f89b">LSAType</a>        lsaType       = <span class="keyword">static_cast&lt;</span><a class="code" href="_o_s_p_f_packet__m_8h.html#a13a450dbb578c4bd7714af8581c4f89b">LSAType</a><span class="keyword">&gt;</span> (currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a5ec5eaa7d91ea4e1447766fe076d7207">getLsType</a>());
<a name="l00193"></a>00193 
<a name="l00194"></a>00194         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>;
<a name="l00195"></a>00195         <a class="code" href="_l_s_a_8h.html#a44d2835f9421021b7eee669af9c4cb98">PrintLSAHeader</a>(currentHeader, ev.getOStream());
<a name="l00196"></a>00196 
<a name="l00197"></a>00197         <span class="keywordflow">if</span> ((lsaType &lt; <a class="code" href="_o_s_p_f_packet__m_8h.html#a13a450dbb578c4bd7714af8581c4f89baf0d156f2d439c02650ae0bb67f9385d9">RouterLSAType</a>) || (lsaType &gt; <a class="code" href="_o_s_p_f_packet__m_8h.html#a13a450dbb578c4bd7714af8581c4f89ba4c38291b3c8571803e6cd756f84d0c85">ASExternalLSAType</a>) ||
<a name="l00198"></a>00198             ((lsaType == <a class="code" href="_o_s_p_f_packet__m_8h.html#a13a450dbb578c4bd7714af8581c4f89ba4c38291b3c8571803e6cd756f84d0c85">ASExternalLSAType</a>) &amp;&amp; (!intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a353330e70282153a34fcf9d4ee276acc">GetArea</a>()-&gt;GetExternalRoutingCapability())))
<a name="l00199"></a>00199         {
<a name="l00200"></a>00200             <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot; Error!\n&quot;</span>;
<a name="l00201"></a>00201             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a1bc1430607b1cbe754c219564b625777">OSPF::Neighbor::SequenceNumberMismatch</a>);
<a name="l00202"></a>00202             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00203"></a>00203         } <span class="keywordflow">else</span> {
<a name="l00204"></a>00204             <a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html">OSPF::LSAKeyType</a> lsaKey;
<a name="l00205"></a>00205 
<a name="l00206"></a>00206             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#a3a05e7e193451f3979803d5e93362ead">linkStateID</a> = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a2f146ccaa3d51bae77fd76f429b52abe">getLinkStateID</a>();
<a name="l00207"></a>00207             lsaKey.<a class="code" href="struct_o_s_p_f_1_1_l_s_a_key_type.html#a583e0f1cf5e052a08dc21dbcd405e8b6">advertisingRouter</a> = currentHeader.<a class="code" href="class_o_s_p_f_l_s_a_header.html#a85083aabf7994ed37c3458e06337d183">getAdvertisingRouter</a>().<a class="code" href="class_i_p_address.html#a807ca46964a8403cf0c70f0772179524">getInt</a>();
<a name="l00208"></a>00208 
<a name="l00209"></a>00209             <a class="code" href="class_o_s_p_f_l_s_a.html">OSPFLSA</a>* lsaInDatabase = <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#a24cb6c6f9b62a4e403d5171a0d36f22a">router</a>-&gt;FindLSA(lsaType, lsaKey, intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a353330e70282153a34fcf9d4ee276acc">GetArea</a>()-&gt;GetAreaID());
<a name="l00210"></a>00210 
<a name="l00211"></a>00211             <span class="comment">// operator&lt; and operator== on OSPFLSAHeaders determines which one is newer(less means older)</span>
<a name="l00212"></a>00212             <span class="keywordflow">if</span> ((lsaInDatabase == NULL) || (lsaInDatabase-&gt;<a class="code" href="class_o_s_p_f_l_s_a.html#a2c9acdc68e5e66deb1826ee41a07b7d1">getHeader</a>() &lt; currentHeader)) {
<a name="l00213"></a>00213                 <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot; (newer)&quot;</span>;
<a name="l00214"></a>00214                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a272ae712a6e08024bd31c068330db3a7">AddToRequestList</a>(&amp;currentHeader);
<a name="l00215"></a>00215             }
<a name="l00216"></a>00216         }
<a name="l00217"></a>00217         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00218"></a>00218     }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <span class="keywordflow">if</span> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaefc9f21d8f84801d516adef2c32534c">GetDatabaseExchangeRelationship</a>() == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea7e0f6c7b05faf7c741792cf8f8808fe2">OSPF::Neighbor::Master</a>) {
<a name="l00221"></a>00221         neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a5cad8417ec5cb78156250d30b0e424f9">IncrementDDSequenceNumber</a>();
<a name="l00222"></a>00222         <span class="keywordflow">if</span> ((neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaaddc18501a30587fbe99d1aa7c83dc7">GetDatabaseSummaryListCount</a>() == 0) &amp;&amp; !ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a6dd39616b4a729e0f10ce8bb7dbabd93">getDdOptions</a>().<a class="code" href="struct_o_s_p_f_d_d_options.html#a378b4775cffedf62f289e57ab0f756c0">M_More</a>) {
<a name="l00223"></a>00223             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a5d54c2471829a59b2d197ecd294c07bd">OSPF::Neighbor::ExchangeDone</a>);  <span class="comment">// does nothing in ExchangeStart</span>
<a name="l00224"></a>00224         } <span class="keywordflow">else</span> {
<a name="l00225"></a>00225             <span class="keywordflow">if</span> (!inExchangeStart) {
<a name="l00226"></a>00226                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#adf812c7ce3a4e03a7904d97b006ff1e3">SendDatabaseDescriptionPacket</a>();
<a name="l00227"></a>00227             }
<a name="l00228"></a>00228         }
<a name="l00229"></a>00229     } <span class="keywordflow">else</span> {
<a name="l00230"></a>00230         neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a462db3f65a9ccc1fdde0037d6c23ee40">SetDDSequenceNumber</a>(ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#af679fc4105e146617fd1d9db7814da25">getDdSequenceNumber</a>());
<a name="l00231"></a>00231         <span class="keywordflow">if</span> (!inExchangeStart) {
<a name="l00232"></a>00232             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#adf812c7ce3a4e03a7904d97b006ff1e3">SendDatabaseDescriptionPacket</a>();
<a name="l00233"></a>00233         }
<a name="l00234"></a>00234         <span class="keywordflow">if</span> (!ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a6dd39616b4a729e0f10ce8bb7dbabd93">getDdOptions</a>().<a class="code" href="struct_o_s_p_f_d_d_options.html#a378b4775cffedf62f289e57ab0f756c0">M_More</a> &amp;&amp;
<a name="l00235"></a>00235             (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaaddc18501a30587fbe99d1aa7c83dc7">GetDatabaseSummaryListCount</a>() == 0))
<a name="l00236"></a>00236         {
<a name="l00237"></a>00237             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a5d54c2471829a59b2d197ecd294c07bd">OSPF::Neighbor::ExchangeDone</a>);  <span class="comment">// does nothing in ExchangeStart</span>
<a name="l00238"></a>00238         }
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00241"></a>00241 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a16c34f7cbe35797f0cd9c45b35e62137"></a><!-- doxytag: member="OSPF::DatabaseDescriptionHandler::ProcessPacket" ref="a16c34f7cbe35797f0cd9c45b35e62137" args="(OSPFPacket *packet, Interface *intf, Neighbor *neighbor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPF::DatabaseDescriptionHandler::ProcessPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_s_p_f_packet.html">OSPFPacket</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a> *&nbsp;</td>
          <td class="paramname"> <em>intf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a> *&nbsp;</td>
          <td class="paramname"> <em>neighbor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_o_s_p_f_1_1_i_message_handler.html#a43972c1d4506fbc22085c992e70fdd5c">OSPF::IMessageHandler</a>.</p>

<p>Definition at line <a class="el" href="_database_description_handler_8cc_source.html#l00029">29</a> of file <a class="el" href="_database_description_handler_8cc_source.html">DatabaseDescriptionHandler.cc</a>.</p>

<p>Referenced by <a class="el" href="_message_handler_8cc_source.html#l00165">OSPF::MessageHandler::ProcessPacket()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00030"></a>00030 {
<a name="l00031"></a>00031     <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#a24cb6c6f9b62a4e403d5171a0d36f22a">router</a>-&gt;GetMessageHandler()-&gt;PrintEvent(<span class="stringliteral">&quot;Database Description packet received&quot;</span>, intf, neighbor);
<a name="l00032"></a>00032 
<a name="l00033"></a>00033     <a class="code" href="class_o_s_p_f_database_description_packet.html">OSPFDatabaseDescriptionPacket</a>* ddPacket = check_and_cast&lt;<a class="code" href="class_o_s_p_f_database_description_packet.html">OSPFDatabaseDescriptionPacket</a>*&gt; (packet);
<a name="l00034"></a>00034 
<a name="l00035"></a>00035     <a class="code" href="class_o_s_p_f_1_1_neighbor.html#abe30518a64009a9ae44944c1036a4c0a">OSPF::Neighbor::NeighborStateType</a> neighborState = neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a934bedd2e5f14281416666a48f357bc9">GetState</a>();
<a name="l00036"></a>00036 
<a name="l00037"></a>00037     <span class="keywordflow">if</span> ((ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a0bdabefaf7e63ad1b6c41d9fd29e9479">getInterfaceMTU</a>() &lt;= intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a6f0d207f1f82ea85d14555e51ec0cadf">GetMTU</a>()) &amp;&amp;
<a name="l00038"></a>00038         (neighborState &gt; <a class="code" href="class_o_s_p_f_1_1_neighbor.html#abe30518a64009a9ae44944c1036a4c0aaad206e0f7521afaefa0b08d336b84199">OSPF::Neighbor::AttemptState</a>))
<a name="l00039"></a>00039     {
<a name="l00040"></a>00040         <span class="keywordflow">switch</span> (neighborState) {
<a name="l00041"></a>00041             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html#abe30518a64009a9ae44944c1036a4c0aaa2bc2a9a78de6ca762416b243c632e46">OSPF::Neighbor::TwoWayState</a>:
<a name="l00042"></a>00042                 <span class="keywordflow">break</span>;
<a name="l00043"></a>00043             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html#abe30518a64009a9ae44944c1036a4c0aad7b22d69601f22f77b0839c2ae33cccd">OSPF::Neighbor::InitState</a>:
<a name="l00044"></a>00044                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a6335dbb7e3dbb7b0d9347cf865eec9d3">OSPF::Neighbor::TwoWayReceived</a>);
<a name="l00045"></a>00045                 <span class="keywordflow">break</span>;
<a name="l00046"></a>00046             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html#abe30518a64009a9ae44944c1036a4c0aae0cb7a4653f8f3b4503b75bdfef8a994">OSPF::Neighbor::ExchangeStartState</a>:
<a name="l00047"></a>00047                 {
<a name="l00048"></a>00048                     <a class="code" href="struct_o_s_p_f_d_d_options.html">OSPFDDOptions</a>&amp; ddOptions = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a6dd39616b4a729e0f10ce8bb7dbabd93">getDdOptions</a>();
<a name="l00049"></a>00049 
<a name="l00050"></a>00050                     <span class="keywordflow">if</span> (ddOptions.<a class="code" href="struct_o_s_p_f_d_d_options.html#a5b89a1ecd60217e80cd957ab8b912ad0">I_Init</a> &amp;&amp; ddOptions.<a class="code" href="struct_o_s_p_f_d_d_options.html#a378b4775cffedf62f289e57ab0f756c0">M_More</a> &amp;&amp; ddOptions.<a class="code" href="struct_o_s_p_f_d_d_options.html#a2c0601f852a00c2ee1313977a23b0fd2">MS_MasterSlave</a> &amp;&amp;
<a name="l00051"></a>00051                         (ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a2bde67c5dcd8c9a19a804c4ac0884ee2">getLsaHeadersArraySize</a>() == 0))
<a name="l00052"></a>00052                     {
<a name="l00053"></a>00053                         <span class="keywordflow">if</span> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ad80d61e8d0737c7e0a12f1837ac99ffb">GetNeighborID</a>() &gt; <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#a24cb6c6f9b62a4e403d5171a0d36f22a">router</a>-&gt;GetRouterID()) {
<a name="l00054"></a>00054                             <a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html">OSPF::Neighbor::DDPacketID</a> packetID;
<a name="l00055"></a>00055                             packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a31049124001ced8917df9779d253890c">ddOptions</a>      = ddOptions;
<a name="l00056"></a>00056                             packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#ae64f7b512e17277d7751104072d74718">options</a>        = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#ae9d7fdd28c7e085180d1e5a48429123a">getOptions</a>();
<a name="l00057"></a>00057                             packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a52ff6c768aa7bde52d267b4f5b12d494">sequenceNumber</a> = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#af679fc4105e146617fd1d9db7814da25">getDdSequenceNumber</a>();
<a name="l00058"></a>00058 
<a name="l00059"></a>00059                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a7ee629261a42e29a5478b7cd674b673b">SetOptions</a>(packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#ae64f7b512e17277d7751104072d74718">options</a>);
<a name="l00060"></a>00060                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a3e662a17205a647fad4352a7a8a1d081">SetDatabaseExchangeRelationship</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea24282c4d17f737f34152596465657c92">OSPF::Neighbor::Slave</a>);
<a name="l00061"></a>00061                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a462db3f65a9ccc1fdde0037d6c23ee40">SetDDSequenceNumber</a>(packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a52ff6c768aa7bde52d267b4f5b12d494">sequenceNumber</a>);
<a name="l00062"></a>00062                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a69df1b5ebcc0db17810dd620ae7a987c">SetLastReceivedDDPacket</a>(packetID);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064                             <span class="keywordflow">if</span> (!<a class="code" href="class_o_s_p_f_1_1_database_description_handler.html#adc25d3b381b76c21203d40fbc42b411f">ProcessDDPacket</a>(ddPacket, intf, neighbor, <span class="keyword">true</span>)) {
<a name="l00065"></a>00065                                 <span class="keywordflow">break</span>;
<a name="l00066"></a>00066                             }
<a name="l00067"></a>00067 
<a name="l00068"></a>00068                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a68092a284f8d5886b97c1d870d615ddb">OSPF::Neighbor::NegotiationDone</a>);
<a name="l00069"></a>00069                             <span class="keywordflow">if</span> (!neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aea93ed0658f2cd5b2260ab42003bce67">IsLinkStateRequestListEmpty</a>() &amp;&amp;
<a name="l00070"></a>00070                                 !neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ae16c32f7fbca1565995cb1899e537272">IsRequestRetransmissionTimerActive</a>())
<a name="l00071"></a>00071                             {
<a name="l00072"></a>00072                                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a4212b9dbd0b79d1ef9bfe85ac8267100">SendLinkStateRequestPacket</a>();
<a name="l00073"></a>00073                                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ad1cdf086b2ae5157802b7bdaae0f1b48">ClearRequestRetransmissionTimer</a>();
<a name="l00074"></a>00074                                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a61301d1573cf63159273cb68e2e53763">StartRequestRetransmissionTimer</a>();
<a name="l00075"></a>00075                             }
<a name="l00076"></a>00076                         } <span class="keywordflow">else</span> {
<a name="l00077"></a>00077                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#adf812c7ce3a4e03a7904d97b006ff1e3">SendDatabaseDescriptionPacket</a>(<span class="keyword">true</span>);
<a name="l00078"></a>00078                         }
<a name="l00079"></a>00079                     }
<a name="l00080"></a>00080                     <span class="keywordflow">if</span> (!ddOptions.<a class="code" href="struct_o_s_p_f_d_d_options.html#a5b89a1ecd60217e80cd957ab8b912ad0">I_Init</a> &amp;&amp; !ddOptions.<a class="code" href="struct_o_s_p_f_d_d_options.html#a2c0601f852a00c2ee1313977a23b0fd2">MS_MasterSlave</a> &amp;&amp;
<a name="l00081"></a>00081                         (ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#af679fc4105e146617fd1d9db7814da25">getDdSequenceNumber</a>() == neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a44a26dd715aba6313975255e7b491116">GetDDSequenceNumber</a>()) &amp;&amp;
<a name="l00082"></a>00082                         (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ad80d61e8d0737c7e0a12f1837ac99ffb">GetNeighborID</a>() &lt; <a class="code" href="class_o_s_p_f_1_1_i_message_handler.html#a24cb6c6f9b62a4e403d5171a0d36f22a">router</a>-&gt;GetRouterID()))
<a name="l00083"></a>00083                     {
<a name="l00084"></a>00084                         <a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html">OSPF::Neighbor::DDPacketID</a> packetID;
<a name="l00085"></a>00085                         packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a31049124001ced8917df9779d253890c">ddOptions</a>      = ddOptions;
<a name="l00086"></a>00086                         packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#ae64f7b512e17277d7751104072d74718">options</a>        = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#ae9d7fdd28c7e085180d1e5a48429123a">getOptions</a>();
<a name="l00087"></a>00087                         packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a52ff6c768aa7bde52d267b4f5b12d494">sequenceNumber</a> = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#af679fc4105e146617fd1d9db7814da25">getDdSequenceNumber</a>();
<a name="l00088"></a>00088 
<a name="l00089"></a>00089                         neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a7ee629261a42e29a5478b7cd674b673b">SetOptions</a>(packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#ae64f7b512e17277d7751104072d74718">options</a>);
<a name="l00090"></a>00090                         neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a3e662a17205a647fad4352a7a8a1d081">SetDatabaseExchangeRelationship</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea7e0f6c7b05faf7c741792cf8f8808fe2">OSPF::Neighbor::Master</a>);
<a name="l00091"></a>00091                         neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a69df1b5ebcc0db17810dd620ae7a987c">SetLastReceivedDDPacket</a>(packetID);
<a name="l00092"></a>00092 
<a name="l00093"></a>00093                         <span class="keywordflow">if</span> (!<a class="code" href="class_o_s_p_f_1_1_database_description_handler.html#adc25d3b381b76c21203d40fbc42b411f">ProcessDDPacket</a>(ddPacket, intf, neighbor, <span class="keyword">true</span>)) {
<a name="l00094"></a>00094                             <span class="keywordflow">break</span>;
<a name="l00095"></a>00095                         }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097                         neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a68092a284f8d5886b97c1d870d615ddb">OSPF::Neighbor::NegotiationDone</a>);
<a name="l00098"></a>00098                         <span class="keywordflow">if</span> (!neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aea93ed0658f2cd5b2260ab42003bce67">IsLinkStateRequestListEmpty</a>() &amp;&amp;
<a name="l00099"></a>00099                             !neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ae16c32f7fbca1565995cb1899e537272">IsRequestRetransmissionTimerActive</a>())
<a name="l00100"></a>00100                         {
<a name="l00101"></a>00101                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a4212b9dbd0b79d1ef9bfe85ac8267100">SendLinkStateRequestPacket</a>();
<a name="l00102"></a>00102                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ad1cdf086b2ae5157802b7bdaae0f1b48">ClearRequestRetransmissionTimer</a>();
<a name="l00103"></a>00103                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a61301d1573cf63159273cb68e2e53763">StartRequestRetransmissionTimer</a>();
<a name="l00104"></a>00104                         }
<a name="l00105"></a>00105                     }
<a name="l00106"></a>00106                 }
<a name="l00107"></a>00107                 <span class="keywordflow">break</span>;
<a name="l00108"></a>00108             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html#abe30518a64009a9ae44944c1036a4c0aab642c302eb79dfe9cd827bc8af960e28">OSPF::Neighbor::ExchangeState</a>:
<a name="l00109"></a>00109                 {
<a name="l00110"></a>00110                     <a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html">OSPF::Neighbor::DDPacketID</a> packetID;
<a name="l00111"></a>00111                     packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a31049124001ced8917df9779d253890c">ddOptions</a>      = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a6dd39616b4a729e0f10ce8bb7dbabd93">getDdOptions</a>();
<a name="l00112"></a>00112                     packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#ae64f7b512e17277d7751104072d74718">options</a>        = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#ae9d7fdd28c7e085180d1e5a48429123a">getOptions</a>();
<a name="l00113"></a>00113                     packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a52ff6c768aa7bde52d267b4f5b12d494">sequenceNumber</a> = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#af679fc4105e146617fd1d9db7814da25">getDdSequenceNumber</a>();
<a name="l00114"></a>00114 
<a name="l00115"></a>00115                     <span class="keywordflow">if</span> (packetID != neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a8128e6f359eb5627649ba96f24bbce4a">GetLastReceivedDDPacket</a>()) {
<a name="l00116"></a>00116                         <span class="keywordflow">if</span> ((packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a31049124001ced8917df9779d253890c">ddOptions</a>.<a class="code" href="struct_o_s_p_f_d_d_options.html#a2c0601f852a00c2ee1313977a23b0fd2">MS_MasterSlave</a> &amp;&amp;
<a name="l00117"></a>00117                              (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaefc9f21d8f84801d516adef2c32534c">GetDatabaseExchangeRelationship</a>() != <a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea24282c4d17f737f34152596465657c92">OSPF::Neighbor::Slave</a>)) ||
<a name="l00118"></a>00118                             (!packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a31049124001ced8917df9779d253890c">ddOptions</a>.<a class="code" href="struct_o_s_p_f_d_d_options.html#a2c0601f852a00c2ee1313977a23b0fd2">MS_MasterSlave</a> &amp;&amp;
<a name="l00119"></a>00119                              (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaefc9f21d8f84801d516adef2c32534c">GetDatabaseExchangeRelationship</a>() != <a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea7e0f6c7b05faf7c741792cf8f8808fe2">OSPF::Neighbor::Master</a>)) ||
<a name="l00120"></a>00120                             packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a31049124001ced8917df9779d253890c">ddOptions</a>.<a class="code" href="struct_o_s_p_f_d_d_options.html#a5b89a1ecd60217e80cd957ab8b912ad0">I_Init</a> ||
<a name="l00121"></a>00121                             (packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#ae64f7b512e17277d7751104072d74718">options</a> != neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a8128e6f359eb5627649ba96f24bbce4a">GetLastReceivedDDPacket</a>().options))
<a name="l00122"></a>00122                         {
<a name="l00123"></a>00123                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a1bc1430607b1cbe754c219564b625777">OSPF::Neighbor::SequenceNumberMismatch</a>);
<a name="l00124"></a>00124                         } <span class="keywordflow">else</span> {
<a name="l00125"></a>00125                             <span class="keywordflow">if</span> (((neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaefc9f21d8f84801d516adef2c32534c">GetDatabaseExchangeRelationship</a>() == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea7e0f6c7b05faf7c741792cf8f8808fe2">OSPF::Neighbor::Master</a>) &amp;&amp;
<a name="l00126"></a>00126                                  (packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a52ff6c768aa7bde52d267b4f5b12d494">sequenceNumber</a> == neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a44a26dd715aba6313975255e7b491116">GetDDSequenceNumber</a>())) ||
<a name="l00127"></a>00127                                 ((neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaefc9f21d8f84801d516adef2c32534c">GetDatabaseExchangeRelationship</a>() == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea24282c4d17f737f34152596465657c92">OSPF::Neighbor::Slave</a>) &amp;&amp;
<a name="l00128"></a>00128                                  (packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a52ff6c768aa7bde52d267b4f5b12d494">sequenceNumber</a> == (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a44a26dd715aba6313975255e7b491116">GetDDSequenceNumber</a>() + 1))))
<a name="l00129"></a>00129                             {
<a name="l00130"></a>00130                                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a69df1b5ebcc0db17810dd620ae7a987c">SetLastReceivedDDPacket</a>(packetID);
<a name="l00131"></a>00131                                 <span class="keywordflow">if</span> (!<a class="code" href="class_o_s_p_f_1_1_database_description_handler.html#adc25d3b381b76c21203d40fbc42b411f">ProcessDDPacket</a>(ddPacket, intf, neighbor, <span class="keyword">false</span>)) {
<a name="l00132"></a>00132                                     <span class="keywordflow">break</span>;
<a name="l00133"></a>00133                                 }
<a name="l00134"></a>00134                                 <span class="keywordflow">if</span> (!neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aea93ed0658f2cd5b2260ab42003bce67">IsLinkStateRequestListEmpty</a>() &amp;&amp;
<a name="l00135"></a>00135                                     !neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ae16c32f7fbca1565995cb1899e537272">IsRequestRetransmissionTimerActive</a>())
<a name="l00136"></a>00136                                 {
<a name="l00137"></a>00137                                     neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a4212b9dbd0b79d1ef9bfe85ac8267100">SendLinkStateRequestPacket</a>();
<a name="l00138"></a>00138                                     neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ad1cdf086b2ae5157802b7bdaae0f1b48">ClearRequestRetransmissionTimer</a>();
<a name="l00139"></a>00139                                     neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a61301d1573cf63159273cb68e2e53763">StartRequestRetransmissionTimer</a>();
<a name="l00140"></a>00140                                 }
<a name="l00141"></a>00141                             } <span class="keywordflow">else</span> {
<a name="l00142"></a>00142                                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a1bc1430607b1cbe754c219564b625777">OSPF::Neighbor::SequenceNumberMismatch</a>);
<a name="l00143"></a>00143                             }
<a name="l00144"></a>00144                         }
<a name="l00145"></a>00145                     } <span class="keywordflow">else</span> {
<a name="l00146"></a>00146                         <span class="keywordflow">if</span> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaefc9f21d8f84801d516adef2c32534c">GetDatabaseExchangeRelationship</a>() == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea24282c4d17f737f34152596465657c92">OSPF::Neighbor::Slave</a>) {
<a name="l00147"></a>00147                             neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a2bfb63430d3e74405879ad4cd7aa3272">RetransmitDatabaseDescriptionPacket</a>();
<a name="l00148"></a>00148                         }
<a name="l00149"></a>00149                     }
<a name="l00150"></a>00150                 }
<a name="l00151"></a>00151                 <span class="keywordflow">break</span>;
<a name="l00152"></a>00152             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html#abe30518a64009a9ae44944c1036a4c0aa8a2da2947457a95e834ef3a256b2717a">OSPF::Neighbor::LoadingState</a>:
<a name="l00153"></a>00153             <span class="keywordflow">case</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html#abe30518a64009a9ae44944c1036a4c0aa040ad05c4a2d67aa2a167e45d4b74788">OSPF::Neighbor::FullState</a>:
<a name="l00154"></a>00154                 {
<a name="l00155"></a>00155                     <a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html">OSPF::Neighbor::DDPacketID</a> packetID;
<a name="l00156"></a>00156                     packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a31049124001ced8917df9779d253890c">ddOptions</a>      = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#a6dd39616b4a729e0f10ce8bb7dbabd93">getDdOptions</a>();
<a name="l00157"></a>00157                     packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#ae64f7b512e17277d7751104072d74718">options</a>        = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#ae9d7fdd28c7e085180d1e5a48429123a">getOptions</a>();
<a name="l00158"></a>00158                     packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a52ff6c768aa7bde52d267b4f5b12d494">sequenceNumber</a> = ddPacket-&gt;<a class="code" href="class_o_s_p_f_database_description_packet.html#af679fc4105e146617fd1d9db7814da25">getDdSequenceNumber</a>();
<a name="l00159"></a>00159 
<a name="l00160"></a>00160                     <span class="keywordflow">if</span> ((packetID != neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a8128e6f359eb5627649ba96f24bbce4a">GetLastReceivedDDPacket</a>()) ||
<a name="l00161"></a>00161                         (packetID.<a class="code" href="struct_o_s_p_f_1_1_neighbor_1_1_d_d_packet_i_d.html#a31049124001ced8917df9779d253890c">ddOptions</a>.<a class="code" href="struct_o_s_p_f_d_d_options.html#a5b89a1ecd60217e80cd957ab8b912ad0">I_Init</a>))
<a name="l00162"></a>00162                     {
<a name="l00163"></a>00163                         neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a1bc1430607b1cbe754c219564b625777">OSPF::Neighbor::SequenceNumberMismatch</a>);
<a name="l00164"></a>00164                     } <span class="keywordflow">else</span> {
<a name="l00165"></a>00165                         <span class="keywordflow">if</span> (neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aaefc9f21d8f84801d516adef2c32534c">GetDatabaseExchangeRelationship</a>() == <a class="code" href="class_o_s_p_f_1_1_neighbor.html#a070be08a1440a92a8a72c545aefa2dcea24282c4d17f737f34152596465657c92">OSPF::Neighbor::Slave</a>) {
<a name="l00166"></a>00166                             <span class="keywordflow">if</span> (!neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a2bfb63430d3e74405879ad4cd7aa3272">RetransmitDatabaseDescriptionPacket</a>()) {
<a name="l00167"></a>00167                                 neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a14aa3724c4f692d5c9635bd24b9dfce7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_neighbor.html#aa11c941b2bc4a36c36fba1cb453a4172a1bc1430607b1cbe754c219564b625777">OSPF::Neighbor::SequenceNumberMismatch</a>);
<a name="l00168"></a>00168                             }
<a name="l00169"></a>00169                         }
<a name="l00170"></a>00170                     }
<a name="l00171"></a>00171                 }
<a name="l00172"></a>00172                 <span class="keywordflow">break</span>;
<a name="l00173"></a>00173             <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
<a name="l00174"></a>00174         }
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_database_description_handler_8h_source.html">DatabaseDescriptionHandler.h</a></li>
<li><a class="el" href="_database_description_handler_8cc_source.html">DatabaseDescriptionHandler.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Mar 23 17:08:39 2010 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
