<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: NotificationBoard Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>NotificationBoard Class Reference</h1><!-- doxytag: class="NotificationBoard" -->
<p><code>#include &lt;<a class="el" href="_notification_board_8h_source.html">NotificationBoard.h</a>&gt;</code></p>

<p><a href="class_notification_board-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="class_i_notifiable.html">INotifiable</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotifiableVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; int, <br class="typebreak"/>
<a class="el" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotifiableVector</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#a04c2b90ab6db51c359ace8d11caf4041">ClientMap</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Methods for consumers of change notifications</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp557d26637be33a403cbce00bab43f8ca"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a> (<a class="el" href="class_i_notifiable.html">INotifiable</a> *client, int category)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#a618069a9c5e40e5adc663def23325035">unsubscribe</a> (<a class="el" href="class_i_notifiable.html">INotifiable</a> *client, int category)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#a668821c8867857ed47a4adaaa99248f8">hasSubscribers</a> (int category)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Methods for producers of change notifications</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd981cc7b6e07f75135a7fd75f86e7428"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a> (int category, const cPolymorphic *details=NULL)</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#a3f958d3beda02f0a0ad5672bbed4f953">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#a95125026311c1ebea679364a6eb6d4a3">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_notification_board.html#a04c2b90ab6db51c359ace8d11caf4041">ClientMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">clientMap</a></td></tr>
<tr><td colspan="2"><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_notification_board.html#a4dc63b8b48b2e35f9fa899c3525310f6">operator&lt;&lt;</a> (std::ostream &amp;, const <a class="el" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotifiableVector</a> &amp;)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Acts as a intermediary between module where state changes can occur and modules which are interested in learning about those changes; "Notification Broker".</p>
<p>Notification events are grouped into "categories." Examples of categories are: NF_HOSTPOSITION_UPDATED, NF_RADIOSTATE_CHANGED, NF_PP_TX_BEGIN, NF_PP_TX_END, NF_IPv4_ROUTE_ADDED, NF_BEACON_LOST NF_NODE_FAILURE, NF_NODE_RECOVERY, etc. Each category is identified by an integer (right now it's assigned in the source code via an enum, in the future we'll convert to dynamic category registration).</p>
<p>To trigger a notification, the client must obtain a pointer to the <a class="el" href="class_notification_board.html">NotificationBoard</a> of the given host or router (explained later), and call its <a class="el" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification()</a> method. The notification will be delivered to all subscribed clients immediately, inside the <a class="el" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification()</a> call.</p>
<p>Clients that wish to receive notifications should implement (subclass from) the <a class="el" href="class_i_notifiable.html">INotifiable</a> interface, obtain a pointer to the <a class="el" href="class_notification_board.html">NotificationBoard</a>, and subscribe to the categories they are interested in by calling the <a class="el" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe()</a> method of the <a class="el" href="class_notification_board.html">NotificationBoard</a>. Notifications will be delivered to the receiveChangeNotification() method of the client (redefined from <a class="el" href="class_i_notifiable.html">INotifiable</a>).</p>
<p>In cases when the category itself (an int) does not carry enough information about the notification event, one can pass additional information in a data class. There is no restriction on what the data class may contain, except that it has to be subclassed from cPolymorphic, and of course producers and consumers of notifications should agree on its contents. If no extra info is needed, one can pass a NULL pointer in the <a class="el" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification()</a> method.</p>
<p>A module which implements <a class="el" href="class_i_notifiable.html">INotifiable</a> looks like this:</p>
<pre>
 class Foo : public cSimpleModule, public <a class="el" href="class_i_notifiable.html">INotifiable</a> {
     ...
     virtual void receiveChangeNotification(int category, const cPolymorphic *details) {..}
     ...
 };
 </pre><p>Obtaining a pointer to the <a class="el" href="class_notification_board.html">NotificationBoard</a> module of that host/router:</p>
<pre>
 <a class="el" href="class_notification_board.html">NotificationBoard</a> *nb; // this is best made a module class member
 nb = NotificationBoardAccess().get();  // best done in <a class="el" href="class_notification_board.html#a3f958d3beda02f0a0ad5672bbed4f953">initialize()</a>
 </pre><p>See NED file for additional info.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_i_notifiable.html">INotifiable</a> </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Andras Varga </dd></dl>

<p>Definition at line <a class="el" href="_notification_board_8h_source.html#l00085">85</a> of file <a class="el" href="_notification_board_8h_source.html">NotificationBoard.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a04c2b90ab6db51c359ace8d11caf4041"></a><!-- doxytag: member="NotificationBoard::ClientMap" ref="a04c2b90ab6db51c359ace8d11caf4041" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;int, <a class="el" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotifiableVector</a>&gt; <a class="el" href="class_notification_board.html#a04c2b90ab6db51c359ace8d11caf4041">NotificationBoard::ClientMap</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_notification_board_8h_source.html#l00089">89</a> of file <a class="el" href="_notification_board_8h_source.html">NotificationBoard.h</a>.</p>

</div>
</div>
<a class="anchor" id="aaf7daab1d6f01c2993bc3676e1220281"></a><!-- doxytag: member="NotificationBoard::NotifiableVector" ref="aaf7daab1d6f01c2993bc3676e1220281" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="class_i_notifiable.html">INotifiable</a> *&gt; <a class="el" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotificationBoard::NotifiableVector</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_notification_board_8h_source.html#l00088">88</a> of file <a class="el" href="_notification_board_8h_source.html">NotificationBoard.h</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a2bb0a5aa0cb272a9b15cb5a58a253fcc"></a><!-- doxytag: member="NotificationBoard::fireChangeNotification" ref="a2bb0a5aa0cb272a9b15cb5a58a253fcc" args="(int category, const cPolymorphic *details=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NotificationBoard::fireChangeNotification </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>details</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tells <a class="el" href="class_notification_board.html">NotificationBoard</a> that a change of the given category has taken place. The optional details object may carry more specific information about the change (e.g. exact location, specific attribute that changed, old value, new value, etc). </p>

<p>Definition at line <a class="el" href="_notification_board_8cc_source.html#l00096">96</a> of file <a class="el" href="_notification_board_8cc_source.html">NotificationBoard.cc</a>.</p>

<p>Referenced by <a class="el" href="_interface_table_8cc_source.html#l00141">InterfaceTable::addInterface()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00483">RoutingTable6::addOrUpdateOnLinkPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00520">RoutingTable6::addOrUpdateOwnAdvPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00619">RoutingTable6::addRoute()</a>, <a class="el" href="_routing_table_8cc_source.html#l00416">RoutingTable::addRoute()</a>, <a class="el" href="_r_s_v_p_8cc_source.html#l00757">RSVP::announceLinkChange()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01247">LDP::announceLinkChange()</a>, <a class="el" href="_ieee80211_mgmt_s_t_a_8cc_source.html#l00252">Ieee80211MgmtSTA::beaconLost()</a>, <a class="el" href="_snr_eval_8cc_source.html#l00430">SnrEval::changeChannel()</a>, <a class="el" href="_abstract_radio_8cc_source.html#l00538">AbstractRadio::changeChannel()</a>, <a class="el" href="_interface_table_8cc_source.html#l00197">InterfaceTable::deleteInterface()</a>, <a class="el" href="_routing_table_8cc_source.html#l00449">RoutingTable::deleteRoute()</a>, <a class="el" href="_ether_m_a_c_base_8cc_source.html#l00558">EtherMACBase::fireChangeNotification()</a>, <a class="el" href="_ieee80211_mgmt_s_t_a_8cc_source.html#l00668">Ieee80211MgmtSTA::handleAssociationResponseFrame()</a>, <a class="el" href="_ether_m_a_c2_8cc_source.html#l00153">EtherMAC2::handleEndTxPeriod()</a>, <a class="el" href="_snr_eval_8cc_source.html#l00348">SnrEval::handleLowerMsgEnd()</a>, <a class="el" href="_gilbert_elliot_snr_8cc_source.html#l00215">GilbertElliotSnr::handleLowerMsgEnd()</a>, <a class="el" href="_snr_eval_8cc_source.html#l00269">SnrEval::handleLowerMsgStart()</a>, <a class="el" href="_gilbert_elliot_snr_8cc_source.html#l00135">GilbertElliotSnr::handleLowerMsgStart()</a>, <a class="el" href="_p_p_p_8cc_source.html#l00180">PPP::handleMessage()</a>, <a class="el" href="_snr_eval_8cc_source.html#l00212">SnrEval::handleSelfMsg()</a>, <a class="el" href="_gilbert_elliot_snr_8cc_source.html#l00066">GilbertElliotSnr::handleSelfMsg()</a>, <a class="el" href="_snr_eval_8cc_source.html#l00124">SnrEval::handleUpperMsg()</a>, <a class="el" href="_snr_eval_8cc_source.html#l00033">SnrEval::initialize()</a>, <a class="el" href="_abstract_radio_8cc_source.html#l00036">AbstractRadio::initialize()</a>, <a class="el" href="_interface_table_8cc_source.html#l00217">InterfaceTable::interfaceChanged()</a>, <a class="el" href="_ether_m_a_c2_8cc_source.html#l00130">EtherMAC2::processMsgFromNetwork()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00632">RoutingTable6::removeRoute()</a>, <a class="el" href="_abstract_radio_8cc_source.html#l00635">AbstractRadio::setRadioState()</a>, <a class="el" href="_ether_m_a_c2_8cc_source.html#l00090">EtherMAC2::startFrameTransmission()</a>, <a class="el" href="_p_p_p_8cc_source.html#l00157">PPP::startTransmitting()</a>, <a class="el" href="_notification_board_8cc_source.html#l00061">subscribe()</a>, <a class="el" href="_notification_board_8cc_source.html#l00075">unsubscribe()</a>, and <a class="el" href="_basic_mobility_8cc_source.html#l00096">BasicMobility::updatePosition()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00097"></a>00097 {
<a name="l00098"></a>00098     Enter_Method(<span class="stringliteral">&quot;fireChangeNotification(%s, %s)&quot;</span>, <a class="code" href="_notifier_consts_8cc.html#a6808a262fcec2a310a9e7ed7d75c029f">notificationCategoryName</a>(category),
<a name="l00099"></a>00099                  details?details-&gt;info().c_str() : <span class="stringliteral">&quot;n/a&quot;</span>);
<a name="l00100"></a>00100 
<a name="l00101"></a>00101     ClientMap::iterator it = <a class="code" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">clientMap</a>.find(category);
<a name="l00102"></a>00102     <span class="keywordflow">if</span> (it==<a class="code" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">clientMap</a>.end())
<a name="l00103"></a>00103         <span class="keywordflow">return</span>;
<a name="l00104"></a>00104     <a class="code" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotifiableVector</a>&amp; clients = it-&gt;second;
<a name="l00105"></a>00105     <span class="keywordflow">for</span> (NotifiableVector::iterator j=clients.begin(); j!=clients.end(); j++)
<a name="l00106"></a>00106         (*j)-&gt;receiveChangeNotification(category, details);
<a name="l00107"></a>00107 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a95125026311c1ebea679364a6eb6d4a3"></a><!-- doxytag: member="NotificationBoard::handleMessage" ref="a95125026311c1ebea679364a6eb6d4a3" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NotificationBoard::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Does nothing. </p>

<p>Definition at line <a class="el" href="_notification_board_8cc_source.html#l00055">55</a> of file <a class="el" href="_notification_board_8cc_source.html">NotificationBoard.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00056"></a>00056 {
<a name="l00057"></a>00057     error(<span class="stringliteral">&quot;NotificationBoard doesn&apos;t handle messages, it can be accessed via direct method calls&quot;</span>);
<a name="l00058"></a>00058 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a668821c8867857ed47a4adaaa99248f8"></a><!-- doxytag: member="NotificationBoard::hasSubscribers" ref="a668821c8867857ed47a4adaaa99248f8" args="(int category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool NotificationBoard::hasSubscribers </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>category</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns true if any client has subscribed to the given category. This, by using a local boolean 'hasSubscriber' flag, allows performance-critical clients to leave out calls to <a class="el" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification()</a> if there's no one subscribed anyway. The flag should be refreshed on each NF_SUBSCRIBERLIST_CHANGED notification. </p>

<p>Definition at line <a class="el" href="_notification_board_8cc_source.html#l00090">90</a> of file <a class="el" href="_notification_board_8cc_source.html">NotificationBoard.cc</a>.</p>

<p>Referenced by <a class="el" href="_p_p_p_8cc_source.html#l00318">PPP::updateHasSubcribers()</a>, and <a class="el" href="_ether_m_a_c2_8cc_source.html#l00170">EtherMAC2::updateHasSubcribers()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00091"></a>00091 {
<a name="l00092"></a>00092     ClientMap::iterator it = <a class="code" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">clientMap</a>.find(category);
<a name="l00093"></a>00093     <span class="keywordflow">return</span> it!=<a class="code" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">clientMap</a>.end() &amp;&amp; !it-&gt;second.empty();
<a name="l00094"></a>00094 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3f958d3beda02f0a0ad5672bbed4f953"></a><!-- doxytag: member="NotificationBoard::initialize" ref="a3f958d3beda02f0a0ad5672bbed4f953" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NotificationBoard::initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize. </p>

<p>Definition at line <a class="el" href="_notification_board_8cc_source.html#l00050">50</a> of file <a class="el" href="_notification_board_8cc_source.html">NotificationBoard.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00051"></a>00051 {
<a name="l00052"></a>00052     WATCH_MAP(<a class="code" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">clientMap</a>);
<a name="l00053"></a>00053 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aeb02a282e6c807c1cb064a28e8409ff2"></a><!-- doxytag: member="NotificationBoard::subscribe" ref="aeb02a282e6c807c1cb064a28e8409ff2" args="(INotifiable *client, int category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NotificationBoard::subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_notifiable.html">INotifiable</a> *&nbsp;</td>
          <td class="paramname"> <em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>category</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Subscribe to changes of the given category </p>

<p>Definition at line <a class="el" href="_notification_board_8cc_source.html#l00061">61</a> of file <a class="el" href="_notification_board_8cc_source.html">NotificationBoard.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00083">RoutingTable6::initialize()</a>, <a class="el" href="_routing_table_8cc_source.html#l00059">RoutingTable::initialize()</a>, <a class="el" href="_p_p_p_8cc_source.html#l00046">PPP::initialize()</a>, <a class="el" href="_n_a_m_trace_writer_8cc_source.html#l00031">NAMTraceWriter::initialize()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">Mac80211::initialize()</a>, <a class="el" href="_link_state_routing_8cc_source.html#l00040">LinkStateRouting::initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00099">LDP::initialize()</a>, <a class="el" href="_ieee80211_mgmt_a_p_8cc_source.html#l00034">Ieee80211MgmtAP::initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">Ieee80211Mac::initialize()</a>, <a class="el" href="_ieee80211_agent_s_t_a_8cc_source.html#l00029">Ieee80211AgentSTA::initialize()</a>, <a class="el" href="_c_s_m_a_mac_layer_8cc_source.html#l00040">CSMAMacLayer::initialize()</a>, <a class="el" href="_channel_access_8cc_source.html#l00030">ChannelAccess::initialize()</a>, <a class="el" href="_ether_m_a_c_base_8cc_source.html#l00112">EtherMACBase::initializeNotificationBoard()</a>, and <a class="el" href="_ieee80211_mgmt_s_t_a_8cc_source.html#l00337">Ieee80211MgmtSTA::processScanCommand()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00062"></a>00062 {
<a name="l00063"></a>00063     Enter_Method(<span class="stringliteral">&quot;subscribe(%s)&quot;</span>, <a class="code" href="_notifier_consts_8cc.html#a6808a262fcec2a310a9e7ed7d75c029f">notificationCategoryName</a>(category));
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <span class="comment">// find or create entry for this category</span>
<a name="l00066"></a>00066     <a class="code" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotifiableVector</a>&amp; clients = <a class="code" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">clientMap</a>[category];
<a name="l00067"></a>00067 
<a name="l00068"></a>00068     <span class="comment">// add client if not already there</span>
<a name="l00069"></a>00069     <span class="keywordflow">if</span> (<a class="code" href="_utils_8cc.html#a33bdc8b2583dcc9d2a8bfe1ec578352d">std::find</a>(clients.begin(), clients.end(), client) == clients.end())
<a name="l00070"></a>00070         clients.push_back(client);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba77cc5f821ad6531a4a0545490a9f24bb">NF_SUBSCRIBERLIST_CHANGED</a>, NULL);
<a name="l00073"></a>00073 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a618069a9c5e40e5adc663def23325035"></a><!-- doxytag: member="NotificationBoard::unsubscribe" ref="a618069a9c5e40e5adc663def23325035" args="(INotifiable *client, int category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NotificationBoard::unsubscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_notifiable.html">INotifiable</a> *&nbsp;</td>
          <td class="paramname"> <em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>category</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unsubscribe from changes of the given category </p>

<p>Definition at line <a class="el" href="_notification_board_8cc_source.html#l00075">75</a> of file <a class="el" href="_notification_board_8cc_source.html">NotificationBoard.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mgmt_s_t_a_8cc_source.html#l00383">Ieee80211MgmtSTA::scanNextChannel()</a>, and <a class="el" href="_p_p_p_8cc_source.html#l00038">PPP::~PPP()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00076"></a>00076 {
<a name="l00077"></a>00077     Enter_Method(<span class="stringliteral">&quot;unsubscribe(%s)&quot;</span>, <a class="code" href="_notifier_consts_8cc.html#a6808a262fcec2a310a9e7ed7d75c029f">notificationCategoryName</a>(category));
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     <span class="comment">// find (or create) entry for this category</span>
<a name="l00080"></a>00080     <a class="code" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotifiableVector</a>&amp; clients = <a class="code" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">clientMap</a>[category];
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <span class="comment">// remove client if there</span>
<a name="l00083"></a>00083     NotifiableVector::iterator it = <a class="code" href="_utils_8cc.html#a33bdc8b2583dcc9d2a8bfe1ec578352d">std::find</a>(clients.begin(), clients.end(), client);
<a name="l00084"></a>00084     <span class="keywordflow">if</span> (it!=clients.end())
<a name="l00085"></a>00085         clients.erase(it);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba77cc5f821ad6531a4a0545490a9f24bb">NF_SUBSCRIBERLIST_CHANGED</a>, NULL);
<a name="l00088"></a>00088 }
</pre></div></p>

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a4dc63b8b48b2e35f9fa899c3525310f6"></a><!-- doxytag: member="NotificationBoard::operator&lt;&lt;" ref="a4dc63b8b48b2e35f9fa899c3525310f6" args="(std::ostream &amp;, const NotifiableVector &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_notification_board.html#aaf7daab1d6f01c2993bc3676e1220281">NotifiableVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>v</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_notification_board_8cc_source.html#l00025">25</a> of file <a class="el" href="_notification_board_8cc_source.html">NotificationBoard.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00026"></a>00026 {
<a name="l00027"></a>00027     os &lt;&lt; v.size() &lt;&lt; <span class="stringliteral">&quot; client(s)&quot;</span>;
<a name="l00028"></a>00028     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;v.size(); i++)
<a name="l00029"></a>00029     {
<a name="l00030"></a>00030         os &lt;&lt; (i==0 ? <span class="stringliteral">&quot;: &quot;</span> : <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00031"></a>00031         <span class="keywordflow">if</span> (dynamic_cast&lt;cModule*&gt;(v[i]))
<a name="l00032"></a>00032         {
<a name="l00033"></a>00033             cModule *mod = <span class="keyword">dynamic_cast&lt;</span>cModule*<span class="keyword">&gt;</span>(v[i]);
<a name="l00034"></a>00034             os &lt;&lt; <span class="stringliteral">&quot;mod (&quot;</span> &lt;&lt; mod-&gt;getClassName() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; mod-&gt;getFullName() &lt;&lt; <span class="stringliteral">&quot; id=&quot;</span> &lt;&lt; mod-&gt;getId();
<a name="l00035"></a>00035         }
<a name="l00036"></a>00036         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;cPolymorphic*&gt;(v[i]))
<a name="l00037"></a>00037         {
<a name="l00038"></a>00038             cPolymorphic *obj = <span class="keyword">dynamic_cast&lt;</span>cPolymorphic*<span class="keyword">&gt;</span>(v[i]);
<a name="l00039"></a>00039             os &lt;&lt; <span class="stringliteral">&quot;a &quot;</span> &lt;&lt; obj-&gt;getClassName();
<a name="l00040"></a>00040         }
<a name="l00041"></a>00041         <span class="keywordflow">else</span>
<a name="l00042"></a>00042         {
<a name="l00043"></a>00043             os &lt;&lt; <span class="stringliteral">&quot;a &quot;</span> &lt;&lt; opp_typename(<span class="keyword">typeid</span>(v[i]));
<a name="l00044"></a>00044         }
<a name="l00045"></a>00045     }
<a name="l00046"></a>00046     <span class="keywordflow">return</span> os;
<a name="l00047"></a>00047 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="acb59aab805c7544f4a9800a2498cc828"></a><!-- doxytag: member="NotificationBoard::clientMap" ref="acb59aab805c7544f4a9800a2498cc828" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_notification_board.html#a04c2b90ab6db51c359ace8d11caf4041">ClientMap</a> <a class="el" href="class_notification_board.html#acb59aab805c7544f4a9800a2498cc828">NotificationBoard::clientMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_notification_board_8h_source.html#l00093">93</a> of file <a class="el" href="_notification_board_8h_source.html">NotificationBoard.h</a>.</p>

<p>Referenced by <a class="el" href="_notification_board_8cc_source.html#l00096">fireChangeNotification()</a>, <a class="el" href="_notification_board_8cc_source.html#l00090">hasSubscribers()</a>, <a class="el" href="_notification_board_8cc_source.html#l00050">initialize()</a>, <a class="el" href="_notification_board_8cc_source.html#l00061">subscribe()</a>, and <a class="el" href="_notification_board_8cc_source.html#l00075">unsubscribe()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_notification_board_8h_source.html">NotificationBoard.h</a></li>
<li><a class="el" href="_notification_board_8cc_source.html">NotificationBoard.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Mar 23 17:08:35 2010 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
