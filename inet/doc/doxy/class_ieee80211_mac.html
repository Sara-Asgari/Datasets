<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: Ieee80211Mac Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Ieee80211Mac Class Reference</h1><!-- doxytag: class="Ieee80211Mac" --><!-- doxytag: inherits="WirelessMacBase,INotifiable" -->
<p><code>#include &lt;<a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Ieee80211Mac:</div>
<div class="dynsection">
 <div class="center">
  <img src="class_ieee80211_mac.gif" usemap="#Ieee80211Mac_map" alt=""/>
  <map id="Ieee80211Mac_map" name="Ieee80211Mac_map">
<area href="class_wireless_mac_base.html" alt="WirelessMacBase" shape="rect" coords="0,0,113,24"/>
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="123,0,236,24"/>
</map>
 </div>
</div>

<p><a href="class_ieee80211_mac-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ieee80211_mac_1_1_ieee80211_a_s_f_tuple.html">Ieee80211ASFTuple</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Construction functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp92cd753bd374c30f870224646c1be6c8"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda">setBasicBitrate</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attaches a <a class="el" href="class_phy_control_info.html">PhyControlInfo</a> to the frame which will cause it to be sent at basicBitrate not bitrate (e.g. 2Mbps instead of 11Mbps). Used with ACK, CTS, RTS.  <a href="#a90256fefdfde93f0f350a100c8b94eda"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Initialization functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpb89a5f7fe6e285831b51421420ef2be7"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a71351c92bb5234f62edb24b1a0f1f1b7">numInitStages</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization of the module and its variables.  <a href="#a71351c92bb5234f62edb24b1a0f1f1b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize</a> (int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#acc89ca1fc93ad17f2a78a01bd474f058"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a306f0e039efc2ede2e2e209bf02f7b1a">registerInterface</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a76503451f2ddc57bec7426c3f9f919ca">initializeQueueModule</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader">Message handing functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp6e8a04131895b23dad922861a64a856d"></a>Functions called from other classes to notify about state changes and to handle messages. </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3c6164232e8645bbbef5d178d78fd8c4">receiveChangeNotification</a> (int category, const cPolymorphic *details)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the <a class="el" href="class_notification_board.html">NotificationBoard</a> whenever a change occurs we're interested in.  <a href="#a3c6164232e8645bbbef5d178d78fd8c4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aedaaf3e337f2d4a0790dbe392ac9f481">handleCommand</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle commands (msg kind+control info) coming from upper layers.  <a href="#aedaaf3e337f2d4a0790dbe392ac9f481"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle timer self messages.  <a href="#a9c4e21cc98783e53810b622e0c6deda2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg</a> (cPacket *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from upper layer.  <a href="#a3c78df80f39331fe0c35a19b2a991714"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg</a> (cPacket *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from lower (physical) layer.  <a href="#af163e249ed0577fb5027e3e9cf54d6a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle all kinds of messages and notifications with the state machine.  <a href="#aa95e52e25b2792fb62dd4d758cac72a2"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Timing functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpb937595f1ed450ae80ab4b2745ebecea"></a>Calculate various timings based on transmission rate and physical layer charactersitics. </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0f34064c34a1e6bc53832280a95e8fbc">getDIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a8aee694a3627cb27994c0b29bc4c0d1f">getPIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg, int r)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Timer functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp859479deeea3593dedef29ae81c8eba6"></a>These functions have the side effect of starting the corresponding timers. </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a325e59dc74a3ad59596933aaf96012a7">scheduleSIFSPeriod</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">scheduleDIFSPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ae49ff307323745c607aa72ddbd8eefcd">scheduleBroadcastTimeoutPeriod</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">cancelTimeoutPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">scheduleCTSTimeoutPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414">scheduleReservePeriod</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schedule network allocation period according to 9.2.5.4.  <a href="#a21662171dd8c6356df3c8b050d7c9414"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a45baf5991b010588132ecfea105a17b0">invalidateBackoffPeriod</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generates a new backoff period based on the contention window.  <a href="#a45baf5991b010588132ecfea105a17b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4ea47166959fb7622be67011d131d8f5">scheduleBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader">Frame transmission functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp272611240e09e72a82bd49f658b621d6"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1fa778f58e945ac0b347dfa66785224b">sendACKFrameOnEndSIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0afcec3ebbe4fac7c63ac32937604540">sendACKFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a821d34cb04fd6ebd9b0d6989b963614d">sendCTSFrameOnEndSIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a910622485a5816a5a5475858871bbbdc">sendCTSFrame</a> (<a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *rtsFrame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a535d6bc217f1cfc210fe798c3b89a114">sendDataFrameOnEndSIFS</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a39720691a045c98037ec4025b9ab5207">sendBroadcastFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Frame builder functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd0d3dcc88ace07df1439efbe303cdadd"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_a_c_k_frame.html">Ieee80211ACKFrame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7eab1962fd94c95151d62e3fb71253e0">buildACKFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToACK)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">buildRTSFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_c_t_s_frame.html">Ieee80211CTSFrame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aaea047b56dcec7dc99d9681138c1f719">buildCTSFrame</a> (<a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *rtsFrame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a8213d9fea4bc9500dfe899ee70d2789e">buildBroadcastFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Utility functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpcebca7958b9505d1ef2e74b67dccca59"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af24a75754986f091cf9b5e6987bb7bf3">sendDownPendingRadioConfigMsg</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send down the change channel message to the physical layer if there is any.  <a href="#af24a75754986f091cf9b5e6987bb7bf3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a030408679db4d3c498bf79032baa4618">setMode</a> (<a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a> <a class="el" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the current MAC operation mode.  <a href="#a030408679db4d3c498bf79032baa4618"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43">getCurrentTransmission</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current frame being transmitted.  <a href="#a85bc4ee88b4123a9b38d42cbf6af8e43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset backoff, backoffPeriod and retryCounter for IDLE state.  <a href="#ace0608e9ca57414b54817d04b184b120"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e">isMediumStateChange</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used by the state machine to identify medium state change events. This message is currently optimized away and not sent through the kernel.  <a href="#adf18b82f7ec2838535e84fba8ef43f3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729">isMediumFree</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells if the medium is free according to the physical and virtual carrier sense algorithm.  <a href="#aa4550d6a69c5e5a56d2a72ac0dc86729"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9">isBroadcast</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if message is a broadcast message.  <a href="#a3e8e21090db18d0cc4596af8588346c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b">isForUs</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if message destination address is ours.  <a href="#a6a44f63a391702d7e31078eae7fe453b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0">isDataOrMgmtFrame</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if the frame is a data or management frame.  <a href="#a331f759ba45d0d363362dce7d1b9f9b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a">getFrameReceivedBeforeSIFS</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the last frame received before the SIFS period.  <a href="#a3ae0423bce927f7db18f55a88e44e20a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da">popTransmissionQueue</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes frame at the front of queue.  <a href="#af9ffa2b13e0336e9cc15334dea0122da"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71">computeFrameDuration</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Computes the duration (in seconds) of the transmission of a frame over the physical channel. 'bits' should be the total length of the MAC frame in bits, but excluding the physical layer framing (preamble etc.).  <a href="#a938984c4144284ab225e087b6789ce71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a38e18309549f34d7b355c1b1f4aab298">computeFrameDuration</a> (int bits, double <a class="el" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">bitrate</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Logs all state information.  <a href="#a0cae572eab527e836aadae2ef9df5b3d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad717066cb5cc83f789b4abbe28d311d7">modeName</a> (int <a class="el" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Produce a readable name of the given MAC operation mode.  <a href="#ad717066cb5cc83f789b4abbe28d311d7"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Timer messages</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp3c6efce5ecb2cb0f7c5ed6274185d56c"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">mediumStateChange</a></td></tr>
<tr><td colspan="2"><div class="groupHeader">Statistics</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpc33e404a441c6ba9648f88af3c68a1ca"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5a3258861ee26e78b2378160233ae6f5">numRetry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a6c4930c1fd531fe421935816d8856443">numSentWithoutRetry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aea9e86c3d8f9db03a6a9dcab0bd36df7">numGivenUp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5451e3e610dca607187e39f176d91120">numSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa6376b24ff26d3f78706f5b8656c3167">numSentBroadcast</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af5839182df73e2f63a767d1927a5ac16">numReceivedBroadcast</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a></td></tr>
<tr><td colspan="2"><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::list<br class="typebreak"/>
&lt; <a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a79de4fc04e68ba3e7154437b1b6bf6de">Ieee80211DataOrMgmtFrameList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::list<br class="typebreak"/>
&lt; <a class="el" href="struct_ieee80211_mac_1_1_ieee80211_a_s_f_tuple.html">Ieee80211ASFTuple</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a58735d5a5662d92c0dd3246a4e8ffbeb">Ieee80211ASFTupleList</a></td></tr>
<tr><td colspan="2"><h2>Ieee80211Mac state variables</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp6bf329588e375996247de73bbda4d7b2"></a> Various state information checked and modified according to the state machine. </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020da">State</a> { <br/>
&nbsp;&nbsp;<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5b19e098d83d766d41ee620e19aa2186">WAITDIFS</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa71f935807206413912f41a57be08c5bd">WAITBROADCAST</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a> { <a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792">DCF</a>, 
<a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189">PCF</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cFSM&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762">sequenceNumber</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20">lastReceiveFailed</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">nav</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449">RadioState::State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ieee80211_mac.html#a79de4fc04e68ba3e7154437b1b6bf6de">Ieee80211DataOrMgmtFrameList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">transmissionQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ieee80211_mac.html#a58735d5a5662d92c0dd3246a4e8ffbeb">Ieee80211ASFTupleList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">asfTuplesList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_passive_queue.html">IPassiveQueue</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">queueModule</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a></td></tr>
<tr><td colspan="2"><h2>Configuration parameters</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp3a80e1e29c96d0837b12aef65785a41a"></a> These are filled in during the initialization phase and not supposed to change afterwards. </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_a_c_address.html">MACAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">bitrate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a">maxQueueSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613">rtsThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">cwMinData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a189e3641d647b4d4c506e709a0873467">cwMinBroadcast</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af6a8a67f828409cf76bf3c3f0fd6d35b">fragmentationThreshold</a> = 2346</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>IEEE 802.11b Media Access Control Layer.</p>
<p>Various comments in the code refer to the Wireless LAN Medium Access Control (MAC) and Physical Layer(PHY) Specifications ANSI/IEEE Std 802.11, 1999 Edition (R2003)</p>
<p>For more info, see the NED file.</p>
<p>TODO: support fragmentation TODO: PCF mode TODO: CF period TODO: pass radio power to upper layer TODO: transmission complete notification to upper layer TODO: STA TCF timer syncronization, see Chapter 11 pp 123</p>
<p>Parts of the implementation have been taken over from the Mobility Framework's <a class="el" href="class_mac80211.html" title="An implementation of the 802.11b MAC.">Mac80211</a> module. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00054">54</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a58735d5a5662d92c0dd3246a4e8ffbeb"></a><!-- doxytag: member="Ieee80211Mac::Ieee80211ASFTupleList" ref="a58735d5a5662d92c0dd3246a4e8ffbeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;<a class="el" href="struct_ieee80211_mac_1_1_ieee80211_a_s_f_tuple.html">Ieee80211ASFTuple</a>*&gt; <a class="el" href="class_ieee80211_mac.html#a58735d5a5662d92c0dd3246a4e8ffbeb">Ieee80211Mac::Ieee80211ASFTupleList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00068">68</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

</div>
</div>
<a class="anchor" id="a79de4fc04e68ba3e7154437b1b6bf6de"></a><!-- doxytag: member="Ieee80211Mac::Ieee80211DataOrMgmtFrameList" ref="a79de4fc04e68ba3e7154437b1b6bf6de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a>*&gt; <a class="el" href="class_ieee80211_mac.html#a79de4fc04e68ba3e7154437b1b6bf6de">Ieee80211Mac::Ieee80211DataOrMgmtFrameList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00056">56</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

</div>
</div>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="acc067e4a0585c9fbac4ce009e2ed03ca"></a><!-- doxytag: member="Ieee80211Mac::Mode" ref="acc067e4a0585c9fbac4ce009e2ed03ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Ieee80211Mac::Mode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>80211 MAC operation modes </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792"></a><!-- doxytag: member="DCF" ref="acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792" args="" -->DCF</em>&nbsp;</td><td>
<p>Distributed Coordination Function. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189"></a><!-- doxytag: member="PCF" ref="acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189" args="" -->PCF</em>&nbsp;</td><td>
<p>Point Coordination Function. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00141">141</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00141"></a>00141               {
<a name="l00142"></a>00142         <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792" title="Distributed Coordination Function.">DCF</a>,  
<a name="l00143"></a>00143         <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189" title="Point Coordination Function.">PCF</a>,  
<a name="l00144"></a>00144     };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7c7e301f779c29eb446b9a06f74020da"></a><!-- doxytag: member="Ieee80211Mac::State" ref="a7c7e301f779c29eb446b9a06f74020da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020da">Ieee80211Mac::State</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>the 80211 MAC state machine </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5"></a><!-- doxytag: member="IDLE" ref="a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5" args="" -->IDLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25"></a><!-- doxytag: member="DEFER" ref="a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25" args="" -->DEFER</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa5b19e098d83d766d41ee620e19aa2186"></a><!-- doxytag: member="WAITDIFS" ref="a7c7e301f779c29eb446b9a06f74020daa5b19e098d83d766d41ee620e19aa2186" args="" -->WAITDIFS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708"></a><!-- doxytag: member="BACKOFF" ref="a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708" args="" -->BACKOFF</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70"></a><!-- doxytag: member="WAITACK" ref="a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70" args="" -->WAITACK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa71f935807206413912f41a57be08c5bd"></a><!-- doxytag: member="WAITBROADCAST" ref="a7c7e301f779c29eb446b9a06f74020daa71f935807206413912f41a57be08c5bd" args="" -->WAITBROADCAST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588"></a><!-- doxytag: member="WAITCTS" ref="a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588" args="" -->WAITCTS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac"></a><!-- doxytag: member="WAITSIFS" ref="a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac" args="" -->WAITSIFS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b"></a><!-- doxytag: member="RECEIVE" ref="a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b" args="" -->RECEIVE</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00125">125</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00125"></a>00125                {
<a name="l00126"></a>00126         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00127"></a>00127         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
<a name="l00128"></a>00128         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5b19e098d83d766d41ee620e19aa2186">WAITDIFS</a>,
<a name="l00129"></a>00129         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>,
<a name="l00130"></a>00130         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
<a name="l00131"></a>00131         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa71f935807206413912f41a57be08c5bd">WAITBROADCAST</a>,
<a name="l00132"></a>00132         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>,
<a name="l00133"></a>00133         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
<a name="l00134"></a>00134         <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
<a name="l00135"></a>00135     };
</pre></div></p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a34230eadfc933351daa3921147113e67"></a><!-- doxytag: member="Ieee80211Mac::Ieee80211Mac" ref="a34230eadfc933351daa3921147113e67" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ieee80211Mac::Ieee80211Mac </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00049">49</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00050"></a>00050 {
<a name="l00051"></a>00051     <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a> = NULL;
<a name="l00052"></a>00052     <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a> = NULL;
<a name="l00053"></a>00053     <a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a> = NULL;
<a name="l00054"></a>00054     <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a> = NULL;
<a name="l00055"></a>00055     <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a> = NULL;
<a name="l00056"></a>00056     <a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">mediumStateChange</a> = NULL;
<a name="l00057"></a>00057     <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a> = NULL;
<a name="l00058"></a>00058 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5996f42ab538115f55c7f74121276f09"></a><!-- doxytag: member="Ieee80211Mac::~Ieee80211Mac" ref="a5996f42ab538115f55c7f74121276f09" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ieee80211Mac::~Ieee80211Mac </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00060">60</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00061"></a>00061 {
<a name="l00062"></a>00062     cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>);
<a name="l00063"></a>00063     cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a>);
<a name="l00064"></a>00064     cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a>);
<a name="l00065"></a>00065     cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a>);
<a name="l00066"></a>00066     cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a>);
<a name="l00067"></a>00067     cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">mediumStateChange</a>);
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a>)
<a name="l00070"></a>00070         <span class="keyword">delete</span> <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a>;
<a name="l00071"></a>00071 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7eab1962fd94c95151d62e3fb71253e0"></a><!-- doxytag: member="Ieee80211Mac::buildACKFrame" ref="a7eab1962fd94c95151d62e3fb71253e0" args="(Ieee80211DataOrMgmtFrame *frameToACK)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_a_c_k_frame.html">Ieee80211ACKFrame</a> * Ieee80211Mac::buildACKFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameToACK</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00845">845</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00781">sendACKFrame()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00846"></a>00846 {
<a name="l00847"></a>00847     <a class="code" href="class_ieee80211_a_c_k_frame.html">Ieee80211ACKFrame</a> *frame = <span class="keyword">new</span> <a class="code" href="class_ieee80211_a_c_k_frame.html">Ieee80211ACKFrame</a>(<span class="stringliteral">&quot;wlan-ack&quot;</span>);
<a name="l00848"></a>00848     frame-&gt;<a class="code" href="class_ieee80211_frame.html#a9988d4ef0a1e96b0778f2ff550c15560">setReceiverAddress</a>(frameToACK-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a88c59cc71e76df61f0418642f8381ee9">getTransmitterAddress</a>());
<a name="l00849"></a>00849 
<a name="l00850"></a>00850     <span class="keywordflow">if</span> (!frameToACK-&gt;<a class="code" href="class_ieee80211_frame.html#a8d7eb0502caef6252275e46e01b13aaa">getMoreFragments</a>())
<a name="l00851"></a>00851         frame-&gt;<a class="code" href="class_ieee80211_frame.html#a30561171ebc4e9fe077acaa58d6e2a4a">setDuration</a>(0);
<a name="l00852"></a>00852     <span class="keywordflow">else</span>
<a name="l00853"></a>00853         frame-&gt;<a class="code" href="class_ieee80211_frame.html#a30561171ebc4e9fe077acaa58d6e2a4a">setDuration</a>(frameToACK-&gt;<a class="code" href="class_ieee80211_frame.html#a5779472ccaefae6d1f80db8f2473c035">getDuration</a>() - <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() - <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>));
<a name="l00854"></a>00854 
<a name="l00855"></a>00855     <span class="keywordflow">return</span> frame;
<a name="l00856"></a>00856 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8213d9fea4bc9500dfe899ee70d2789e"></a><!-- doxytag: member="Ieee80211Mac::buildBroadcastFrame" ref="a8213d9fea4bc9500dfe899ee70d2789e" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> * Ieee80211Mac::buildBroadcastFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameToSend</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00879">879</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00801">sendBroadcastFrame()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00880"></a>00880 {
<a name="l00881"></a>00881     <a class="code" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame = (<a class="code" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *)frameToSend-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#ab643546cacf8f6b151b7f98f9d59d65b">dup</a>();
<a name="l00882"></a>00882     frame-&gt;<a class="code" href="class_ieee80211_frame.html#a30561171ebc4e9fe077acaa58d6e2a4a">setDuration</a>(0);
<a name="l00883"></a>00883     <span class="keywordflow">return</span> frame;
<a name="l00884"></a>00884 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaea047b56dcec7dc99d9681138c1f719"></a><!-- doxytag: member="Ieee80211Mac::buildCTSFrame" ref="aaea047b56dcec7dc99d9681138c1f719" args="(Ieee80211RTSFrame *rtsFrame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_c_t_s_frame.html">Ieee80211CTSFrame</a> * Ieee80211Mac::buildCTSFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>rtsFrame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00870">870</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00821">sendCTSFrame()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00871"></a>00871 {
<a name="l00872"></a>00872     <a class="code" href="class_ieee80211_c_t_s_frame.html">Ieee80211CTSFrame</a> *frame = <span class="keyword">new</span> <a class="code" href="class_ieee80211_c_t_s_frame.html">Ieee80211CTSFrame</a>(<span class="stringliteral">&quot;wlan-cts&quot;</span>);
<a name="l00873"></a>00873     frame-&gt;<a class="code" href="class_ieee80211_frame.html#a9988d4ef0a1e96b0778f2ff550c15560">setReceiverAddress</a>(rtsFrame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a88c59cc71e76df61f0418642f8381ee9">getTransmitterAddress</a>());
<a name="l00874"></a>00874     frame-&gt;<a class="code" href="class_ieee80211_frame.html#a30561171ebc4e9fe077acaa58d6e2a4a">setDuration</a>(rtsFrame-&gt;<a class="code" href="class_ieee80211_frame.html#a5779472ccaefae6d1f80db8f2473c035">getDuration</a>() - <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() - <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>));
<a name="l00875"></a>00875 
<a name="l00876"></a>00876     <span class="keywordflow">return</span> frame;
<a name="l00877"></a>00877 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5806d200b6dc0abcd87732edb240479e"></a><!-- doxytag: member="Ieee80211Mac::buildDataFrame" ref="a5806d200b6dc0abcd87732edb240479e" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> * Ieee80211Mac::buildDataFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameToSend</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00830">830</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00795">sendDataFrame()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00831"></a>00831 {
<a name="l00832"></a>00832     <a class="code" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame = (<a class="code" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *)frameToSend-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#ab643546cacf8f6b151b7f98f9d59d65b">dup</a>();
<a name="l00833"></a>00833 
<a name="l00834"></a>00834     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(frameToSend))
<a name="l00835"></a>00835         frame-&gt;<a class="code" href="class_ieee80211_frame.html#a30561171ebc4e9fe077acaa58d6e2a4a">setDuration</a>(0);
<a name="l00836"></a>00836     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!frameToSend-&gt;<a class="code" href="class_ieee80211_frame.html#a8d7eb0502caef6252275e46e01b13aaa">getMoreFragments</a>())
<a name="l00837"></a>00837         frame-&gt;<a class="code" href="class_ieee80211_frame.html#a30561171ebc4e9fe077acaa58d6e2a4a">setDuration</a>(<a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>));
<a name="l00838"></a>00838     <span class="keywordflow">else</span>
<a name="l00839"></a>00839         <span class="comment">// FIXME: shouldn&apos;t we use the next frame to be sent?</span>
<a name="l00840"></a>00840         frame-&gt;<a class="code" href="class_ieee80211_frame.html#a30561171ebc4e9fe077acaa58d6e2a4a">setDuration</a>(3 * <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + 2 * <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>) + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(frameToSend));
<a name="l00841"></a>00841 
<a name="l00842"></a>00842     <span class="keywordflow">return</span> frame;
<a name="l00843"></a>00843 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aec5d4575e8b8f4339815208c394f86cc"></a><!-- doxytag: member="Ieee80211Mac::buildRTSFrame" ref="aec5d4575e8b8f4339815208c394f86cc" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> * Ieee80211Mac::buildRTSFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameToSend</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00858">858</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00807">sendRTSFrame()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00859"></a>00859 {
<a name="l00860"></a>00860     <a class="code" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *frame = <span class="keyword">new</span> <a class="code" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a>(<span class="stringliteral">&quot;wlan-rts&quot;</span>);
<a name="l00861"></a>00861     frame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a9c5466afdb111a865c5efdaaf613ec8e">setTransmitterAddress</a>(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>);
<a name="l00862"></a>00862     frame-&gt;<a class="code" href="class_ieee80211_frame.html#a9988d4ef0a1e96b0778f2ff550c15560">setReceiverAddress</a>(frameToSend-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>());
<a name="l00863"></a>00863     frame-&gt;<a class="code" href="class_ieee80211_frame.html#a30561171ebc4e9fe077acaa58d6e2a4a">setDuration</a>(3 * <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>) +
<a name="l00864"></a>00864                        <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(frameToSend) +
<a name="l00865"></a>00865                        <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>));
<a name="l00866"></a>00866 
<a name="l00867"></a>00867     <span class="keywordflow">return</span> frame;
<a name="l00868"></a>00868 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a80a6ffa55936b6ee00a09c45cf82aaf0"></a><!-- doxytag: member="Ieee80211Mac::cancelBackoffPeriod" ref="a80a6ffa55936b6ee00a09c45cf82aaf0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::cancelBackoffPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00764">764</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00765"></a>00765 {
<a name="l00766"></a>00766     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;cancelling Backoff period\n&quot;</span>;
<a name="l00767"></a>00767     cancelEvent(<a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a>);
<a name="l00768"></a>00768 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1427f98783abfa545523111cd3f209bb"></a><!-- doxytag: member="Ieee80211Mac::cancelDIFSPeriod" ref="a1427f98783abfa545523111cd3f209bb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::cancelDIFSPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00672">672</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00673"></a>00673 {
<a name="l00674"></a>00674     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;cancelling DIFS period\n&quot;</span>;
<a name="l00675"></a>00675     cancelEvent(<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a>);
<a name="l00676"></a>00676 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9a3d534aa427c8ec65713ad1f3e0e223"></a><!-- doxytag: member="Ieee80211Mac::cancelTimeoutPeriod" ref="a9a3d534aa427c8ec65713ad1f3e0e223" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::cancelTimeoutPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00690">690</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00691"></a>00691 {
<a name="l00692"></a>00692     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;cancelling timeout period\n&quot;</span>;
<a name="l00693"></a>00693     cancelEvent(<a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a>);
<a name="l00694"></a>00694 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab34517c360aa546041515d97c354dd43"></a><!-- doxytag: member="Ieee80211Mac::computeBackoffPeriod" ref="ab34517c360aa546041515d97c354dd43" args="(Ieee80211Frame *msg, int r)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t Ieee80211Mac::computeBackoffPeriod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>r</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00623">623</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00742">generateBackoffPeriod()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00624"></a>00624 {
<a name="l00625"></a>00625     <span class="keywordtype">int</span> cw;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;generating backoff slot number for retry: &quot;</span> &lt;&lt; r &lt;&lt; endl;
<a name="l00628"></a>00628 
<a name="l00629"></a>00629     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(msg))
<a name="l00630"></a>00630         cw = <a class="code" href="class_ieee80211_mac.html#a189e3641d647b4d4c506e709a0873467">cwMinBroadcast</a>;
<a name="l00631"></a>00631     <span class="keywordflow">else</span>
<a name="l00632"></a>00632     {
<a name="l00633"></a>00633         ASSERT(0 &lt;= r &amp;&amp; r &lt; <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a>);
<a name="l00634"></a>00634 
<a name="l00635"></a>00635         cw = (<a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">cwMinData</a> + 1) * (1 &lt;&lt; r) - 1;
<a name="l00636"></a>00636 
<a name="l00637"></a>00637         <span class="keywordflow">if</span> (cw &gt; <a class="code" href="_ieee80211_consts_8h.html#a785c5f49538e2a36c5d3b31253740014">CW_MAX</a>)
<a name="l00638"></a>00638             cw = <a class="code" href="_ieee80211_consts_8h.html#a785c5f49538e2a36c5d3b31253740014">CW_MAX</a>;
<a name="l00639"></a>00639     }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <span class="keywordtype">int</span> c = intrand(cw + 1);
<a name="l00642"></a>00642 
<a name="l00643"></a>00643     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;generated backoff slot number: &quot;</span> &lt;&lt; c &lt;&lt; <span class="stringliteral">&quot; , cw: &quot;</span> &lt;&lt; cw &lt;&lt; endl;
<a name="l00644"></a>00644 
<a name="l00645"></a>00645     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)c) * <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>();
<a name="l00646"></a>00646 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a38e18309549f34d7b355c1b1f4aab298"></a><!-- doxytag: member="Ieee80211Mac::computeFrameDuration" ref="a38e18309549f34d7b355c1b1f4aab298" args="(int bits, double bitrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Ieee80211Mac::computeFrameDuration </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>bitrate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l01007">1007</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01008"></a>01008 {
<a name="l01009"></a>01009     <span class="keywordflow">return</span> bits / <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">bitrate</a> + <a class="code" href="_ieee80211_consts_8h.html#a0ecba1599d2ee7a3f33cf1970abdb90a">PHY_HEADER_LENGTH</a> / <a class="code" href="_ieee80211_consts_8h.html#a0454abde1a622bc79c2528d728e466ef">BITRATE_HEADER</a>;
<a name="l01010"></a>01010 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a938984c4144284ab225e087b6789ce71"></a><!-- doxytag: member="Ieee80211Mac::computeFrameDuration" ref="a938984c4144284ab225e087b6789ce71" args="(Ieee80211Frame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Ieee80211Mac::computeFrameDuration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Computes the duration (in seconds) of the transmission of a frame over the physical channel. 'bits' should be the total length of the MAC frame in bits, but excluding the physical layer framing (preamble etc.). </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l01002">1002</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00845">buildACKFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00870">buildCTSFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00830">buildDataFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00858">buildRTSFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00684">scheduleBroadcastTimeoutPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00696">scheduleCTSTimeoutPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00678">scheduleDataTimeoutPeriod()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01003"></a>01003 {
<a name="l01004"></a>01004     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(msg-&gt;getBitLength(), <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">bitrate</a>);
<a name="l01005"></a>01005 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="accd0c207251e64841e545a538a0d5e13"></a><!-- doxytag: member="Ieee80211Mac::decreaseBackoffPeriod" ref="accd0c207251e64841e545a538a0d5e13" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::decreaseBackoffPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00749">749</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00750"></a>00750 {
<a name="l00751"></a>00751     <span class="comment">// see spec 9.2.5.2</span>
<a name="l00752"></a>00752     simtime_t elapsedBackoffTime = simTime() - <a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a>-&gt;getSendingTime();
<a name="l00753"></a>00753     <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> -= ((int)(elapsedBackoffTime / <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>())) * <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>();
<a name="l00754"></a>00754     ASSERT(<a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> &gt;= 0);
<a name="l00755"></a>00755     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;backoff period decreased to &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> &lt;&lt; endl;
<a name="l00756"></a>00756 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae7e7f22c4c76ac7be8ffff853cbf7503"></a><!-- doxytag: member="Ieee80211Mac::finishCurrentTransmission" ref="ae7e7f22c4c76ac7be8ffff853cbf7503" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::finishCurrentTransmission </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00898">898</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00899"></a>00899 {
<a name="l00900"></a>00900     <a class="code" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da" title="Deletes frame at the front of queue.">popTransmissionQueue</a>();
<a name="l00901"></a>00901     <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
<a name="l00902"></a>00902 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adb7349369b15dc3f966da2b8a7b8d0d0"></a><!-- doxytag: member="Ieee80211Mac::generateBackoffPeriod" ref="adb7349369b15dc3f966da2b8a7b8d0d0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::generateBackoffPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00742">742</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00911">retryCurrentTransmission()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00743"></a>00743 {
<a name="l00744"></a>00744     <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> = <a class="code" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>(), <a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a>);
<a name="l00745"></a>00745     ASSERT(<a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> &gt;= 0);
<a name="l00746"></a>00746     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;backoff period set to &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> &lt;&lt; endl;
<a name="l00747"></a>00747 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a85bc4ee88b4123a9b38d42cbf6af8e43"></a><!-- doxytag: member="Ieee80211Mac::getCurrentTransmission" ref="a85bc4ee88b4123a9b38d42cbf6af8e43" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> * Ieee80211Mac::getCurrentTransmission </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the current frame being transmitted. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00921">921</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00742">generateBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00943">resetStateVariables()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00911">retryCurrentTransmission()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00922"></a>00922 {
<a name="l00923"></a>00923     <span class="keywordflow">return</span> (<a class="code" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *)<a class="code" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">transmissionQueue</a>.front();
<a name="l00924"></a>00924 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0f34064c34a1e6bc53832280a95e8fbc"></a><!-- doxytag: member="Ieee80211Mac::getDIFS" ref="a0f34064c34a1e6bc53832280a95e8fbc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t Ieee80211Mac::getDIFS </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00612">612</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00617">getEIFS()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00658">scheduleDIFSPeriod()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00613"></a>00613 {
<a name="l00614"></a>00614     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + 2 * <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>();
<a name="l00615"></a>00615 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a87bec8aaae96a4fe5d70816d48477183"></a><!-- doxytag: member="Ieee80211Mac::getEIFS" ref="a87bec8aaae96a4fe5d70816d48477183" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t Ieee80211Mac::getEIFS </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00617">617</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00658">scheduleDIFSPeriod()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00618"></a>00618 {
<a name="l00619"></a>00619 <span class="comment">// FIXME:   return getSIFS() + getDIFS() + (8 * ACKSize + aPreambleLength + aPLCPHeaderLength) / lowestDatarate;</span>
<a name="l00620"></a>00620     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a0f34064c34a1e6bc53832280a95e8fbc">getDIFS</a>() + (8 * <a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a> + <a class="code" href="_ieee80211_consts_8h.html#a0ecba1599d2ee7a3f33cf1970abdb90a">PHY_HEADER_LENGTH</a>) / 1E+6;
<a name="l00621"></a>00621 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3ae0423bce927f7db18f55a88e44e20a"></a><!-- doxytag: member="Ieee80211Mac::getFrameReceivedBeforeSIFS" ref="a3ae0423bce927f7db18f55a88e44e20a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> * Ieee80211Mac::getFrameReceivedBeforeSIFS </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the last frame received before the SIFS period. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00982">982</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00983"></a>00983 {
<a name="l00984"></a>00984     <span class="keywordflow">return</span> (<a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *)<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>-&gt;getContextPointer();
<a name="l00985"></a>00985 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8aee694a3627cb27994c0b29bc4c0d1f"></a><!-- doxytag: member="Ieee80211Mac::getPIFS" ref="a8aee694a3627cb27994c0b29bc4c0d1f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t Ieee80211Mac::getPIFS </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00607">607</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00608"></a>00608 {
<a name="l00609"></a>00609     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>();
<a name="l00610"></a>00610 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a502179f9e3503763304b8f3fd4ba32fa"></a><!-- doxytag: member="Ieee80211Mac::getSIFS" ref="a502179f9e3503763304b8f3fd4ba32fa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t Ieee80211Mac::getSIFS </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00595">595</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00845">buildACKFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00870">buildCTSFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00830">buildDataFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00858">buildRTSFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00612">getDIFS()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00617">getEIFS()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00607">getPIFS()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00696">scheduleCTSTimeoutPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00678">scheduleDataTimeoutPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00651">scheduleSIFSPeriod()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00596"></a>00596 {
<a name="l00597"></a>00597 <span class="comment">// TODO:   return aRxRFDelay() + aRxPLCPDelay() + aMACProcessingDelay() + aRxTxTurnaroundTime();</span>
<a name="l00598"></a>00598     <span class="keywordflow">return</span> <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a>;
<a name="l00599"></a>00599 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ace75d97f719d23cab2bf582ab26d083e"></a><!-- doxytag: member="Ieee80211Mac::getSlotTime" ref="ace75d97f719d23cab2bf582ab26d083e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t Ieee80211Mac::getSlotTime </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00601">601</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00623">computeBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00749">decreaseBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00612">getDIFS()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00607">getPIFS()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00602"></a>00602 {
<a name="l00603"></a>00603 <span class="comment">// TODO:   return aCCATime() + aRxTxTurnaroundTime + aAirPropagationTime() + aMACProcessingDelay();</span>
<a name="l00604"></a>00604     <span class="keywordflow">return</span> <a class="code" href="_ieee80211_consts_8h.html#ac168f3508b776571f17ccfaba704dd2c">ST</a>;
<a name="l00605"></a>00605 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a793227beb883e6f0f0b5c993aa6b7f56"></a><!-- doxytag: member="Ieee80211Mac::giveUpCurrentTransmission" ref="a793227beb883e6f0f0b5c993aa6b7f56" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::giveUpCurrentTransmission </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00904">904</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00905"></a>00905 {
<a name="l00906"></a>00906     <a class="code" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da" title="Deletes frame at the front of queue.">popTransmissionQueue</a>();
<a name="l00907"></a>00907     <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
<a name="l00908"></a>00908     <a class="code" href="class_ieee80211_mac.html#aea9e86c3d8f9db03a6a9dcab0bd36df7">numGivenUp</a>++;
<a name="l00909"></a>00909 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aedaaf3e337f2d4a0790dbe392ac9f481"></a><!-- doxytag: member="Ieee80211Mac::handleCommand" ref="aedaaf3e337f2d4a0790dbe392ac9f481" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::handleCommand </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle commands (msg kind+control info) coming from upper layers. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#a2a5fd20a6064b4754954638bc93f8d8d">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00266">266</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00267"></a>00267 {
<a name="l00268"></a>00268     <span class="keywordflow">if</span> (msg-&gt;getKind()==<a class="code" href="_phy_control_info__m_8h.html#a827a8f9f0f91bb52136f8f155337862fa5eb8d08b5c380e0589a4622fa0ca5ee9">PHY_C_CONFIGURERADIO</a>)
<a name="l00269"></a>00269     {
<a name="l00270"></a>00270         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Passing on command &quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; to physical layer\n&quot;</span>;
<a name="l00271"></a>00271         <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a> != NULL)
<a name="l00272"></a>00272         {
<a name="l00273"></a>00273             <span class="comment">// merge contents of the old command into the new one, then delete it</span>
<a name="l00274"></a>00274             <a class="code" href="class_phy_control_info.html">PhyControlInfo</a> *pOld = check_and_cast&lt;<a class="code" href="class_phy_control_info.html">PhyControlInfo</a> *&gt;(<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a>-&gt;getControlInfo());
<a name="l00275"></a>00275             <a class="code" href="class_phy_control_info.html">PhyControlInfo</a> *pNew = check_and_cast&lt;<a class="code" href="class_phy_control_info.html">PhyControlInfo</a> *&gt;(msg-&gt;getControlInfo());
<a name="l00276"></a>00276             <span class="keywordflow">if</span> (pNew-&gt;getChannelNumber()==-1 &amp;&amp; pOld-&gt;<a class="code" href="class_phy_control_info.html#adf34f991f466b2ed39bcc3d484612167">getChannelNumber</a>()!=-1)
<a name="l00277"></a>00277                 pNew-&gt;setChannelNumber(pOld-&gt;<a class="code" href="class_phy_control_info.html#adf34f991f466b2ed39bcc3d484612167">getChannelNumber</a>());
<a name="l00278"></a>00278             <span class="keywordflow">if</span> (pNew-&gt;getBitrate()==-1 &amp;&amp; pOld-&gt;<a class="code" href="class_phy_control_info.html#a75467afe8d5de4d4aa72e8f773117736">getBitrate</a>()!=-1)
<a name="l00279"></a>00279                 pNew-&gt;setBitrate(pOld-&gt;<a class="code" href="class_phy_control_info.html#a75467afe8d5de4d4aa72e8f773117736">getBitrate</a>());
<a name="l00280"></a>00280             <span class="keyword">delete</span> <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a>;
<a name="l00281"></a>00281             <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a> = NULL;
<a name="l00282"></a>00282         }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284         <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a> || <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a> || <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>)
<a name="l00285"></a>00285         {
<a name="l00286"></a>00286             <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Sending it down immediately\n&quot;</span>;
<a name="l00287"></a>00287             <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(msg);
<a name="l00288"></a>00288         }
<a name="l00289"></a>00289         <span class="keywordflow">else</span>
<a name="l00290"></a>00290         {
<a name="l00291"></a>00291             <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Delaying &quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; until next IDLE or DEFER state\n&quot;</span>;
<a name="l00292"></a>00292             <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a> = msg;
<a name="l00293"></a>00293         }
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295     <span class="keywordflow">else</span>
<a name="l00296"></a>00296     {
<a name="l00297"></a>00297         error(<span class="stringliteral">&quot;Unrecognized command from mgmt layer: (%s)%s msgkind=%d&quot;</span>, msg-&gt;getClassName(), msg-&gt;getName(), msg-&gt;getKind());
<a name="l00298"></a>00298     }
<a name="l00299"></a>00299 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af163e249ed0577fb5027e3e9cf54d6a5"></a><!-- doxytag: member="Ieee80211Mac::handleLowerMsg" ref="af163e249ed0577fb5027e3e9cf54d6a5" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::handleLowerMsg </td>
          <td>(</td>
          <td class="paramtype">cPacket *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle messages from lower (physical) layer. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#ab1db1fa4fd9ecec9d8fa1a38a9a365e1">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00301">301</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00302"></a>00302 {
<a name="l00303"></a>00303     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;received message from lower layer: &quot;</span> &lt;&lt; msg &lt;&lt; endl;
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *<span class="keyword">&gt;</span>(msg);
<a name="l00306"></a>00306     <span class="keywordflow">if</span> (!frame)
<a name="l00307"></a>00307         error(<span class="stringliteral">&quot;message from physical layer (%s)%s is not a subclass of Ieee80211Frame&quot;</span>,
<a name="l00308"></a>00308               msg-&gt;getClassName(), msg-&gt;getName());
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Self address: &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>
<a name="l00311"></a>00311        &lt;&lt; <span class="stringliteral">&quot;, receiver address: &quot;</span> &lt;&lt; frame-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>()
<a name="l00312"></a>00312        &lt;&lt; <span class="stringliteral">&quot;, received frame is for us: &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &lt;&lt; endl;
<a name="l00313"></a>00313 
<a name="l00314"></a>00314     <a class="code" href="class_ieee80211_two_address_frame.html">Ieee80211TwoAddressFrame</a> *twoAddressFrame = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_two_address_frame.html">Ieee80211TwoAddressFrame</a> *<span class="keyword">&gt;</span>(msg);
<a name="l00315"></a>00315     ASSERT(!twoAddressFrame || twoAddressFrame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a88c59cc71e76df61f0418642f8381ee9">getTransmitterAddress</a>() != <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>);
<a name="l00316"></a>00316 
<a name="l00317"></a>00317     <a class="code" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2" title="Handle all kinds of messages and notifications with the state machine.">handleWithFSM</a>(msg);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319     <span class="comment">// if we are the owner then we did not send this message up</span>
<a name="l00320"></a>00320     <span class="keywordflow">if</span> (msg-&gt;getOwner() == <span class="keyword">this</span>)
<a name="l00321"></a>00321         <span class="keyword">delete</span> msg;
<a name="l00322"></a>00322 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9c4e21cc98783e53810b622e0c6deda2"></a><!-- doxytag: member="Ieee80211Mac::handleSelfMsg" ref="a9c4e21cc98783e53810b622e0c6deda2" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::handleSelfMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle timer self messages. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#a1c7f3c2581f66d7de17af4a730ae0c4d">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00227">227</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00228"></a>00228 {
<a name="l00229"></a>00229     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;received self message: &quot;</span> &lt;&lt; msg &lt;&lt; endl;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231     <span class="keywordflow">if</span> (msg == <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a>)
<a name="l00232"></a>00232         <a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">nav</a> = <span class="keyword">false</span>;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <a class="code" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2" title="Handle all kinds of messages and notifications with the state machine.">handleWithFSM</a>(msg);
<a name="l00235"></a>00235 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3c78df80f39331fe0c35a19b2a991714"></a><!-- doxytag: member="Ieee80211Mac::handleUpperMsg" ref="a3c78df80f39331fe0c35a19b2a991714" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::handleUpperMsg </td>
          <td>(</td>
          <td class="paramtype">cPacket *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle messages from upper layer. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#ab44661d865472b3799cbe4b086e131b9">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00237">237</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00238"></a>00238 {
<a name="l00239"></a>00239     <span class="comment">// check for queue overflow</span>
<a name="l00240"></a>00240     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a">maxQueueSize</a> &amp;&amp; (<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">transmissionQueue</a>.size() == <a class="code" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a">maxQueueSize</a>)
<a name="l00241"></a>00241     {
<a name="l00242"></a>00242         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;message &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; received from higher layer but MAC queue is full, dropping message\n&quot;</span>;
<a name="l00243"></a>00243         <span class="keyword">delete</span> msg;
<a name="l00244"></a>00244         <span class="keywordflow">return</span>;
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     <span class="comment">// must be a Ieee80211DataOrMgmtFrame, within the max size because we don&apos;t support fragmentation</span>
<a name="l00248"></a>00248     <a class="code" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame = check_and_cast&lt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&gt;(msg);
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (frame-&gt;getByteLength() &gt; <a class="code" href="class_ieee80211_mac.html#af6a8a67f828409cf76bf3c3f0fd6d35b">fragmentationThreshold</a>)
<a name="l00250"></a>00250         error(<span class="stringliteral">&quot;message from higher layer (%s)%s is too long for 802.11b, %d bytes (fragmentation is not supported yet)&quot;</span>,
<a name="l00251"></a>00251               msg-&gt;getClassName(), msg-&gt;getName(), (int)(msg-&gt;getByteLength()));
<a name="l00252"></a>00252     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;frame &quot;</span> &lt;&lt; frame &lt;&lt; <span class="stringliteral">&quot; received from higher layer, receiver = &quot;</span> &lt;&lt; frame-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>() &lt;&lt; endl;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     ASSERT(!frame-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>().<a class="code" href="class_m_a_c_address.html#ae41af013d782b46483e7d0c84f0ed107">isUnspecified</a>());
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="comment">// fill in missing fields (receiver address, seq number), and insert into the queue</span>
<a name="l00257"></a>00257     frame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a9c5466afdb111a865c5efdaaf613ec8e">setTransmitterAddress</a>(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>);
<a name="l00258"></a>00258     frame-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#a0e4dcde90f647f68fa45d2eae458b6dc">setSequenceNumber</a>(<a class="code" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762">sequenceNumber</a>);
<a name="l00259"></a>00259     <a class="code" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762">sequenceNumber</a> = (<a class="code" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762">sequenceNumber</a>+1) % 4096;  <span class="comment">//XXX seqNum must be checked upon reception of frames!</span>
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <a class="code" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">transmissionQueue</a>.push_back(frame);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <a class="code" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2" title="Handle all kinds of messages and notifications with the state machine.">handleWithFSM</a>(frame);
<a name="l00264"></a>00264 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa95e52e25b2792fb62dd4d758cac72a2"></a><!-- doxytag: member="Ieee80211Mac::handleWithFSM" ref="aa95e52e25b2792fb62dd4d758cac72a2" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::handleWithFSM </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle all kinds of messages and notifications with the state machine. </p>
<p>Msg can be upper, lower, self or NULL (when radio state changes) </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">346</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00301">handleLowerMsg()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00227">handleSelfMsg()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00237">handleUpperMsg()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00324">receiveChangeNotification()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00347"></a>00347 {
<a name="l00348"></a>00348     <span class="comment">// skip those cases where there&apos;s nothing to do, so the switch looks simpler</span>
<a name="l00349"></a>00349     <span class="keywordflow">if</span> (<a class="code" href="class_wireless_mac_base.html#a86b406729713114bdceb21e07bcefd12">isUpperMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() != <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>)
<a name="l00350"></a>00350     {
<a name="l00351"></a>00351         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;deferring upper message transmission in &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getStateName() &lt;&lt; <span class="stringliteral">&quot; state\n&quot;</span>;
<a name="l00352"></a>00352         <span class="keywordflow">return</span>;
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355     <a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a>*<span class="keyword">&gt;</span>(msg);
<a name="l00356"></a>00356     <span class="keywordtype">int</span> frameType = frame ? frame-&gt;<a class="code" href="class_ieee80211_frame.html#a2e7c19c38074e54f5d99cb09992b2f89">getType</a>() : -1;
<a name="l00357"></a>00357     <span class="keywordtype">int</span> msgKind = msg-&gt;getKind();
<a name="l00358"></a>00358     <a class="code" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d" title="Logs all state information.">logState</a>();
<a name="l00359"></a>00359     <a class="code" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a>.record(<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState());
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     <span class="keywordflow">if</span> (frame &amp;&amp; <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(frame))
<a name="l00362"></a>00362     {
<a name="l00363"></a>00363         <a class="code" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20">lastReceiveFailed</a> =(msgKind == <a class="code" href="_ieee80211_consts_8h.html#aafd826a123a41fd03a9c88842387a821">COLLISION</a> || msgKind == <a class="code" href="_ieee80211_consts_8h.html#adc91194d5fc156e1d3b796361b38a54d">BITERROR</a>);
<a name="l00364"></a>00364         <a class="code" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414" title="Schedule network allocation period according to 9.2.5.4.">scheduleReservePeriod</a>(frame);
<a name="l00365"></a>00365     }
<a name="l00366"></a>00366 
<a name="l00367"></a>00367     <span class="comment">// TODO: fix bug according to the message: [omnetpp] A possible bug in the Ieee80211&apos;s FSM.</span>
<a name="l00368"></a>00368     <a class="code" href="_f_s_m_a_8h.html#a585618c58d438c04d23005cf88a537b7">FSMA_Switch</a>(<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>)
<a name="l00369"></a>00369     {
<a name="l00370"></a>00370         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>)
<a name="l00371"></a>00371         {
<a name="l00372"></a>00372             <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#af24a75754986f091cf9b5e6987bb7bf3" title="Send down the change channel message to the physical layer if there is any.">sendDownPendingRadioConfigMsg</a>());
<a name="l00373"></a>00373             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Data-Ready,
<a name="l00374"></a>00374                                   <a class="code" href="class_wireless_mac_base.html#a86b406729713114bdceb21e07bcefd12">isUpperMsg</a>(msg),
<a name="l00375"></a>00375                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
<a name="l00376"></a>00376                 ASSERT(<a class="code" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a>() || <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> == 0);
<a name="l00377"></a>00377                 <a class="code" href="class_ieee80211_mac.html#a45baf5991b010588132ecfea105a17b0" title="Generates a new backoff period based on the contention window.">invalidateBackoffPeriod</a>();
<a name="l00378"></a>00378             );
<a name="l00379"></a>00379             <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Data-Ready,
<a name="l00380"></a>00380                                      !<a class="code" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">transmissionQueue</a>.empty(),
<a name="l00381"></a>00381                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
<a name="l00382"></a>00382                 <a class="code" href="class_ieee80211_mac.html#a45baf5991b010588132ecfea105a17b0" title="Generates a new backoff period based on the contention window.">invalidateBackoffPeriod</a>();
<a name="l00383"></a>00383             );
<a name="l00384"></a>00384             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive,
<a name="l00385"></a>00385                                   <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
<a name="l00386"></a>00386                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
<a name="l00387"></a>00387             );
<a name="l00388"></a>00388         }
<a name="l00389"></a>00389         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>)
<a name="l00390"></a>00390         {
<a name="l00391"></a>00391             <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#af24a75754986f091cf9b5e6987bb7bf3" title="Send down the change channel message to the physical layer if there is any.">sendDownPendingRadioConfigMsg</a>());
<a name="l00392"></a>00392             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Wait-<a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a>,
<a name="l00393"></a>00393                                   <a class="code" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e" title="Used by the state machine to identify medium state change events. This message is...">isMediumStateChange</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm...">isMediumFree</a>(),
<a name="l00394"></a>00394                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5b19e098d83d766d41ee620e19aa2186">WAITDIFS</a>,
<a name="l00395"></a>00395             ;);
<a name="l00396"></a>00396             <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Wait-<a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a>,
<a name="l00397"></a>00397                                      <a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm...">isMediumFree</a>() || !<a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a>,
<a name="l00398"></a>00398                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5b19e098d83d766d41ee620e19aa2186">WAITDIFS</a>,
<a name="l00399"></a>00399             ;);
<a name="l00400"></a>00400             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive,
<a name="l00401"></a>00401                                   <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
<a name="l00402"></a>00402                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
<a name="l00403"></a>00403             ;);
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5b19e098d83d766d41ee620e19aa2186">WAITDIFS</a>)
<a name="l00406"></a>00406         {
<a name="l00407"></a>00407             <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">scheduleDIFSPeriod</a>());
<a name="l00408"></a>00408             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Immediate-Transmit-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>,
<a name="l00409"></a>00409                                   msg == <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>())
<a name="l00410"></a>00410                                   &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;getByteLength() &gt;= <a class="code" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613">rtsThreshold</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a>,
<a name="l00411"></a>00411                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>,
<a name="l00412"></a>00412                 <a class="code" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
<a name="l00413"></a>00413                 <a class="code" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod</a>();
<a name="l00414"></a>00414             );
<a name="l00415"></a>00415             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Immediate-Transmit-Broadcast,
<a name="l00416"></a>00416                                   msg == <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a>,
<a name="l00417"></a>00417                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa71f935807206413912f41a57be08c5bd">WAITBROADCAST</a>,
<a name="l00418"></a>00418                 <a class="code" href="class_ieee80211_mac.html#a39720691a045c98037ec4025b9ab5207">sendBroadcastFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
<a name="l00419"></a>00419                 <a class="code" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod</a>();
<a name="l00420"></a>00420             );
<a name="l00421"></a>00421             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Immediate-Transmit-Data,
<a name="l00422"></a>00422                                   msg == <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a>,
<a name="l00423"></a>00423                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
<a name="l00424"></a>00424                 <a class="code" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
<a name="l00425"></a>00425                 <a class="code" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod</a>();
<a name="l00426"></a>00426             );
<a name="l00427"></a>00427             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(<a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a>-Over,
<a name="l00428"></a>00428                                   msg == <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a>,
<a name="l00429"></a>00429                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>,
<a name="l00430"></a>00430                 ASSERT(<a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a>);
<a name="l00431"></a>00431                 <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a>())
<a name="l00432"></a>00432                     <a class="code" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a>();
<a name="l00433"></a>00433             );
<a name="l00434"></a>00434             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Busy,
<a name="l00435"></a>00435                                   <a class="code" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e" title="Used by the state machine to identify medium state change events. This message is...">isMediumStateChange</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm...">isMediumFree</a>(),
<a name="l00436"></a>00436                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
<a name="l00437"></a>00437                 <a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a> = <span class="keyword">true</span>;
<a name="l00438"></a>00438                 <a class="code" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod</a>();
<a name="l00439"></a>00439             );
<a name="l00440"></a>00440             <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Busy,
<a name="l00441"></a>00441                                      !<a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm...">isMediumFree</a>(),
<a name="l00442"></a>00442                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
<a name="l00443"></a>00443                 <a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a> = <span class="keyword">true</span>;
<a name="l00444"></a>00444                 <a class="code" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod</a>();
<a name="l00445"></a>00445             );
<a name="l00446"></a>00446             <span class="comment">// radio state changes before we actually get the message, so this must be here</span>
<a name="l00447"></a>00447             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive,
<a name="l00448"></a>00448                                   <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
<a name="l00449"></a>00449                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
<a name="l00450"></a>00450                 <a class="code" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod</a>();
<a name="l00451"></a>00451             ;);
<a name="l00452"></a>00452         }
<a name="l00453"></a>00453         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>)
<a name="l00454"></a>00454         {
<a name="l00455"></a>00455             <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#a4ea47166959fb7622be67011d131d8f5">scheduleBackoffPeriod</a>());
<a name="l00456"></a>00456             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>,
<a name="l00457"></a>00457                                   msg == <a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>())
<a name="l00458"></a>00458                                   &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;getByteLength() &gt;= <a class="code" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613">rtsThreshold</a>,
<a name="l00459"></a>00459                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>,
<a name="l00460"></a>00460                 <a class="code" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
<a name="l00461"></a>00461             );
<a name="l00462"></a>00462             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Broadcast,
<a name="l00463"></a>00463                                   msg == <a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()),
<a name="l00464"></a>00464                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa71f935807206413912f41a57be08c5bd">WAITBROADCAST</a>,
<a name="l00465"></a>00465                 <a class="code" href="class_ieee80211_mac.html#a39720691a045c98037ec4025b9ab5207">sendBroadcastFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
<a name="l00466"></a>00466             );
<a name="l00467"></a>00467             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Data,
<a name="l00468"></a>00468                                   msg == <a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()),
<a name="l00469"></a>00469                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
<a name="l00470"></a>00470                 <a class="code" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
<a name="l00471"></a>00471             );
<a name="l00472"></a>00472             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Backoff-Busy,
<a name="l00473"></a>00473                                   <a class="code" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e" title="Used by the state machine to identify medium state change events. This message is...">isMediumStateChange</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm...">isMediumFree</a>(),
<a name="l00474"></a>00474                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
<a name="l00475"></a>00475                 <a class="code" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a>();
<a name="l00476"></a>00476                 <a class="code" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a>();
<a name="l00477"></a>00477             );
<a name="l00478"></a>00478         }
<a name="l00479"></a>00479         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>)
<a name="l00480"></a>00480         {
<a name="l00481"></a>00481             <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()));
<a name="l00482"></a>00482             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea41246e9c8691b7e33bc79b345e06b48e">ACK</a>,
<a name="l00483"></a>00483                                   <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; frameType == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aa5b43b6f6f246f109c30a32078fadad5b">ST_ACK</a>,
<a name="l00484"></a>00484                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00485"></a>00485                 <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a> == 0) <a class="code" href="class_ieee80211_mac.html#a6c4930c1fd531fe421935816d8856443">numSentWithoutRetry</a>++;
<a name="l00486"></a>00486                 <a class="code" href="class_ieee80211_mac.html#a5451e3e610dca607187e39f176d91120">numSent</a>++;
<a name="l00487"></a>00487                 <a class="code" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">cancelTimeoutPeriod</a>();
<a name="l00488"></a>00488                 <a class="code" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission</a>();
<a name="l00489"></a>00489             );
<a name="l00490"></a>00490             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Data-Failed,
<a name="l00491"></a>00491                                   msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a> == <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a> - 1,
<a name="l00492"></a>00492                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00493"></a>00493                 <a class="code" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission</a>();
<a name="l00494"></a>00494             );
<a name="l00495"></a>00495             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea41246e9c8691b7e33bc79b345e06b48e">ACK</a>-Timeout,
<a name="l00496"></a>00496                                   msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a>,
<a name="l00497"></a>00497                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
<a name="l00498"></a>00498                 <a class="code" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission</a>();
<a name="l00499"></a>00499             );
<a name="l00500"></a>00500         }
<a name="l00501"></a>00501         <span class="comment">// wait until broadcast is sent</span>
<a name="l00502"></a>00502         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa71f935807206413912f41a57be08c5bd">WAITBROADCAST</a>)
<a name="l00503"></a>00503         {
<a name="l00504"></a>00504             <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#ae49ff307323745c607aa72ddbd8eefcd">scheduleBroadcastTimeoutPeriod</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()));
<a name="l00505"></a>00505             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Broadcast,
<a name="l00506"></a>00506                                   msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a>,
<a name="l00507"></a>00507                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00508"></a>00508                 <a class="code" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission</a>();
<a name="l00509"></a>00509                 <a class="code" href="class_ieee80211_mac.html#aa6376b24ff26d3f78706f5b8656c3167">numSentBroadcast</a>++;
<a name="l00510"></a>00510             );
<a name="l00511"></a>00511         }
<a name="l00512"></a>00512         <span class="comment">// accoriding to 9.2.5.7 CTS procedure</span>
<a name="l00513"></a>00513         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>)
<a name="l00514"></a>00514         {
<a name="l00515"></a>00515             <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">scheduleCTSTimeoutPeriod</a>());
<a name="l00516"></a>00516             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>,
<a name="l00517"></a>00517                                   <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; frameType == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aae212c16f05fadee6dd4a28d5fa50deda">ST_CTS</a>,
<a name="l00518"></a>00518                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
<a name="l00519"></a>00519                 <a class="code" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">cancelTimeoutPeriod</a>();
<a name="l00520"></a>00520             );
<a name="l00521"></a>00521             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>-Failed,
<a name="l00522"></a>00522                                   msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a> == <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a> - 1,
<a name="l00523"></a>00523                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00524"></a>00524                 <a class="code" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission</a>();
<a name="l00525"></a>00525             );
<a name="l00526"></a>00526             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>-Timeout,
<a name="l00527"></a>00527                                   msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a>,
<a name="l00528"></a>00528                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
<a name="l00529"></a>00529                 <a class="code" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission</a>();
<a name="l00530"></a>00530             );
<a name="l00531"></a>00531         }
<a name="l00532"></a>00532         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>)
<a name="l00533"></a>00533         {
<a name="l00534"></a>00534             <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#a325e59dc74a3ad59596933aaf96012a7">scheduleSIFSPeriod</a>(frame));
<a name="l00535"></a>00535             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>,
<a name="l00536"></a>00536                                   msg == <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a" title="Returns the last frame received before the SIFS period.">getFrameReceivedBeforeSIFS</a>()-&gt;getType() == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aadc75816b0f8ed30512ca871fb63aa9c3">ST_RTS</a>,
<a name="l00537"></a>00537                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00538"></a>00538                 <a class="code" href="class_ieee80211_mac.html#a821d34cb04fd6ebd9b0d6989b963614d">sendCTSFrameOnEndSIFS</a>();
<a name="l00539"></a>00539                 <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
<a name="l00540"></a>00540             );
<a name="l00541"></a>00541             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>,
<a name="l00542"></a>00542                                   msg == <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a" title="Returns the last frame received before the SIFS period.">getFrameReceivedBeforeSIFS</a>()-&gt;getType() == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aae212c16f05fadee6dd4a28d5fa50deda">ST_CTS</a>,
<a name="l00543"></a>00543                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
<a name="l00544"></a>00544                 <a class="code" href="class_ieee80211_mac.html#a535d6bc217f1cfc210fe798c3b89a114">sendDataFrameOnEndSIFS</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
<a name="l00545"></a>00545             );
<a name="l00546"></a>00546             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea41246e9c8691b7e33bc79b345e06b48e">ACK</a>,
<a name="l00547"></a>00547                                   msg == <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0" title="Checks if the frame is a data or management frame.">isDataOrMgmtFrame</a>(<a class="code" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a" title="Returns the last frame received before the SIFS period.">getFrameReceivedBeforeSIFS</a>()),
<a name="l00548"></a>00548                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00549"></a>00549                 <a class="code" href="class_ieee80211_mac.html#a1fa778f58e945ac0b347dfa66785224b">sendACKFrameOnEndSIFS</a>();
<a name="l00550"></a>00550                 <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
<a name="l00551"></a>00551             );
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553         <span class="comment">// this is not a real state</span>
<a name="l00554"></a>00554         <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>)
<a name="l00555"></a>00555         {
<a name="l00556"></a>00556             <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Error,
<a name="l00557"></a>00557                                      <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; (msgKind == <a class="code" href="_ieee80211_consts_8h.html#aafd826a123a41fd03a9c88842387a821">COLLISION</a> || msgKind == <a class="code" href="_ieee80211_consts_8h.html#adc91194d5fc156e1d3b796361b38a54d">BITERROR</a>),
<a name="l00558"></a>00558                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00559"></a>00559                 <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;received frame contains bit errors or collision, next wait period is EIFS\n&quot;</span>;
<a name="l00560"></a>00560                 <a class="code" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a>++;
<a name="l00561"></a>00561                 <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
<a name="l00562"></a>00562             );
<a name="l00563"></a>00563             <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Broadcast,
<a name="l00564"></a>00564                                      <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3e8e21090db18d0cc4596af8588346c9" title="Returns true if message is a broadcast message.">isBroadcast</a>(frame) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0" title="Checks if the frame is a data or management frame.">isDataOrMgmtFrame</a>(frame),
<a name="l00565"></a>00565                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00566"></a>00566                 <a class="code" href="class_wireless_mac_base.html#a5454ec5040663e5af4ddb00f525a3caf" title="Sends a message to the upper layer.">sendUp</a>(frame);
<a name="l00567"></a>00567                 <a class="code" href="class_ieee80211_mac.html#af5839182df73e2f63a767d1927a5ac16">numReceivedBroadcast</a>++;
<a name="l00568"></a>00568                 <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
<a name="l00569"></a>00569             );
<a name="l00570"></a>00570             <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Data,
<a name="l00571"></a>00571                                      <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0" title="Checks if the frame is a data or management frame.">isDataOrMgmtFrame</a>(frame),
<a name="l00572"></a>00572                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
<a name="l00573"></a>00573                 <a class="code" href="class_wireless_mac_base.html#a5454ec5040663e5af4ddb00f525a3caf" title="Sends a message to the upper layer.">sendUp</a>(frame);
<a name="l00574"></a>00574                 <a class="code" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a>++;
<a name="l00575"></a>00575             );
<a name="l00576"></a>00576             <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>,
<a name="l00577"></a>00577                                      <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; frameType == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aadc75816b0f8ed30512ca871fb63aa9c3">ST_RTS</a>,
<a name="l00578"></a>00578                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
<a name="l00579"></a>00579             );
<a name="l00580"></a>00580             <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Other,
<a name="l00581"></a>00581                                      <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
<a name="l00582"></a>00582                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
<a name="l00583"></a>00583                 <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
<a name="l00584"></a>00584             );
<a name="l00585"></a>00585         }
<a name="l00586"></a>00586     }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588     <a class="code" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d" title="Logs all state information.">logState</a>();
<a name="l00589"></a>00589     <a class="code" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a>.record(<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState());
<a name="l00590"></a>00590 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acc89ca1fc93ad17f2a78a01bd474f058"></a><!-- doxytag: member="Ieee80211Mac::initialize" ref="acc89ca1fc93ad17f2a78a01bd474f058" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and some variables. </p>

<p>Reimplemented from <a class="el" href="class_wireless_mac_base.html#a74866aacf342c21cd220d959698d87af">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">76</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00077"></a>00077 {
<a name="l00078"></a>00078     <a class="code" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058" title="Initialization of the module and some variables.">WirelessMacBase::initialize</a>(stage);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="keywordflow">if</span> (stage == 0)
<a name="l00081"></a>00081     {
<a name="l00082"></a>00082         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Initializing stage 0\n&quot;</span>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084         <span class="comment">// initialize parameters</span>
<a name="l00085"></a>00085         <a class="code" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a">maxQueueSize</a> = par(<span class="stringliteral">&quot;maxQueueSize&quot;</span>);
<a name="l00086"></a>00086         <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">bitrate</a> = par(<span class="stringliteral">&quot;bitrate&quot;</span>);
<a name="l00087"></a>00087         <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a> = 2e6; <span class="comment">//FIXME make it parameter</span>
<a name="l00088"></a>00088         <a class="code" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613">rtsThreshold</a> = par(<span class="stringliteral">&quot;rtsThresholdBytes&quot;</span>);
<a name="l00089"></a>00089 
<a name="l00090"></a>00090         <span class="comment">// the variable is renamed due to a confusion in the standard</span>
<a name="l00091"></a>00091         <span class="comment">// the name retry limit would be misleading, see the header file comment</span>
<a name="l00092"></a>00092         <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a> = par(<span class="stringliteral">&quot;retryLimit&quot;</span>);
<a name="l00093"></a>00093         <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a> == -1) <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a> = 7;
<a name="l00094"></a>00094         ASSERT(<a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a> &gt; 0);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096         <a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">cwMinData</a> = par(<span class="stringliteral">&quot;cwMinData&quot;</span>);
<a name="l00097"></a>00097         <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">cwMinData</a> == -1) <a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">cwMinData</a> = <a class="code" href="_ieee80211_consts_8h.html#a104d9aa9c5a73eeecc9799c60b238289">CW_MIN</a>;
<a name="l00098"></a>00098         ASSERT(<a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">cwMinData</a> &gt;= 0);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100         <a class="code" href="class_ieee80211_mac.html#a189e3641d647b4d4c506e709a0873467">cwMinBroadcast</a> = par(<span class="stringliteral">&quot;cwMinBroadcast&quot;</span>);
<a name="l00101"></a>00101         <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a189e3641d647b4d4c506e709a0873467">cwMinBroadcast</a> == -1) <a class="code" href="class_ieee80211_mac.html#a189e3641d647b4d4c506e709a0873467">cwMinBroadcast</a> = 31;
<a name="l00102"></a>00102         ASSERT(<a class="code" href="class_ieee80211_mac.html#a189e3641d647b4d4c506e709a0873467">cwMinBroadcast</a> &gt;= 0);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104         <span class="keyword">const</span> <span class="keywordtype">char</span> *addressString = par(<span class="stringliteral">&quot;address&quot;</span>);
<a name="l00105"></a>00105         <span class="keywordflow">if</span> (!strcmp(addressString, <span class="stringliteral">&quot;auto&quot;</span>)) {
<a name="l00106"></a>00106             <span class="comment">// assign automatic address</span>
<a name="l00107"></a>00107             <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a> = <a class="code" href="class_m_a_c_address.html#a020d8e71aa50506e2b29a15833fedfd9">MACAddress::generateAutoAddress</a>();
<a name="l00108"></a>00108             <span class="comment">// change module parameter from &quot;auto&quot; to concrete address</span>
<a name="l00109"></a>00109             par(<span class="stringliteral">&quot;address&quot;</span>).setStringValue(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>.<a class="code" href="class_m_a_c_address.html#a5eed6450abcdd795b2a3d59828a29802">str</a>().c_str());
<a name="l00110"></a>00110         }
<a name="l00111"></a>00111         <span class="keywordflow">else</span>
<a name="l00112"></a>00112             <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>.<a class="code" href="class_m_a_c_address.html#a8098d36b9f4a40ef61e1a3cb62cb27dd">setAddress</a>(addressString);
<a name="l00113"></a>00113 
<a name="l00114"></a>00114         <span class="comment">// subscribe for the information of the carrier sense</span>
<a name="l00115"></a>00115         <a class="code" href="class_wireless_mac_base.html#a779ea8a0af7e4ef85c5faa85d6a281ed" title="Cached pointer to the NotificationBoard module.">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baa6e69ccdaad903262ac00b89b6208a69">NF_RADIOSTATE_CHANGED</a>);
<a name="l00116"></a>00116 
<a name="l00117"></a>00117         <span class="comment">// initalize self messages</span>
<a name="l00118"></a>00118         <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;SIFS&quot;</span>);
<a name="l00119"></a>00119         <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;DIFS&quot;</span>);
<a name="l00120"></a>00120         <a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;Backoff&quot;</span>);
<a name="l00121"></a>00121         <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;Timeout&quot;</span>);
<a name="l00122"></a>00122         <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;Reserve&quot;</span>);
<a name="l00123"></a>00123         <a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">mediumStateChange</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;MediumStateChange&quot;</span>);
<a name="l00124"></a>00124 
<a name="l00125"></a>00125         <span class="comment">// interface</span>
<a name="l00126"></a>00126         <a class="code" href="class_ieee80211_mac.html#a306f0e039efc2ede2e2e209bf02f7b1a">registerInterface</a>();
<a name="l00127"></a>00127 
<a name="l00128"></a>00128         <span class="comment">// obtain pointer to external queue</span>
<a name="l00129"></a>00129         <a class="code" href="class_ieee80211_mac.html#a76503451f2ddc57bec7426c3f9f919ca">initializeQueueModule</a>();
<a name="l00130"></a>00130 
<a name="l00131"></a>00131         <span class="comment">// state variables</span>
<a name="l00132"></a>00132         <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.setName(<span class="stringliteral">&quot;Ieee80211Mac State Machine&quot;</span>);
<a name="l00133"></a>00133         <a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a> = <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792" title="Distributed Coordination Function.">DCF</a>;
<a name="l00134"></a>00134         <a class="code" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762">sequenceNumber</a> = 0;
<a name="l00135"></a>00135         <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a> = <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449aeb600ab2fbbbbc2d12d874edb9320ec0">RadioState::IDLE</a>;
<a name="l00136"></a>00136         <a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a> = 0;
<a name="l00137"></a>00137         <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> = -1;
<a name="l00138"></a>00138         <a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a> = <span class="keyword">false</span>;
<a name="l00139"></a>00139         <a class="code" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20">lastReceiveFailed</a> = <span class="keyword">false</span>;
<a name="l00140"></a>00140         <a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">nav</a> = <span class="keyword">false</span>;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142         <span class="comment">// statistics</span>
<a name="l00143"></a>00143         <a class="code" href="class_ieee80211_mac.html#a5a3258861ee26e78b2378160233ae6f5">numRetry</a> = 0;
<a name="l00144"></a>00144         <a class="code" href="class_ieee80211_mac.html#a6c4930c1fd531fe421935816d8856443">numSentWithoutRetry</a> = 0;
<a name="l00145"></a>00145         <a class="code" href="class_ieee80211_mac.html#aea9e86c3d8f9db03a6a9dcab0bd36df7">numGivenUp</a> = 0;
<a name="l00146"></a>00146         <a class="code" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a> = 0;
<a name="l00147"></a>00147         <a class="code" href="class_ieee80211_mac.html#a5451e3e610dca607187e39f176d91120">numSent</a> = 0;
<a name="l00148"></a>00148         <a class="code" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a> = 0;
<a name="l00149"></a>00149         <a class="code" href="class_ieee80211_mac.html#aa6376b24ff26d3f78706f5b8656c3167">numSentBroadcast</a> = 0;
<a name="l00150"></a>00150         <a class="code" href="class_ieee80211_mac.html#af5839182df73e2f63a767d1927a5ac16">numReceivedBroadcast</a> = 0;
<a name="l00151"></a>00151         <a class="code" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a>.setName(<span class="stringliteral">&quot;State&quot;</span>);
<a name="l00152"></a>00152         <a class="code" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a>.setEnum(<span class="stringliteral">&quot;Ieee80211Mac&quot;</span>);
<a name="l00153"></a>00153         <a class="code" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a>.setName(<span class="stringliteral">&quot;RadioState&quot;</span>);
<a name="l00154"></a>00154         <a class="code" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a>.setEnum(<span class="stringliteral">&quot;RadioState&quot;</span>);
<a name="l00155"></a>00155 
<a name="l00156"></a>00156         <span class="comment">// initialize watches</span>
<a name="l00157"></a>00157         WATCH(<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>);
<a name="l00158"></a>00158         WATCH(<a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a>);
<a name="l00159"></a>00159         WATCH(<a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a>);
<a name="l00160"></a>00160         WATCH(<a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a>);
<a name="l00161"></a>00161         WATCH(<a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">nav</a>);
<a name="l00162"></a>00162 
<a name="l00163"></a>00163         WATCH(<a class="code" href="class_ieee80211_mac.html#a5a3258861ee26e78b2378160233ae6f5">numRetry</a>);
<a name="l00164"></a>00164         WATCH(<a class="code" href="class_ieee80211_mac.html#a6c4930c1fd531fe421935816d8856443">numSentWithoutRetry</a>);
<a name="l00165"></a>00165         WATCH(<a class="code" href="class_ieee80211_mac.html#aea9e86c3d8f9db03a6a9dcab0bd36df7">numGivenUp</a>);
<a name="l00166"></a>00166         WATCH(<a class="code" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a>);
<a name="l00167"></a>00167         WATCH(<a class="code" href="class_ieee80211_mac.html#a5451e3e610dca607187e39f176d91120">numSent</a>);
<a name="l00168"></a>00168         WATCH(<a class="code" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a>);
<a name="l00169"></a>00169         WATCH(<a class="code" href="class_ieee80211_mac.html#aa6376b24ff26d3f78706f5b8656c3167">numSentBroadcast</a>);
<a name="l00170"></a>00170         WATCH(<a class="code" href="class_ieee80211_mac.html#af5839182df73e2f63a767d1927a5ac16">numReceivedBroadcast</a>);
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a76503451f2ddc57bec7426c3f9f919ca"></a><!-- doxytag: member="Ieee80211Mac::initializeQueueModule" ref="a76503451f2ddc57bec7426c3f9f919ca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::initializeQueueModule </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00209">209</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00210"></a>00210 {
<a name="l00211"></a>00211     <span class="comment">// use of external queue module is optional -- find it if there&apos;s one specified</span>
<a name="l00212"></a>00212     <span class="keywordflow">if</span> (par(<span class="stringliteral">&quot;queueModule&quot;</span>).stringValue()[0])
<a name="l00213"></a>00213     {
<a name="l00214"></a>00214         cModule *module = getParentModule()-&gt;getSubmodule(par(<span class="stringliteral">&quot;queueModule&quot;</span>).stringValue());
<a name="l00215"></a>00215         <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">queueModule</a> = check_and_cast&lt;<a class="code" href="class_i_passive_queue.html">IPassiveQueue</a> *&gt;(module);
<a name="l00216"></a>00216 
<a name="l00217"></a>00217         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Requesting first two frames from queue module\n&quot;</span>;
<a name="l00218"></a>00218         <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">queueModule</a>-&gt;<a class="code" href="class_i_passive_queue.html#af28ddf4ff33afab50f9d34d1b24e2f6d">requestPacket</a>();
<a name="l00219"></a>00219         <span class="comment">// needed for backoff: mandatory if next message is already present</span>
<a name="l00220"></a>00220         <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">queueModule</a>-&gt;<a class="code" href="class_i_passive_queue.html#af28ddf4ff33afab50f9d34d1b24e2f6d">requestPacket</a>();
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a45baf5991b010588132ecfea105a17b0"></a><!-- doxytag: member="Ieee80211Mac::invalidateBackoffPeriod" ref="a45baf5991b010588132ecfea105a17b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::invalidateBackoffPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates a new backoff period based on the contention window. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00732">732</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00733"></a>00733 {
<a name="l00734"></a>00734     <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> = -1;
<a name="l00735"></a>00735 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e8e21090db18d0cc4596af8588346c9"></a><!-- doxytag: member="Ieee80211Mac::isBroadcast" ref="a3e8e21090db18d0cc4596af8588346c9" args="(Ieee80211Frame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Ieee80211Mac::isBroadcast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if message is a broadcast message. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00967">967</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00830">buildDataFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00623">computeBackoffPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00968"></a>00968 {
<a name="l00969"></a>00969     <span class="keywordflow">return</span> frame &amp;&amp; frame-&gt;getReceiverAddress().isBroadcast();
<a name="l00970"></a>00970 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a331f759ba45d0d363362dce7d1b9f9b0"></a><!-- doxytag: member="Ieee80211Mac::isDataOrMgmtFrame" ref="a331f759ba45d0d363362dce7d1b9f9b0" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Ieee80211Mac::isDataOrMgmtFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if the frame is a data or management frame. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00977">977</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00978"></a>00978 {
<a name="l00979"></a>00979     <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a>*<span class="keyword">&gt;</span>(frame);
<a name="l00980"></a>00980 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6a44f63a391702d7e31078eae7fe453b"></a><!-- doxytag: member="Ieee80211Mac::isForUs" ref="a6a44f63a391702d7e31078eae7fe453b" args="(Ieee80211Frame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Ieee80211Mac::isForUs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if message destination address is ours. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00972">972</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00301">handleLowerMsg()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00701">scheduleReservePeriod()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00973"></a>00973 {
<a name="l00974"></a>00974     <span class="keywordflow">return</span> frame &amp;&amp; frame-&gt;getReceiverAddress() == <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>;
<a name="l00975"></a>00975 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac0b29b4f8c930e44e5dd062b79e394c0"></a><!-- doxytag: member="Ieee80211Mac::isInvalidBackoffPeriod" ref="ac0b29b4f8c930e44e5dd062b79e394c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Ieee80211Mac::isInvalidBackoffPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00737">737</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00738"></a>00738 {
<a name="l00739"></a>00739     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> == -1;
<a name="l00740"></a>00740 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa4550d6a69c5e5a56d2a72ac0dc86729"></a><!-- doxytag: member="Ieee80211Mac::isMediumFree" ref="aa4550d6a69c5e5a56d2a72ac0dc86729" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Ieee80211Mac::isMediumFree </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells if the medium is free according to the physical and virtual carrier sense algorithm. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00962">962</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00963"></a>00963 {
<a name="l00964"></a>00964     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a> == <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449aeb600ab2fbbbbc2d12d874edb9320ec0">RadioState::IDLE</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a>-&gt;isScheduled();
<a name="l00965"></a>00965 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adf18b82f7ec2838535e84fba8ef43f3e"></a><!-- doxytag: member="Ieee80211Mac::isMediumStateChange" ref="adf18b82f7ec2838535e84fba8ef43f3e" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Ieee80211Mac::isMediumStateChange </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used by the state machine to identify medium state change events. This message is currently optimized away and not sent through the kernel. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00957">957</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00958"></a>00958 {
<a name="l00959"></a>00959     <span class="keywordflow">return</span> msg == <a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">mediumStateChange</a> || (msg == <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a> == <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449aeb600ab2fbbbbc2d12d874edb9320ec0">RadioState::IDLE</a>);
<a name="l00960"></a>00960 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0cae572eab527e836aadae2ef9df5b3d"></a><!-- doxytag: member="Ieee80211Mac::logState" ref="a0cae572eab527e836aadae2ef9df5b3d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::logState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Logs all state information. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">1012</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01013"></a>01013 {
<a name="l01014"></a>01014     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>  &lt;&lt; <span class="stringliteral">&quot;state information: mode = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#ad717066cb5cc83f789b4abbe28d311d7" title="Produce a readable name of the given MAC operation mode.">modeName</a>(<a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>) &lt;&lt; <span class="stringliteral">&quot;, state = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getStateName()
<a name="l01015"></a>01015         &lt;&lt; <span class="stringliteral">&quot;, backoff = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a> &lt;&lt; <span class="stringliteral">&quot;, backoffPeriod = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a>
<a name="l01016"></a>01016         &lt;&lt; <span class="stringliteral">&quot;, retryCounter = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a> &lt;&lt; <span class="stringliteral">&quot;, radioState = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a>
<a name="l01017"></a>01017         &lt;&lt; <span class="stringliteral">&quot;, nav = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">nav</a> &lt;&lt; endl;
<a name="l01018"></a>01018 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad717066cb5cc83f789b4abbe28d311d7"></a><!-- doxytag: member="Ieee80211Mac::modeName" ref="ad717066cb5cc83f789b4abbe28d311d7" args="(int mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * Ieee80211Mac::modeName </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Produce a readable name of the given MAC operation mode. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l01020">1020</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">logState()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01021"></a>01021 {
<a name="l01022"></a>01022 <span class="preprocessor">#define CASE(x) case x: s=#x; break</span>
<a name="l01023"></a>01023 <span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *s = <span class="stringliteral">&quot;???&quot;</span>;
<a name="l01024"></a>01024     <span class="keywordflow">switch</span> (<a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>)
<a name="l01025"></a>01025     {
<a name="l01026"></a>01026         <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792" title="Distributed Coordination Function.">DCF</a>);
<a name="l01027"></a>01027         <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189" title="Point Coordination Function.">PCF</a>);
<a name="l01028"></a>01028     }
<a name="l01029"></a>01029     <span class="keywordflow">return</span> s;
<a name="l01030"></a>01030 <span class="preprocessor">#undef CASE</span>
<a name="l01031"></a>01031 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a71351c92bb5234f62edb24b1a0f1f1b7"></a><!-- doxytag: member="Ieee80211Mac::numInitStages" ref="a71351c92bb5234f62edb24b1a0f1f1b7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int Ieee80211Mac::numInitStages </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and its variables. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00248">248</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00248"></a>00248 {<span class="keywordflow">return</span> 2;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af9ffa2b13e0336e9cc15334dea0122da"></a><!-- doxytag: member="Ieee80211Mac::popTransmissionQueue" ref="af9ffa2b13e0336e9cc15334dea0122da" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::popTransmissionQueue </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes frame at the front of queue. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00987">987</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00898">finishCurrentTransmission()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00904">giveUpCurrentTransmission()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00988"></a>00988 {
<a name="l00989"></a>00989     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;dropping frame from transmission queue\n&quot;</span>;
<a name="l00990"></a>00990     <a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *temp = <a class="code" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">transmissionQueue</a>.front();
<a name="l00991"></a>00991     <a class="code" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">transmissionQueue</a>.pop_front();
<a name="l00992"></a>00992     <span class="keyword">delete</span> temp;
<a name="l00993"></a>00993 
<a name="l00994"></a>00994     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">queueModule</a>)
<a name="l00995"></a>00995     {
<a name="l00996"></a>00996         <span class="comment">// tell queue module that we&apos;ve become idle</span>
<a name="l00997"></a>00997         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;requesting another frame from queue module\n&quot;</span>;
<a name="l00998"></a>00998         <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">queueModule</a>-&gt;<a class="code" href="class_i_passive_queue.html#af28ddf4ff33afab50f9d34d1b24e2f6d">requestPacket</a>();
<a name="l00999"></a>00999     }
<a name="l01000"></a>01000 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3c6164232e8645bbbef5d178d78fd8c4"></a><!-- doxytag: member="Ieee80211Mac::receiveChangeNotification" ref="a3c6164232e8645bbbef5d178d78fd8c4" args="(int category, const cPolymorphic *details)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::receiveChangeNotification </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>details</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called by the <a class="el" href="class_notification_board.html">NotificationBoard</a> whenever a change occurs we're interested in. </p>

<p>Implements <a class="el" href="class_i_notifiable.html#a67d757190e1128eaec8f0a8e51ed38f6">INotifiable</a>.</p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00324">324</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00325"></a>00325 {
<a name="l00326"></a>00326     Enter_Method_Silent();
<a name="l00327"></a>00327     <a class="code" href="_notifier_consts_8cc.html#a68fd4b933fae636048bb9ee52fd922e5">printNotificationBanner</a>(category, details);
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     <span class="keywordflow">if</span> (category == <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baa6e69ccdaad903262ac00b89b6208a69">NF_RADIOSTATE_CHANGED</a>)
<a name="l00330"></a>00330     {
<a name="l00331"></a>00331         <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449">RadioState::State</a> newRadioState = check_and_cast&lt;<a class="code" href="class_radio_state.html">RadioState</a> *&gt;(details)-&gt;getState();
<a name="l00332"></a>00332 
<a name="l00333"></a>00333         <span class="comment">// FIXME: double recording, because there&apos;s no sample hold in the gui</span>
<a name="l00334"></a>00334         <a class="code" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a>.record(<a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a>);
<a name="l00335"></a>00335         <a class="code" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a>.record(newRadioState);
<a name="l00336"></a>00336 
<a name="l00337"></a>00337         <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a> = newRadioState;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339         <a class="code" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2" title="Handle all kinds of messages and notifications with the state machine.">handleWithFSM</a>(<a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">mediumStateChange</a>);
<a name="l00340"></a>00340     }
<a name="l00341"></a>00341 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a306f0e039efc2ede2e2e209bf02f7b1a"></a><!-- doxytag: member="Ieee80211Mac::registerInterface" ref="a306f0e039efc2ede2e2e209bf02f7b1a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::registerInterface </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00174">174</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00175"></a>00175 {
<a name="l00176"></a>00176     <a class="code" href="class_i_interface_table.html">IInterfaceTable</a> *ift = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().getIfExists();
<a name="l00177"></a>00177     <span class="keywordflow">if</span> (!ift)
<a name="l00178"></a>00178         <span class="keywordflow">return</span>;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *e = <span class="keyword">new</span> <a class="code" href="class_interface_entry.html">InterfaceEntry</a>();
<a name="l00181"></a>00181 
<a name="l00182"></a>00182     <span class="comment">// interface name: NetworkInterface module&apos;s name without special characters ([])</span>
<a name="l00183"></a>00183     <span class="keywordtype">char</span> *interfaceName = <span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(getParentModule()-&gt;getFullName()) + 1];
<a name="l00184"></a>00184     <span class="keywordtype">char</span> *d = interfaceName;
<a name="l00185"></a>00185     <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> *s = getParentModule()-&gt;getFullName(); *s; s++)
<a name="l00186"></a>00186         <span class="keywordflow">if</span> (isalnum(*s))
<a name="l00187"></a>00187             *d++ = *s;
<a name="l00188"></a>00188     *d = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     e-&gt;<a class="code" href="class_interface_entry.html#af9ca0c7af3a0f45e7d7102e6cc2b089e">setName</a>(interfaceName);
<a name="l00191"></a>00191     <span class="keyword">delete</span> [] interfaceName;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193     <span class="comment">// address</span>
<a name="l00194"></a>00194     e-&gt;<a class="code" href="class_interface_entry.html#ac10c228cc65a2c799c798ca75de593dc">setMACAddress</a>(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>);
<a name="l00195"></a>00195     e-&gt;<a class="code" href="class_interface_entry.html#a7fad57b268a57abe1de80d30299d4c45">setInterfaceToken</a>(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a>.<a class="code" href="class_m_a_c_address.html#af646c7d6a3dbe4a94465fd3ec144f08f">formInterfaceIdentifier</a>());
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="comment">// FIXME: MTU on 802.11 = ?</span>
<a name="l00198"></a>00198     e-&gt;<a class="code" href="class_interface_entry.html#aaebcf5970e29877b0a4b68ddaaaf540f">setMtu</a>(par(<span class="stringliteral">&quot;mtu&quot;</span>));
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     <span class="comment">// capabilities</span>
<a name="l00201"></a>00201     e-&gt;<a class="code" href="class_interface_entry.html#a6f9c79da187d1d56c028b616f3be28fe">setBroadcast</a>(<span class="keyword">true</span>);
<a name="l00202"></a>00202     e-&gt;<a class="code" href="class_interface_entry.html#a0b9fca7071b37185a18b6693c3502f69">setMulticast</a>(<span class="keyword">true</span>);
<a name="l00203"></a>00203     e-&gt;<a class="code" href="class_interface_entry.html#af207b6ea20ecd9bedd4acfae50a3500f">setPointToPoint</a>(<span class="keyword">false</span>);
<a name="l00204"></a>00204 
<a name="l00205"></a>00205     <span class="comment">// add</span>
<a name="l00206"></a>00206     ift-&gt;<a class="code" href="class_i_interface_table.html#a2159ab6dc917bd6f1b2061980bbdf107">addInterface</a>(e, <span class="keyword">this</span>);
<a name="l00207"></a>00207 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ace0608e9ca57414b54817d04b184b120"></a><!-- doxytag: member="Ieee80211Mac::resetStateVariables" ref="ace0608e9ca57414b54817d04b184b120" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::resetStateVariables </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reset backoff, backoffPeriod and retryCounter for IDLE state. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00943">943</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00898">finishCurrentTransmission()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00904">giveUpCurrentTransmission()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00944"></a>00944 {
<a name="l00945"></a>00945     <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a> = 0;
<a name="l00946"></a>00946     <a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a> = 0;
<a name="l00947"></a>00947 
<a name="l00948"></a>00948     <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">transmissionQueue</a>.empty()) {
<a name="l00949"></a>00949         <a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a> = <span class="keyword">true</span>;
<a name="l00950"></a>00950         <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;<a class="code" href="class_ieee80211_frame.html#ab04786a478f0cb875782694c0ab0a08b">setRetry</a>(<span class="keyword">false</span>);
<a name="l00951"></a>00951     }
<a name="l00952"></a>00952     <span class="keywordflow">else</span> {
<a name="l00953"></a>00953         <a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a> = <span class="keyword">false</span>;
<a name="l00954"></a>00954     }
<a name="l00955"></a>00955 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1140ac3364f8defb6d66deb76af9d55e"></a><!-- doxytag: member="Ieee80211Mac::retryCurrentTransmission" ref="a1140ac3364f8defb6d66deb76af9d55e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::retryCurrentTransmission </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00911">911</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00912"></a>00912 {
<a name="l00913"></a>00913     ASSERT(<a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a> &lt; <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a> - 1);
<a name="l00914"></a>00914     <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;<a class="code" href="class_ieee80211_frame.html#ab04786a478f0cb875782694c0ab0a08b">setRetry</a>(<span class="keyword">true</span>);
<a name="l00915"></a>00915     <a class="code" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">retryCounter</a>++;
<a name="l00916"></a>00916     <a class="code" href="class_ieee80211_mac.html#a5a3258861ee26e78b2378160233ae6f5">numRetry</a>++;
<a name="l00917"></a>00917     <a class="code" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">backoff</a> = <span class="keyword">true</span>;
<a name="l00918"></a>00918     <a class="code" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a>();
<a name="l00919"></a>00919 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4ea47166959fb7622be67011d131d8f5"></a><!-- doxytag: member="Ieee80211Mac::scheduleBackoffPeriod" ref="a4ea47166959fb7622be67011d131d8f5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::scheduleBackoffPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00758">758</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00759"></a>00759 {
<a name="l00760"></a>00760     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling backoff period\n&quot;</span>;
<a name="l00761"></a>00761     scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">backoffPeriod</a>, <a class="code" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">endBackoff</a>);
<a name="l00762"></a>00762 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae49ff307323745c607aa72ddbd8eefcd"></a><!-- doxytag: member="Ieee80211Mac::scheduleBroadcastTimeoutPeriod" ref="ae49ff307323745c607aa72ddbd8eefcd" args="(Ieee80211DataOrMgmtFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::scheduleBroadcastTimeoutPeriod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00684">684</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00685"></a>00685 {
<a name="l00686"></a>00686     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling broadcast timeout period\n&quot;</span>;
<a name="l00687"></a>00687     scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(frameToSend), <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a>);
<a name="l00688"></a>00688 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a916864ac7a266c8fdf466a185c3a68dc"></a><!-- doxytag: member="Ieee80211Mac::scheduleCTSTimeoutPeriod" ref="a916864ac7a266c8fdf466a185c3a68dc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::scheduleCTSTimeoutPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00696">696</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00697"></a>00697 {
<a name="l00698"></a>00698     scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a994032d4c974294f5a24e0e3160d90f4">LENGTH_RTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>) + <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>) + <a class="code" href="_ieee80211_consts_8h.html#a326bc90ca8d16cf60d60f761b6494a40">MAX_PROPAGATION_DELAY</a> * 2, <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a>);
<a name="l00699"></a>00699 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab699599e2dc2ffb747a9a7ae8a8f98e8"></a><!-- doxytag: member="Ieee80211Mac::scheduleDataTimeoutPeriod" ref="ab699599e2dc2ffb747a9a7ae8a8f98e8" args="(Ieee80211DataOrMgmtFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::scheduleDataTimeoutPeriod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00678">678</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00679"></a>00679 {
<a name="l00680"></a>00680     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling data timeout period\n&quot;</span>;
<a name="l00681"></a>00681     scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(frameToSend) + <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>) + <a class="code" href="_ieee80211_consts_8h.html#a326bc90ca8d16cf60d60f761b6494a40">MAX_PROPAGATION_DELAY</a> * 2, <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a>);
<a name="l00682"></a>00682 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a84bd3147b655f8396f37926fe34a17ad"></a><!-- doxytag: member="Ieee80211Mac::scheduleDIFSPeriod" ref="a84bd3147b655f8396f37926fe34a17ad" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::scheduleDIFSPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00658">658</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00659"></a>00659 {
<a name="l00660"></a>00660     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20">lastReceiveFailed</a>)
<a name="l00661"></a>00661     {
<a name="l00662"></a>00662         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;receiption of last frame failed, scheduling EIFS period\n&quot;</span>;
<a name="l00663"></a>00663         scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS</a>(), <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a>);
<a name="l00664"></a>00664     }
<a name="l00665"></a>00665     <span class="keywordflow">else</span>
<a name="l00666"></a>00666     {
<a name="l00667"></a>00667         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling DIFS period\n&quot;</span>;
<a name="l00668"></a>00668         scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a0f34064c34a1e6bc53832280a95e8fbc">getDIFS</a>(), <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a>);
<a name="l00669"></a>00669     }
<a name="l00670"></a>00670 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a21662171dd8c6356df3c8b050d7c9414"></a><!-- doxytag: member="Ieee80211Mac::scheduleReservePeriod" ref="a21662171dd8c6356df3c8b050d7c9414" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::scheduleReservePeriod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schedule network allocation period according to 9.2.5.4. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00701">701</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00702"></a>00702 {
<a name="l00703"></a>00703     simtime_t reserve = frame-&gt;<a class="code" href="class_ieee80211_frame.html#a5779472ccaefae6d1f80db8f2473c035">getDuration</a>();
<a name="l00704"></a>00704 
<a name="l00705"></a>00705     <span class="comment">// see spec. 7.1.3.2</span>
<a name="l00706"></a>00706     <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; reserve != 0 &amp;&amp; reserve &lt; 32768)
<a name="l00707"></a>00707     {
<a name="l00708"></a>00708         <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a>-&gt;isScheduled()) {
<a name="l00709"></a>00709             simtime_t oldReserve = <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a>-&gt;getArrivalTime() - simTime();
<a name="l00710"></a>00710 
<a name="l00711"></a>00711             <span class="keywordflow">if</span> (oldReserve &gt; reserve)
<a name="l00712"></a>00712                 <span class="keywordflow">return</span>;
<a name="l00713"></a>00713 
<a name="l00714"></a>00714             reserve = <a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948">std::max</a>(reserve, oldReserve);
<a name="l00715"></a>00715             cancelEvent(<a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a>);
<a name="l00716"></a>00716         }
<a name="l00717"></a>00717         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a> == <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449aeb600ab2fbbbbc2d12d874edb9320ec0">RadioState::IDLE</a>)
<a name="l00718"></a>00718         {
<a name="l00719"></a>00719             <span class="comment">// NAV: the channel just became virtually busy according to the spec</span>
<a name="l00720"></a>00720             scheduleAt(simTime(), <a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">mediumStateChange</a>);
<a name="l00721"></a>00721         }
<a name="l00722"></a>00722 
<a name="l00723"></a>00723         <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling reserve period for: &quot;</span> &lt;&lt; reserve &lt;&lt; endl;
<a name="l00724"></a>00724 
<a name="l00725"></a>00725         ASSERT(reserve &gt; 0);
<a name="l00726"></a>00726 
<a name="l00727"></a>00727         <a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">nav</a> = <span class="keyword">true</span>;
<a name="l00728"></a>00728         scheduleAt(simTime() + reserve, <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a>);
<a name="l00729"></a>00729     }
<a name="l00730"></a>00730 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a325e59dc74a3ad59596933aaf96012a7"></a><!-- doxytag: member="Ieee80211Mac::scheduleSIFSPeriod" ref="a325e59dc74a3ad59596933aaf96012a7" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::scheduleSIFSPeriod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00651">651</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00652"></a>00652 {
<a name="l00653"></a>00653     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling SIFS period\n&quot;</span>;
<a name="l00654"></a>00654     <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>-&gt;setContextPointer(frame-&gt;<a class="code" href="class_ieee80211_frame.html#a8a459c2fbc6cb63a0815118b1479f15e">dup</a>());
<a name="l00655"></a>00655     scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>(), <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>);
<a name="l00656"></a>00656 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0afcec3ebbe4fac7c63ac32937604540"></a><!-- doxytag: member="Ieee80211Mac::sendACKFrame" ref="a0afcec3ebbe4fac7c63ac32937604540" args="(Ieee80211DataOrMgmtFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendACKFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00781">781</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00773">sendACKFrameOnEndSIFS()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00782"></a>00782 {
<a name="l00783"></a>00783     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending ACK frame\n&quot;</span>;
<a name="l00784"></a>00784     <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda" title="Attaches a PhyControlInfo to the frame which will cause it to be sent at basicBitrate...">setBasicBitrate</a>(<a class="code" href="class_ieee80211_mac.html#a7eab1962fd94c95151d62e3fb71253e0">buildACKFrame</a>(frameToACK)));
<a name="l00785"></a>00785 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1fa778f58e945ac0b347dfa66785224b"></a><!-- doxytag: member="Ieee80211Mac::sendACKFrameOnEndSIFS" ref="a1fa778f58e945ac0b347dfa66785224b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendACKFrameOnEndSIFS </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00773">773</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00774"></a>00774 {
<a name="l00775"></a>00775     <a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frameToACK = (<a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *)<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>-&gt;getContextPointer();
<a name="l00776"></a>00776     <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>-&gt;setContextPointer(NULL);
<a name="l00777"></a>00777     <a class="code" href="class_ieee80211_mac.html#a0afcec3ebbe4fac7c63ac32937604540">sendACKFrame</a>(check_and_cast&lt;Ieee80211DataOrMgmtFrame*&gt;(frameToACK));
<a name="l00778"></a>00778     <span class="keyword">delete</span> frameToACK;
<a name="l00779"></a>00779 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a39720691a045c98037ec4025b9ab5207"></a><!-- doxytag: member="Ieee80211Mac::sendBroadcastFrame" ref="a39720691a045c98037ec4025b9ab5207" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendBroadcastFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameToSend</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00801">801</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00802"></a>00802 {
<a name="l00803"></a>00803     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending Broadcast frame\n&quot;</span>;
<a name="l00804"></a>00804     <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a8213d9fea4bc9500dfe899ee70d2789e">buildBroadcastFrame</a>(frameToSend));
<a name="l00805"></a>00805 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a910622485a5816a5a5475858871bbbdc"></a><!-- doxytag: member="Ieee80211Mac::sendCTSFrame" ref="a910622485a5816a5a5475858871bbbdc" args="(Ieee80211RTSFrame *rtsFrame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendCTSFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>rtsFrame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00821">821</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00813">sendCTSFrameOnEndSIFS()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00822"></a>00822 {
<a name="l00823"></a>00823     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending CTS frame\n&quot;</span>;
<a name="l00824"></a>00824     <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda" title="Attaches a PhyControlInfo to the frame which will cause it to be sent at basicBitrate...">setBasicBitrate</a>(<a class="code" href="class_ieee80211_mac.html#aaea047b56dcec7dc99d9681138c1f719">buildCTSFrame</a>(rtsFrame)));
<a name="l00825"></a>00825 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a821d34cb04fd6ebd9b0d6989b963614d"></a><!-- doxytag: member="Ieee80211Mac::sendCTSFrameOnEndSIFS" ref="a821d34cb04fd6ebd9b0d6989b963614d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendCTSFrameOnEndSIFS </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00813">813</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00814"></a>00814 {
<a name="l00815"></a>00815     <a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *rtsFrame = (<a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *)<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>-&gt;getContextPointer();
<a name="l00816"></a>00816     <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>-&gt;setContextPointer(NULL);
<a name="l00817"></a>00817     <a class="code" href="class_ieee80211_mac.html#a910622485a5816a5a5475858871bbbdc">sendCTSFrame</a>(check_and_cast&lt;Ieee80211RTSFrame*&gt;(rtsFrame));
<a name="l00818"></a>00818     <span class="keyword">delete</span> rtsFrame;
<a name="l00819"></a>00819 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3283d9bfc1d01d05dc65887e6f0e8518"></a><!-- doxytag: member="Ieee80211Mac::sendDataFrame" ref="a3283d9bfc1d01d05dc65887e6f0e8518" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendDataFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameToSend</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00795">795</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00787">sendDataFrameOnEndSIFS()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00796"></a>00796 {
<a name="l00797"></a>00797     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending Data frame\n&quot;</span>;
<a name="l00798"></a>00798     <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame</a>(frameToSend));
<a name="l00799"></a>00799 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a535d6bc217f1cfc210fe798c3b89a114"></a><!-- doxytag: member="Ieee80211Mac::sendDataFrameOnEndSIFS" ref="a535d6bc217f1cfc210fe798c3b89a114" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendDataFrameOnEndSIFS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameToSend</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00787">787</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00788"></a>00788 {
<a name="l00789"></a>00789     <a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *ctsFrame = (<a class="code" href="class_ieee80211_frame.html">Ieee80211Frame</a> *)<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>-&gt;getContextPointer();
<a name="l00790"></a>00790     <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a>-&gt;setContextPointer(NULL);
<a name="l00791"></a>00791     <a class="code" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a>(frameToSend);
<a name="l00792"></a>00792     <span class="keyword">delete</span> ctsFrame;
<a name="l00793"></a>00793 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af24a75754986f091cf9b5e6987bb7bf3"></a><!-- doxytag: member="Ieee80211Mac::sendDownPendingRadioConfigMsg" ref="af24a75754986f091cf9b5e6987bb7bf3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendDownPendingRadioConfigMsg </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send down the change channel message to the physical layer if there is any. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00926">926</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00927"></a>00927 {
<a name="l00928"></a>00928     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a> != NULL)
<a name="l00929"></a>00929     {
<a name="l00930"></a>00930         <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a>);
<a name="l00931"></a>00931         <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a> = NULL;
<a name="l00932"></a>00932     }
<a name="l00933"></a>00933 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abe3eb2e0a57570ce0f786da221090924"></a><!-- doxytag: member="Ieee80211Mac::sendRTSFrame" ref="abe3eb2e0a57570ce0f786da221090924" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::sendRTSFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&nbsp;</td>
          <td class="paramname"> <em>frameToSend</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00807">807</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00808"></a>00808 {
<a name="l00809"></a>00809     <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending RTS frame\n&quot;</span>;
<a name="l00810"></a>00810     <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda" title="Attaches a PhyControlInfo to the frame which will cause it to be sent at basicBitrate...">setBasicBitrate</a>(<a class="code" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">buildRTSFrame</a>(frameToSend)));
<a name="l00811"></a>00811 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a90256fefdfde93f0f350a100c8b94eda"></a><!-- doxytag: member="Ieee80211Mac::setBasicBitrate" ref="a90256fefdfde93f0f350a100c8b94eda" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> * Ieee80211Mac::setBasicBitrate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attaches a <a class="el" href="class_phy_control_info.html">PhyControlInfo</a> to the frame which will cause it to be sent at basicBitrate not bitrate (e.g. 2Mbps instead of 11Mbps). Used with ACK, CTS, RTS. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00886">886</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00781">sendACKFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00821">sendCTSFrame()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00807">sendRTSFrame()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00887"></a>00887 {
<a name="l00888"></a>00888     ASSERT(frame-&gt;getControlInfo()==NULL);
<a name="l00889"></a>00889     <a class="code" href="class_phy_control_info.html">PhyControlInfo</a> *ctrl = <span class="keyword">new</span> <a class="code" href="class_phy_control_info.html">PhyControlInfo</a>();
<a name="l00890"></a>00890     ctrl-&gt;setBitrate(<a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a>);
<a name="l00891"></a>00891     frame-&gt;setControlInfo(ctrl);
<a name="l00892"></a>00892     <span class="keywordflow">return</span> frame;
<a name="l00893"></a>00893 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a030408679db4d3c498bf79032baa4618"></a><!-- doxytag: member="Ieee80211Mac::setMode" ref="a030408679db4d3c498bf79032baa4618" args="(Mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ieee80211Mac::setMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change the current MAC operation mode. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8cc_source.html#l00935">935</a> of file <a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00936"></a>00936 {
<a name="l00937"></a>00937     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a> == <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189" title="Point Coordination Function.">PCF</a>)
<a name="l00938"></a>00938         error(<span class="stringliteral">&quot;PCF mode not yet supported&quot;</span>);
<a name="l00939"></a>00939 
<a name="l00940"></a>00940     this-&gt;<a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a> = <a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>;
<a name="l00941"></a>00941 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a3c12af5380d900067de2346248e5fc57"></a><!-- doxytag: member="Ieee80211Mac::address" ref="a3c12af5380d900067de2346248e5fc57" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_a_c_address.html">MACAddress</a> <a class="el" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">Ieee80211Mac::address</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>MAC address </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00077">77</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00858">buildRTSFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00301">handleLowerMsg()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00237">handleUpperMsg()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00972">isForUs()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00174">registerInterface()</a>.</p>

</div>
</div>
<a class="anchor" id="af3cf1a0d1737d69c490ef2fdf9595f3f"></a><!-- doxytag: member="Ieee80211Mac::asfTuplesList" ref="af3cf1a0d1737d69c490ef2fdf9595f3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_mac.html#a58735d5a5662d92c0dd3246a4e8ffbeb">Ieee80211ASFTupleList</a> <a class="el" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">Ieee80211Mac::asfTuplesList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A list of last sender, sequence and fragment number tuples to identify duplicates, see spec 9.2.9. TODO: this is not yet used </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00184">184</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa21f2979d0e71025b7d7da1ae9a5e656"></a><!-- doxytag: member="Ieee80211Mac::backoff" ref="aa21f2979d0e71025b7d7da1ae9a5e656" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#aa21f2979d0e71025b7d7da1ae9a5e656">Ieee80211Mac::backoff</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True if backoff is enabled </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00159">159</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">logState()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00943">resetStateVariables()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00911">retryCurrentTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a97fb235214ec97bd334dc0bcdcb94f32"></a><!-- doxytag: member="Ieee80211Mac::backoffPeriod" ref="a97fb235214ec97bd334dc0bcdcb94f32" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a97fb235214ec97bd334dc0bcdcb94f32">Ieee80211Mac::backoffPeriod</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remaining backoff period in seconds </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00165">165</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00749">decreaseBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00742">generateBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00732">invalidateBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00737">isInvalidBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">logState()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00943">resetStateVariables()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00758">scheduleBackoffPeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a1bb21c978ee1dced3878113908a6cc56"></a><!-- doxytag: member="Ieee80211Mac::basicBitrate" ref="a1bb21c978ee1dced3878113908a6cc56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">Ieee80211Mac::basicBitrate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The basic bitrate (1 or 2 Mbps) is used to transmit control frames </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00083">83</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00845">buildACKFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00870">buildCTSFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00830">buildDataFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00858">buildRTSFrame()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00696">scheduleCTSTimeoutPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00678">scheduleDataTimeoutPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00886">setBasicBitrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a66661cea11c9b2bcf69076d85b70c3"></a><!-- doxytag: member="Ieee80211Mac::bitrate" ref="a1a66661cea11c9b2bcf69076d85b70c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">Ieee80211Mac::bitrate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The bitrate is used to send data and mgmt frames; be sure to use a valid 802.11 bitrate </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00080">80</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l01002">computeFrameDuration()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a189e3641d647b4d4c506e709a0873467"></a><!-- doxytag: member="Ieee80211Mac::cwMinBroadcast" ref="a189e3641d647b4d4c506e709a0873467" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a189e3641d647b4d4c506e709a0873467">Ieee80211Mac::cwMinBroadcast</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Contention window size for broadcast messages. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00111">111</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00623">computeBackoffPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a620e6bf7dd85045ca5f65164a47e1cfd"></a><!-- doxytag: member="Ieee80211Mac::cwMinData" ref="a620e6bf7dd85045ca5f65164a47e1cfd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">Ieee80211Mac::cwMinData</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Minimum contention window. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00108">108</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00623">computeBackoffPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a82794398a43a1d936ba16d893871e0e2"></a><!-- doxytag: member="Ieee80211Mac::endBackoff" ref="a82794398a43a1d936ba16d893871e0e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a82794398a43a1d936ba16d893871e0e2">Ieee80211Mac::endBackoff</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>End of the backoff period </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00206">206</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00764">cancelBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00749">decreaseBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00049">Ieee80211Mac()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00758">scheduleBackoffPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00060">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a5bec0576b30d76fcb7f6546a83e6194a"></a><!-- doxytag: member="Ieee80211Mac::endDIFS" ref="a5bec0576b30d76fcb7f6546a83e6194a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">Ieee80211Mac::endDIFS</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>End of the Data Inter-Frame Time period </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00203">203</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00672">cancelDIFSPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00049">Ieee80211Mac()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00658">scheduleDIFSPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00060">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f69601950c961a483e33c1455390f9a"></a><!-- doxytag: member="Ieee80211Mac::endReserve" ref="a0f69601950c961a483e33c1455390f9a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">Ieee80211Mac::endReserve</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>End of medium reserve period (NAV) when two other nodes were communicating on the channel </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00212">212</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00227">handleSelfMsg()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00049">Ieee80211Mac()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00962">isMediumFree()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00957">isMediumStateChange()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00701">scheduleReservePeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00060">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a72b8ec2bcb1b505a709eab0ff96799dc"></a><!-- doxytag: member="Ieee80211Mac::endSIFS" ref="a72b8ec2bcb1b505a709eab0ff96799dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">Ieee80211Mac::endSIFS</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>End of the Short Inter-Frame Time period </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00200">200</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00982">getFrameReceivedBeforeSIFS()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00049">Ieee80211Mac()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00651">scheduleSIFSPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00773">sendACKFrameOnEndSIFS()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00813">sendCTSFrameOnEndSIFS()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00787">sendDataFrameOnEndSIFS()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00060">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a27bd612a3164002020b5c315fb096f79"></a><!-- doxytag: member="Ieee80211Mac::endTimeout" ref="a27bd612a3164002020b5c315fb096f79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">Ieee80211Mac::endTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Timeout after the transmission of an RTS, a CTS, or a DATA frame </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00209">209</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00690">cancelTimeoutPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00049">Ieee80211Mac()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00684">scheduleBroadcastTimeoutPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00696">scheduleCTSTimeoutPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00678">scheduleDataTimeoutPeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00060">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="af6a8a67f828409cf76bf3c3f0fd6d35b"></a><!-- doxytag: member="Ieee80211Mac::fragmentationThreshold" ref="af6a8a67f828409cf76bf3c3f0fd6d35b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="class_ieee80211_mac.html#af6a8a67f828409cf76bf3c3f0fd6d35b">Ieee80211Mac::fragmentationThreshold</a> = 2346<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Messages longer than this threshold will be sent in multiple fragments. see spec 361 </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00114">114</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00237">handleUpperMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="a43b47b9bec83a94863108b1b3ae34bb6"></a><!-- doxytag: member="Ieee80211Mac::fsm" ref="a43b47b9bec83a94863108b1b3ae34bb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cFSM <a class="el" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">Ieee80211Mac::fsm</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00137">137</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00266">handleCommand()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">logState()</a>.</p>

</div>
</div>
<a class="anchor" id="aae4419ab39198abdf1fc8955b07e5e20"></a><!-- doxytag: member="Ieee80211Mac::lastReceiveFailed" ref="aae4419ab39198abdf1fc8955b07e5e20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20">Ieee80211Mac::lastReceiveFailed</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Indicates that the last frame received had bit errors in it or there was a collision during receiving the frame. If this flag is set, then the MAC will wait EIFS instead of DIFS period of time in WAITDIFS state. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00156">156</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00658">scheduleDIFSPeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a06b55f6481683d64db13605b27b9537a"></a><!-- doxytag: member="Ieee80211Mac::maxQueueSize" ref="a06b55f6481683d64db13605b27b9537a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a">Ieee80211Mac::maxQueueSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maximum number of frames in the queue; should be set in the omnetpp.ini </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00086">86</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00237">handleUpperMsg()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="add8e4e32b5dc5f2e4960563eb457ed40"></a><!-- doxytag: member="Ieee80211Mac::mediumStateChange" ref="add8e4e32b5dc5f2e4960563eb457ed40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">Ieee80211Mac::mediumStateChange</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Radio state change self message. Currently this is optimized away and sent directly </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00215">215</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00049">Ieee80211Mac()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00957">isMediumStateChange()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00324">receiveChangeNotification()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00701">scheduleReservePeriod()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00060">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d34e2aa99b6fd38ef07005d8cc7be99"></a><!-- doxytag: member="Ieee80211Mac::mode" ref="a4d34e2aa99b6fd38ef07005d8cc7be99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a> <a class="el" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">Ieee80211Mac::mode</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00146">146</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">logState()</a>.</p>

</div>
</div>
<a class="anchor" id="a591c8f37742e3960afb1a50df3e6673f"></a><!-- doxytag: member="Ieee80211Mac::nav" ref="a591c8f37742e3960afb1a50df3e6673f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">Ieee80211Mac::nav</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True during network allocation period. This flag is present to be able to watch this state. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00162">162</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00227">handleSelfMsg()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">logState()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00701">scheduleReservePeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cde61a60a0ba921bec433b5d1113c84"></a><!-- doxytag: member="Ieee80211Mac::numCollision" ref="a7cde61a60a0ba921bec433b5d1113c84" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">Ieee80211Mac::numCollision</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00224">224</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="aea9e86c3d8f9db03a6a9dcab0bd36df7"></a><!-- doxytag: member="Ieee80211Mac::numGivenUp" ref="aea9e86c3d8f9db03a6a9dcab0bd36df7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#aea9e86c3d8f9db03a6a9dcab0bd36df7">Ieee80211Mac::numGivenUp</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00223">223</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00904">giveUpCurrentTransmission()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a44149d10cf8b6f6b1f906d68d2157714"></a><!-- doxytag: member="Ieee80211Mac::numReceived" ref="a44149d10cf8b6f6b1f906d68d2157714" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">Ieee80211Mac::numReceived</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00226">226</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="af5839182df73e2f63a767d1927a5ac16"></a><!-- doxytag: member="Ieee80211Mac::numReceivedBroadcast" ref="af5839182df73e2f63a767d1927a5ac16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#af5839182df73e2f63a767d1927a5ac16">Ieee80211Mac::numReceivedBroadcast</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00228">228</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a3258861ee26e78b2378160233ae6f5"></a><!-- doxytag: member="Ieee80211Mac::numRetry" ref="a5a3258861ee26e78b2378160233ae6f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a5a3258861ee26e78b2378160233ae6f5">Ieee80211Mac::numRetry</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00221">221</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00911">retryCurrentTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a5451e3e610dca607187e39f176d91120"></a><!-- doxytag: member="Ieee80211Mac::numSent" ref="a5451e3e610dca607187e39f176d91120" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a5451e3e610dca607187e39f176d91120">Ieee80211Mac::numSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00225">225</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6376b24ff26d3f78706f5b8656c3167"></a><!-- doxytag: member="Ieee80211Mac::numSentBroadcast" ref="aa6376b24ff26d3f78706f5b8656c3167" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#aa6376b24ff26d3f78706f5b8656c3167">Ieee80211Mac::numSentBroadcast</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00227">227</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c4930c1fd531fe421935816d8856443"></a><!-- doxytag: member="Ieee80211Mac::numSentWithoutRetry" ref="a6c4930c1fd531fe421935816d8856443" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a6c4930c1fd531fe421935816d8856443">Ieee80211Mac::numSentWithoutRetry</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00222">222</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="ad747f5e3abaad56a3fb03ec39426c27e"></a><!-- doxytag: member="Ieee80211Mac::pendingRadioConfigMsg" ref="ad747f5e3abaad56a3fb03ec39426c27e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">Ieee80211Mac::pendingRadioConfigMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The last change channel message received and not yet sent to the physical layer, or NULL. The message will be sent down when the state goes to IDLE or DEFER next time. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00193">193</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00266">handleCommand()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00049">Ieee80211Mac()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00926">sendDownPendingRadioConfigMsg()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00060">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a59cc1a59362db4fdf48b81b8e7f62d2e"></a><!-- doxytag: member="Ieee80211Mac::queueModule" ref="a59cc1a59362db4fdf48b81b8e7f62d2e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_passive_queue.html">IPassiveQueue</a>* <a class="el" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">Ieee80211Mac::queueModule</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Passive queue module to request messages from </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00187">187</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00209">initializeQueueModule()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00987">popTransmissionQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a08443ed66fd8def7cdbce3953cb732c0"></a><!-- doxytag: member="Ieee80211Mac::radioState" ref="a08443ed66fd8def7cdbce3953cb732c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449">RadioState::State</a> <a class="el" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">Ieee80211Mac::radioState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Physical radio (medium) state copied from physical layer </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00174">174</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00962">isMediumFree()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00957">isMediumStateChange()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">logState()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00324">receiveChangeNotification()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00701">scheduleReservePeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a84539589b7715d29c69d1191a521f45b"></a><!-- doxytag: member="Ieee80211Mac::radioStateVector" ref="a84539589b7715d29c69d1191a521f45b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">Ieee80211Mac::radioStateVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00230">230</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00324">receiveChangeNotification()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf4fd54bc69d8695ebc5d1f86d4cacdd"></a><!-- doxytag: member="Ieee80211Mac::retryCounter" ref="aaf4fd54bc69d8695ebc5d1f86d4cacdd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#aaf4fd54bc69d8695ebc5d1f86d4cacdd">Ieee80211Mac::retryCounter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of frame retransmission attempts, this is a simpification of SLRC and SSRC, see 9.2.4 in the spec </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00171">171</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00742">generateBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l01012">logState()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00943">resetStateVariables()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00911">retryCurrentTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a1bb03a4c3ab2056a1a3d9cab41388613"></a><!-- doxytag: member="Ieee80211Mac::rtsThreshold" ref="a1bb03a4c3ab2056a1a3d9cab41388613" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613">Ieee80211Mac::rtsThreshold</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The minimum length of MPDU to use RTS/CTS mechanism. 0 means always, extremely large value means never. See spec 9.2.6 and 361. </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00092">92</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a109b2d75d8fc4201674478a72bb31762"></a><!-- doxytag: member="Ieee80211Mac::sequenceNumber" ref="a109b2d75d8fc4201674478a72bb31762" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762">Ieee80211Mac::sequenceNumber</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sequence number to be assigned to the next frame </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00149">149</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00237">handleUpperMsg()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a784de8a16601c48f1f792adc9a35c321"></a><!-- doxytag: member="Ieee80211Mac::stateVector" ref="a784de8a16601c48f1f792adc9a35c321" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">Ieee80211Mac::stateVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00229">229</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ef4f6b331003c2e2054428fa4534bd9"></a><!-- doxytag: member="Ieee80211Mac::transmissionLimit" ref="a7ef4f6b331003c2e2054428fa4534bd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">Ieee80211Mac::transmissionLimit</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maximum number of transmissions for a message. This includes the initial transmission and all subsequent retransmissions. Thus a value 0 is invalid and a value 1 means no retransmissions. See: dot11ShortRetryLimit on page 484. 'This attribute shall indicate the maximum number of transmission attempts of a frame, the length of which is less than or equal to dot11RTSThreshold, that shall be made before a failure condition is indicated. The default value of this attribute shall be 7' </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00105">105</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00623">computeBackoffPeriod()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00076">initialize()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00911">retryCurrentTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="ac08493c34df5189f10a3199ba60f95c4"></a><!-- doxytag: member="Ieee80211Mac::transmissionQueue" ref="ac08493c34df5189f10a3199ba60f95c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_mac.html#a79de4fc04e68ba3e7154437b1b6bf6de">Ieee80211DataOrMgmtFrameList</a> <a class="el" href="class_ieee80211_mac.html#ac08493c34df5189f10a3199ba60f95c4">Ieee80211Mac::transmissionQueue</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Messages received from upper layer and to be transmitted later </p>

<p>Definition at line <a class="el" href="_ieee80211_mac_8h_source.html#l00177">177</a> of file <a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a>.</p>

<p>Referenced by <a class="el" href="_ieee80211_mac_8cc_source.html#l00921">getCurrentTransmission()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00237">handleUpperMsg()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00346">handleWithFSM()</a>, <a class="el" href="_ieee80211_mac_8cc_source.html#l00987">popTransmissionQueue()</a>, and <a class="el" href="_ieee80211_mac_8cc_source.html#l00943">resetStateVariables()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ieee80211_mac_8h_source.html">Ieee80211Mac.h</a></li>
<li><a class="el" href="_ieee80211_mac_8cc_source.html">Ieee80211Mac.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Mar 23 17:08:33 2010 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
