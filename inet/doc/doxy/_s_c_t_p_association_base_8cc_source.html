<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: SCTPAssociationBase.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_493eba74639f722aa88bd3d010f621b5.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_34a6fbd47227bd78d46d19b24c6937db.html">transport</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e67923df1ecdd2b80c0adc9653e0b0d1.html">sctp</a>
  </div>
</div>
<div class="contents">
<h1>SCTPAssociationBase.cc</h1><a href="_s_c_t_p_association_base_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// Copyright (C) 2005-2010 Irene Ruengeler</span>
<a name="l00003"></a>00003 <span class="comment">// Copyright (C) 2009-2010 Thomas Dreibholz</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">// This program is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment">// modify it under the terms of the GNU General Public License</span>
<a name="l00007"></a>00007 <span class="comment">// as published by the Free Software Foundation; either version 2</span>
<a name="l00008"></a>00008 <span class="comment">// of the License, or (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<a name="l00013"></a>00013 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment">//</span>
<a name="l00015"></a>00015 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment">// along with this program; if not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="_s_c_t_p_8h.html">SCTP.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="_s_c_t_p_association_8h.html">SCTPAssociation.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="_s_c_t_p_command__m_8h.html">SCTPCommand_m.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="_i_p_control_info__m_8h.html">IPControlInfo_m.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="_s_c_t_p_queue_8h.html">SCTPQueue.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="_s_c_t_p_algorithm_8h.html">SCTPAlgorithm.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="_i_pv4_interface_data_8h.html">IPv4InterfaceData.h</a>&quot;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="class_s_c_t_p_path_variables.html#ad374aa007507de709b8467da3cda8a48">00033</a> <a class="code" href="class_s_c_t_p_path_variables.html#ad374aa007507de709b8467da3cda8a48">SCTPPathVariables::SCTPPathVariables</a>(<span class="keyword">const</span> <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>&amp; addr, <a class="code" href="class_s_c_t_p_association.html">SCTPAssociation</a>* assoc)
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035     <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a> interfaceTableAccess;
<a name="l00036"></a>00036 
<a name="l00037"></a>00037     <a class="code" href="class_s_c_t_p_path_variables.html#a43a3921618e861146d92b98a291162df">association</a>                  = assoc;
<a name="l00038"></a>00038     <a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>                = addr;
<a name="l00039"></a>00039     <a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a>                   = <span class="keyword">true</span>;
<a name="l00040"></a>00040     <a class="code" href="class_s_c_t_p_path_variables.html#afb5df73d90e27abfe7ca3108beb051f6">confirmed</a>                    = <span class="keyword">false</span>;
<a name="l00041"></a>00041     <a class="code" href="class_s_c_t_p_path_variables.html#ae9cc9a0892d63b98a38c6c1efd4753af">primaryPathCandidate</a>         = <span class="keyword">false</span>;
<a name="l00042"></a>00042     <a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a>               = 0;
<a name="l00043"></a>00043     <a class="code" href="class_s_c_t_p_path_variables.html#a84ec7c29f37f62dc3e142f38e41ee3f9">pathErrorThreshold</a>       = assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#adacca069df6aab5b3a093e0575204bf8">getSctpMain</a>()-&gt;par(<span class="stringliteral">&quot;pathMaxRetrans&quot;</span>);
<a name="l00044"></a>00044     <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_path_variables.html#a84ec7c29f37f62dc3e142f38e41ee3f9">pathErrorThreshold</a>) {
<a name="l00045"></a>00045         <a class="code" href="class_s_c_t_p_path_variables.html#a84ec7c29f37f62dc3e142f38e41ee3f9">pathErrorThreshold</a> = <a class="code" href="_s_c_t_p_association_8h.html#aa6f5df5823e404f2ed03ef4d28f64bbd">PATH_MAX_RETRANS</a>;
<a name="l00046"></a>00046     }
<a name="l00047"></a>00047     <a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>                      = assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#adacca069df6aab5b3a093e0575204bf8">getSctpMain</a>()-&gt;par(<span class="stringliteral">&quot;rtoInitial&quot;</span>);
<a name="l00048"></a>00048     <a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a>             = <a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
<a name="l00049"></a>00049     <span class="keywordtype">double</span> interval              = (double)assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#adacca069df6aab5b3a093e0575204bf8">getSctpMain</a>()-&gt;par(<span class="stringliteral">&quot;hbInterval&quot;</span>);
<a name="l00050"></a>00050     <span class="keywordflow">if</span> (!interval) {
<a name="l00051"></a>00051         interval = <a class="code" href="_s_c_t_p_association_8h.html#a7a7650e106bfeeba73c2c572138644df">HB_INTERVAL</a>;
<a name="l00052"></a>00052     }
<a name="l00053"></a>00053     <a class="code" href="class_s_c_t_p_path_variables.html#a7d1aef839313bbde64bfb12f4ddb3852">heartbeatIntervalTimeout</a> = <a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>+interval;
<a name="l00054"></a>00054     <a class="code" href="class_s_c_t_p_path_variables.html#ae266c152e209421111fd4948dd539dd5">srtt</a>                         = <a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
<a name="l00055"></a>00055     <a class="code" href="class_s_c_t_p_path_variables.html#a57ce948271655a42d047708102b5c7e4">lastAckTime</a>                  = 0;
<a name="l00056"></a>00056     <a class="code" href="class_s_c_t_p_path_variables.html#aef4eb456f3a0da1e92d670e13cae325a">forceHb</a>                      = <span class="keyword">false</span>;
<a name="l00057"></a>00057     <a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a>            = 0;
<a name="l00058"></a>00058     <a class="code" href="class_s_c_t_p_path_variables.html#a19295abae2184555be3bfd07b3b6c411">queuedBytes</a>                  = 0;
<a name="l00059"></a>00059     <a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>             = 0;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     <a class="code" href="class_routing_table_access.html">RoutingTableAccess</a> routingTableAccess;
<a name="l00062"></a>00062     <span class="keyword">const</span> <a class="code" href="class_interface_entry.html">InterfaceEntry</a>* rtie = routingTableAccess.<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>()-&gt;<a class="code" href="class_i_routing_table.html#a0dda4a87779a949284ccead75001fa30">getInterfaceForDestAddr</a>(<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>.<a class="code" href="class_i_pv_x_address.html#a00acd2be0fc0f254afb2eb7540a4ea6e">get4</a>());
<a name="l00063"></a>00063     <span class="keywordflow">if</span>(rtie == NULL) {
<a name="l00064"></a>00064         opp_error(<span class="stringliteral">&quot;No interface for remote address %s found!&quot;</span>, <a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>.<a class="code" href="class_i_pv_x_address.html#a00acd2be0fc0f254afb2eb7540a4ea6e">get4</a>().<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>().c_str());
<a name="l00065"></a>00065     }
<a name="l00066"></a>00066     <a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>                         = rtie-&gt;<a class="code" href="class_interface_entry.html#adbe3ede6fb4652fbfc4abbe2c924cc3b">getMTU</a>();
<a name="l00067"></a>00067     <a class="code" href="class_s_c_t_p_path_variables.html#a570d5d2f28369483f6dca824643d4959">rttvar</a>                       = 0.0;
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <a class="code" href="class_s_c_t_p_path_variables.html#a51b69ce98294df53f826541717c0b2bd">cwndTimeout</a>                  = <a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
<a name="l00070"></a>00070     <a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>                         = 0;
<a name="l00071"></a>00071     <a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a>                     = 0;
<a name="l00072"></a>00072     <a class="code" href="class_s_c_t_p_path_variables.html#addd9854620d83632deb90ab177416ed7">updateTime</a>                   = 0.0;
<a name="l00073"></a>00073     <a class="code" href="class_s_c_t_p_path_variables.html#abc1e62f4d74471fcb495fec933bc4a45">fastRecoveryExitPoint</a>        = 0;
<a name="l00074"></a>00074     <a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a>           = <span class="keyword">false</span>;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076     <a class="code" href="class_s_c_t_p_path_variables.html#ae6fd6147ac0475508eb44ae76c518cda">numberOfFastRetransmissions</a>      = 0;
<a name="l00077"></a>00077     <a class="code" href="class_s_c_t_p_path_variables.html#a2b7ee405351a9463919c483bce4539b5">numberOfTimerBasedRetransmissions</a> = 0;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     <span class="keywordtype">char</span> str[128];
<a name="l00080"></a>00080     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;HB_TIMER %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00081"></a>00081     <a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a> = <span class="keyword">new</span> cMessage(str);
<a name="l00082"></a>00082     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;HB_INT_TIMER %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00083"></a>00083     <a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a> = <span class="keyword">new</span> cMessage(str);
<a name="l00084"></a>00084     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;CWND_TIMER %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00085"></a>00085     <a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a> = <span class="keyword">new</span> cMessage(str);
<a name="l00086"></a>00086     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;RTX_TIMER %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00087"></a>00087     <a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a> = <span class="keyword">new</span> cMessage(str);
<a name="l00088"></a>00088     HeartbeatTimer-&gt;setContextPointer(<a class="code" href="class_s_c_t_p_path_variables.html#a43a3921618e861146d92b98a291162df">association</a>);
<a name="l00089"></a>00089     HeartbeatIntervalTimer-&gt;setContextPointer(<a class="code" href="class_s_c_t_p_path_variables.html#a43a3921618e861146d92b98a291162df">association</a>);
<a name="l00090"></a>00090     CwndTimer-&gt;setContextPointer(<a class="code" href="class_s_c_t_p_path_variables.html#a43a3921618e861146d92b98a291162df">association</a>);
<a name="l00091"></a>00091     T3_RtxTimer-&gt;setContextPointer(<a class="code" href="class_s_c_t_p_path_variables.html#a43a3921618e861146d92b98a291162df">association</a>);
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;RTO %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00094"></a>00094     <a class="code" href="class_s_c_t_p_path_variables.html#a44bb5884f543cbf4672d0dadfa04dae4">statisticsPathRTO</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00095"></a>00095     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;RTT %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00096"></a>00096     <a class="code" href="class_s_c_t_p_path_variables.html#a2c6f1c4f3eea5efadb824e736a8a994f">statisticsPathRTT</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;Slow Start Threshold %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00099"></a>00099     <a class="code" href="class_s_c_t_p_path_variables.html#a08fb6a06a9cea4372205f71def18b92d">statisticsPathSSthresh</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00100"></a>00100     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;Congestion Window %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00101"></a>00101     <a class="code" href="class_s_c_t_p_path_variables.html#aa8f1c2ca64547edefc8d8cd319b777da">statisticsPathCwnd</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;TSN Sent %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00104"></a>00104     <a class="code" href="class_s_c_t_p_path_variables.html#a8ae926fbdb0df69e50c5b75b4ddb1719">pathTSN</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00105"></a>00105     snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;TSN Received %d:%s&quot;</span>,assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>,addr.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92">str</a>().c_str());
<a name="l00106"></a>00106     <a class="code" href="class_s_c_t_p_path_variables.html#ac4fe3e23a3de7f0b27d9c897c706c416">pathRcvdTSN</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <a class="code" href="class_s_c_t_p_path_info.html">SCTPPathInfo</a>* pinfo = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_path_info.html">SCTPPathInfo</a>(<span class="stringliteral">&quot;pinfo&quot;</span>);
<a name="l00111"></a>00111     pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a418c5b75ec8cbeefece0d15ae02de263">setRemoteAddress</a>(addr);
<a name="l00112"></a>00112     T3_RtxTimer-&gt;setControlInfo(pinfo);
<a name="l00113"></a>00113     HeartbeatTimer-&gt;setControlInfo(pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a10bbede35c176736652af4b02efc84dc">dup</a>());
<a name="l00114"></a>00114     HeartbeatIntervalTimer-&gt;setControlInfo(pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a10bbede35c176736652af4b02efc84dc">dup</a>());
<a name="l00115"></a>00115     CwndTimer-&gt;setControlInfo(pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a10bbede35c176736652af4b02efc84dc">dup</a>());
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="class_s_c_t_p_path_variables.html#a835dc472459f0182d2986aa82a7267f0">00119</a> <a class="code" href="class_s_c_t_p_path_variables.html#a835dc472459f0182d2986aa82a7267f0">SCTPPathVariables::~SCTPPathVariables</a>()
<a name="l00120"></a>00120 {
<a name="l00121"></a>00121     <a class="code" href="class_s_c_t_p_path_variables.html#a08fb6a06a9cea4372205f71def18b92d">statisticsPathSSthresh</a>-&gt;record(0);
<a name="l00122"></a>00122     <a class="code" href="class_s_c_t_p_path_variables.html#aa8f1c2ca64547edefc8d8cd319b777da">statisticsPathCwnd</a>-&gt;record(0);
<a name="l00123"></a>00123     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_path_variables.html#a08fb6a06a9cea4372205f71def18b92d">statisticsPathSSthresh</a>;
<a name="l00124"></a>00124     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_path_variables.html#aa8f1c2ca64547edefc8d8cd319b777da">statisticsPathCwnd</a>;
<a name="l00125"></a>00125     <a class="code" href="class_s_c_t_p_path_variables.html#a44bb5884f543cbf4672d0dadfa04dae4">statisticsPathRTO</a>-&gt;record(0);
<a name="l00126"></a>00126     <a class="code" href="class_s_c_t_p_path_variables.html#a2c6f1c4f3eea5efadb824e736a8a994f">statisticsPathRTT</a>-&gt;record(0);
<a name="l00127"></a>00127     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_path_variables.html#a44bb5884f543cbf4672d0dadfa04dae4">statisticsPathRTO</a>;
<a name="l00128"></a>00128     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_path_variables.html#a2c6f1c4f3eea5efadb824e736a8a994f">statisticsPathRTT</a>;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_path_variables.html#a8ae926fbdb0df69e50c5b75b4ddb1719">pathTSN</a>;
<a name="l00131"></a>00131     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_path_variables.html#ac4fe3e23a3de7f0b27d9c897c706c416">pathRcvdTSN</a>;
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="keyword">const</span> <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="code" href="class_s_c_t_p_data_variables.html#ae82232420916f1378e2d4862148b342b">SCTPDataVariables::zeroAddress</a> = <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>);
<a name="l00137"></a>00137 
<a name="l00138"></a><a class="code" href="class_s_c_t_p_data_variables.html#a38b741ca8babe3d6aeed710b8d41fbc9">00138</a> <a class="code" href="class_s_c_t_p_data_variables.html#a38b741ca8babe3d6aeed710b8d41fbc9">SCTPDataVariables::SCTPDataVariables</a>()
<a name="l00139"></a>00139 {
<a name="l00140"></a>00140     <a class="code" href="class_s_c_t_p_data_variables.html#aaafb0500520fdd9936987be73f6a27ae">userData</a>                     = NULL;
<a name="l00141"></a>00141     <a class="code" href="class_s_c_t_p_data_variables.html#a8a53863ea46d99a486027459aed60c49">ordered</a>                      = <span class="keyword">true</span>;
<a name="l00142"></a>00142     <a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>                          = 0;
<a name="l00143"></a>00143     <a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>                          = 0;
<a name="l00144"></a>00144     <a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a>                          = 0;
<a name="l00145"></a>00145     <a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a>                          = 0;
<a name="l00146"></a>00146     <a class="code" href="class_s_c_t_p_data_variables.html#a960213e567faeed87d9ce98e993177a4">ppid</a>                         = 0;
<a name="l00147"></a>00147     <a class="code" href="class_s_c_t_p_data_variables.html#a0311c740e321088d6ba6626816993e86">gapReports</a>                   = 0;
<a name="l00148"></a>00148     <a class="code" href="class_s_c_t_p_data_variables.html#aa381bd2154d7b6846ae8fe7694b96a27">enqueuingTime</a>                = 0;
<a name="l00149"></a>00149     <a class="code" href="class_s_c_t_p_data_variables.html#a347b1c461d332be999051c3d1f0abaa1">sendTime</a>                     = 0;
<a name="l00150"></a>00150     <a class="code" href="class_s_c_t_p_data_variables.html#a5be5a13e25e285a3d4730f34cd62febb">ackTime</a>                      = 0;
<a name="l00151"></a>00151     <a class="code" href="class_s_c_t_p_data_variables.html#a6c7a768cb1d61bdce6b7c3ddef9dc9b3">expiryTime</a>                   = 0;
<a name="l00152"></a>00152     <a class="code" href="class_s_c_t_p_data_variables.html#a29289f62fc4878819b3b5ba132bf2c80">enqueuedInTransmissionQ</a>      = <span class="keyword">false</span>;
<a name="l00153"></a>00153     <a class="code" href="class_s_c_t_p_data_variables.html#a6c09db8c77fdfceda4b5386f14093b8e">hasBeenAcked</a>                 = <span class="keyword">false</span>;
<a name="l00154"></a>00154     <a class="code" href="class_s_c_t_p_data_variables.html#ac25b1776cd86480fba00adf7ffc3d281">hasBeenReneged</a>               = <span class="keyword">false</span>;
<a name="l00155"></a>00155     <a class="code" href="class_s_c_t_p_data_variables.html#aaa76f0b0c8c7a31a466f08b1c1f917eb">hasBeenAbandoned</a>             = <span class="keyword">false</span>;
<a name="l00156"></a>00156     <a class="code" href="class_s_c_t_p_data_variables.html#ab5595233870d7a9b0dc74b020ae7c9a1">hasBeenFastRetransmitted</a>     = <span class="keyword">false</span>;
<a name="l00157"></a>00157     <a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a>          = <span class="keyword">false</span>;
<a name="l00158"></a>00158     <a class="code" href="class_s_c_t_p_data_variables.html#a94a819d04c30aa67e9cd921c6b86bfd2">lastDestination</a>              = NULL;
<a name="l00159"></a>00159     <a class="code" href="class_s_c_t_p_data_variables.html#a568faae4e745aa0621f2b0d813f89b3f">nextDestination</a>              = NULL;
<a name="l00160"></a>00160     <a class="code" href="class_s_c_t_p_data_variables.html#a6eedec9207db978af948dad29a64a63f">initialDestination</a>           = NULL;
<a name="l00161"></a>00161     <a class="code" href="class_s_c_t_p_data_variables.html#af9410192fb1add58020e8c9fd14928c1">numberOfTransmissions</a>        = 0;
<a name="l00162"></a>00162     <a class="code" href="class_s_c_t_p_data_variables.html#a7670756ef2a46e2f2185a047d19a3c03">numberOfRetransmissions</a>      = 0;
<a name="l00163"></a>00163     <a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>                     = 0;
<a name="l00164"></a>00164 }
<a name="l00165"></a>00165 
<a name="l00166"></a><a class="code" href="class_s_c_t_p_data_variables.html#a0d7869ba8ee603584a5cc4dc10ffabe0">00166</a> <a class="code" href="class_s_c_t_p_data_variables.html#a0d7869ba8ee603584a5cc4dc10ffabe0">SCTPDataVariables::~SCTPDataVariables</a>()
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="class_s_c_t_p_state_variables.html#a052d86410c436923db0a38b80c6b5087">00170</a> <a class="code" href="class_s_c_t_p_state_variables.html#a052d86410c436923db0a38b80c6b5087">SCTPStateVariables::SCTPStateVariables</a>()
<a name="l00171"></a>00171 {
<a name="l00172"></a>00172     <a class="code" href="class_s_c_t_p_state_variables.html#a9f45fb5b9a76bdf0ada04c3ed9920215">active</a>                    = <span class="keyword">false</span>;
<a name="l00173"></a>00173     <a class="code" href="class_s_c_t_p_state_variables.html#ab5bac08be4a3710fe623e93aa65e74ff">fork</a>                          = <span class="keyword">false</span>;
<a name="l00174"></a>00174     <a class="code" href="class_s_c_t_p_state_variables.html#ac8337c67683db37ec84abbd26674c880">initReceived</a>              = <span class="keyword">false</span>;
<a name="l00175"></a>00175     <a class="code" href="class_s_c_t_p_state_variables.html#a94e82891931e37de20d6b6ac7594ec37">cookieEchoReceived</a>    = <span class="keyword">false</span>;
<a name="l00176"></a>00176     <a class="code" href="class_s_c_t_p_state_variables.html#abd34f0ccea3ab4994c355f56bbd18cf9">ackPointAdvanced</a>          = <span class="keyword">false</span>;
<a name="l00177"></a>00177     <a class="code" href="class_s_c_t_p_state_variables.html#a20b24275e45b18df329a7254563e306d">swsAvoidanceInvoked</a>   = <span class="keyword">false</span>;
<a name="l00178"></a>00178     <a class="code" href="class_s_c_t_p_state_variables.html#ab44c46d79f8a2504941b5903322b0448">firstChunkReceived</a>    = <span class="keyword">false</span>;
<a name="l00179"></a>00179     <a class="code" href="class_s_c_t_p_state_variables.html#a49bcbea974aa73223c6e0a7d4d945094">probingIsAllowed</a>          = <span class="keyword">false</span>;
<a name="l00180"></a>00180     <a class="code" href="class_s_c_t_p_state_variables.html#a0f8385151a29c83819ff5c1756ab359b">zeroWindowProbing</a>         = <span class="keyword">true</span>;
<a name="l00181"></a>00181     <a class="code" href="class_s_c_t_p_state_variables.html#a6fd0531775e07b02c22015ba75fca544">alwaysBundleSack</a>          = <span class="keyword">true</span>;
<a name="l00182"></a>00182     <a class="code" href="class_s_c_t_p_state_variables.html#a8e59e86d19565705ea4e9d0aadb9500d">fastRecoverySupported</a>  = <span class="keyword">true</span>;
<a name="l00183"></a>00183     <a class="code" href="class_s_c_t_p_state_variables.html#a96e740d1f0d386449c13853fadff56b1">reactivatePrimaryPath</a>  = <span class="keyword">false</span>;
<a name="l00184"></a>00184     <a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a>          = <span class="keyword">false</span>;
<a name="l00185"></a>00185     <a class="code" href="class_s_c_t_p_state_variables.html#a500772d1bd6a1f6e0cc7a507c1f36331">dataChunkReceived</a>         = <span class="keyword">false</span>;
<a name="l00186"></a>00186     <a class="code" href="class_s_c_t_p_state_variables.html#ae92fceb56eefd5079a1c5e103d8448a7">sackAllowed</a>               = <span class="keyword">false</span>;
<a name="l00187"></a>00187     <a class="code" href="class_s_c_t_p_state_variables.html#aa94663dad983ed08a217f8f7793a123e">resetPending</a>              = <span class="keyword">false</span>;
<a name="l00188"></a>00188     <a class="code" href="class_s_c_t_p_state_variables.html#a5d87341e572a5fa3688aa9616cae8a39">stopReceiving</a>             = <span class="keyword">false</span>;
<a name="l00189"></a>00189     <a class="code" href="class_s_c_t_p_state_variables.html#a56857fa487544bee2d16f8dc47640650">stopOldData</a>               = <span class="keyword">false</span>;
<a name="l00190"></a>00190     <a class="code" href="class_s_c_t_p_state_variables.html#ab6ab9d382caab3e8ddc90ba57c9b7ac2">stopSending</a>               = <span class="keyword">false</span>;
<a name="l00191"></a>00191     <a class="code" href="class_s_c_t_p_state_variables.html#a9d2eece95c4b0aa2efbb1959d7fa78a4">inOut</a>                         = <span class="keyword">false</span>;
<a name="l00192"></a>00192     <a class="code" href="class_s_c_t_p_state_variables.html#a3fe954a9fd21fd90abbb9258fc285afe">queueUpdate</a>               = <span class="keyword">false</span>;
<a name="l00193"></a>00193     <a class="code" href="class_s_c_t_p_state_variables.html#a6bd6ae8cce21386df977220128383b02">firstDataSent</a>             = <span class="keyword">false</span>;
<a name="l00194"></a>00194     <a class="code" href="class_s_c_t_p_state_variables.html#a56e6edeafb32e19e42da2889d4a16202">peerWindowFull</a>            = <span class="keyword">false</span>;
<a name="l00195"></a>00195     <a class="code" href="class_s_c_t_p_state_variables.html#af8e2711f085b1e488c23ce354b1f74af">zeroWindow</a>                = <span class="keyword">false</span>;
<a name="l00196"></a>00196     <a class="code" href="class_s_c_t_p_state_variables.html#a9944dafac700403ebec699e66ca34d03">appSendAllowed</a>            = <span class="keyword">true</span>;
<a name="l00197"></a>00197     <a class="code" href="class_s_c_t_p_state_variables.html#a15e698ea1bfe5c22fcca07ed4127fa8e">noMoreOutstanding</a>         = <span class="keyword">false</span>;
<a name="l00198"></a>00198     <a class="code" href="class_s_c_t_p_state_variables.html#a73e7f37155db04e3b7e243d9cae98699">primaryPath</a>               = NULL;
<a name="l00199"></a>00199     <a class="code" href="class_s_c_t_p_state_variables.html#a9f057ad775e7e3187bc6f522820b0ac2">lastDataSourceAddress</a>  = <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>);
<a name="l00200"></a>00200     <a class="code" href="class_s_c_t_p_state_variables.html#ab71f05d4300e0fd95bd5e371c3615979">shutdownChunk</a>             = NULL;
<a name="l00201"></a>00201     <a class="code" href="class_s_c_t_p_state_variables.html#af687fe1d41e0f02e4f393ce45a83dd19">initChunk</a>                 = NULL;
<a name="l00202"></a>00202     <a class="code" href="class_s_c_t_p_state_variables.html#a977478bfadd7d0296a7a805ec9e56a95">cookieChunk</a>               = NULL;
<a name="l00203"></a>00203     <a class="code" href="class_s_c_t_p_state_variables.html#a6417b860ec08633082497392bdb40325">sctpmsg</a>                   = NULL;
<a name="l00204"></a>00204     <a class="code" href="class_s_c_t_p_state_variables.html#aef86f64e9eba32144f7d4d997e7df229">bytesToRetransmit</a>         = 0;
<a name="l00205"></a>00205     <a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>         = <a class="code" href="_s_c_t_p_association_8h.html#ad0253f70ce80e86b5da3240da37f4334">SCTP_TIMEOUT_INIT_REXMIT</a>;
<a name="l00206"></a>00206     <a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a>                 = <a class="code" href="_s_c_t_p_association_8h.html#a95dcb2aedbaa89336f449b678b2e1fb9">SCTP_DEFAULT_ARWND</a>;
<a name="l00207"></a>00207     <a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a>                = 0;
<a name="l00208"></a>00208     <a class="code" href="class_s_c_t_p_state_variables.html#a4b4a00ea47be687ea159b82507339cdb">initRetransCounter</a>    = 0;
<a name="l00209"></a>00209     <a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>                   = 0;
<a name="l00210"></a>00210     <a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>                   = 0;
<a name="l00211"></a>00211     <a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>                = 0;
<a name="l00212"></a>00212     <a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>    = 0;
<a name="l00213"></a>00213     <a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a>       = 0;
<a name="l00214"></a>00214     <a class="code" href="class_s_c_t_p_state_variables.html#af02f163ebe6c28c874d7734bbc2a31bf">highestTsnStored</a>          = 0;
<a name="l00215"></a>00215     <a class="code" href="class_s_c_t_p_state_variables.html#a75ecf4e5a99369bb4bcae9a184afb22d">nextRSid</a>                      = 0;
<a name="l00216"></a>00216     <a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a>                      = 0;
<a name="l00217"></a>00217     <a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>   = 0;
<a name="l00218"></a>00218     <a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a>                      = 0;
<a name="l00219"></a>00219     <a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a>       = 0;
<a name="l00220"></a>00220     <a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a>                 = 0;
<a name="l00221"></a>00221     <a class="code" href="class_s_c_t_p_state_variables.html#a9a4b261bb104828e3d1c14f89cdc3a6d">outstandingBytes</a>          = 0;
<a name="l00222"></a>00222     <a class="code" href="class_s_c_t_p_state_variables.html#ac841a6063c1f2d092f82c64cd67534b6">messagesToPush</a>            = 0;
<a name="l00223"></a>00223     <a class="code" href="class_s_c_t_p_state_variables.html#acc81bc8fb8290aa91b916ebb83be9114">pushMessagesLeft</a>          = 0;
<a name="l00224"></a>00224     <a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>                   = 0;
<a name="l00225"></a>00225     <a class="code" href="class_s_c_t_p_state_variables.html#a53f16f4ee6a644577c8df76bdfabec46">msgNum</a>                    = 0;
<a name="l00226"></a>00226     <a class="code" href="class_s_c_t_p_state_variables.html#a63d6881509cd0a115838e7c7e9c8c87f">bytesRcvd</a>                 = 0;
<a name="l00227"></a>00227     <a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a>                = 0;
<a name="l00228"></a>00228     <a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>   = 0;
<a name="l00229"></a>00229     <a class="code" href="class_s_c_t_p_state_variables.html#a7214666b7e6034940d7f2de8ecac9dc5">lastSendQueueAbated</a>   = simTime();
<a name="l00230"></a>00230     <a class="code" href="class_s_c_t_p_state_variables.html#aee5ec4417497e5bba3cf95f79f902da6">queuedMessages</a>            = 0;
<a name="l00231"></a>00231     <a class="code" href="class_s_c_t_p_state_variables.html#a37fa23a9f841d820bc9e5114e76c5823">queueLimit</a>                = 0;
<a name="l00232"></a>00232     <a class="code" href="class_s_c_t_p_state_variables.html#aefe40bfaf6b42fb98381cfd3201aa2f3">probingTimeout</a>            = 1;
<a name="l00233"></a>00233     <a class="code" href="class_s_c_t_p_state_variables.html#adcb6627c45d909e52eba1e3ff4e05b29">numRequests</a>               = 0;
<a name="l00234"></a>00234     <a class="code" href="class_s_c_t_p_state_variables.html#aaf9ea2f913888ba783ae161088669ea6">numMsgsReq</a>.resize(65536);
<a name="l00235"></a>00235     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 65536; i++) {
<a name="l00236"></a>00236         <a class="code" href="class_s_c_t_p_state_variables.html#aaf9ea2f913888ba783ae161088669ea6">numMsgsReq</a>[i] = 0;
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="_s_c_t_p_association_8h.html#a6334da21c08d8d9b4c63879c8cce9633">MAX_GAP_COUNT</a>; i++) {
<a name="l00239"></a>00239         <a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i] = 0;
<a name="l00240"></a>00240         <a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i]   = 0;
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 32; i++) {
<a name="l00243"></a>00243         <a class="code" href="class_s_c_t_p_state_variables.html#ae69a3b5689a645e53211833683509972">localTieTag</a>[i] = 0;
<a name="l00244"></a>00244         <a class="code" href="class_s_c_t_p_state_variables.html#a524b3dbfe700d9d54e23186893490422">peerTieTag</a>[i]   = 0;
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246     <a class="code" href="class_s_c_t_p_state_variables.html#afae7ac97aa2a2a82b5ee5b2e60891b47">count</a> = 0;
<a name="l00247"></a>00247 }
<a name="l00248"></a>00248 
<a name="l00249"></a><a class="code" href="class_s_c_t_p_state_variables.html#ad55aee072a7c22e66250deea3d84c57d">00249</a> <a class="code" href="class_s_c_t_p_state_variables.html#ad55aee072a7c22e66250deea3d84c57d">SCTPStateVariables::~SCTPStateVariables</a>()
<a name="l00250"></a>00250 {
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 <span class="comment">//</span>
<a name="l00255"></a>00255 <span class="comment">// FSM framework, SCTP FSM</span>
<a name="l00256"></a>00256 <span class="comment">//</span>
<a name="l00257"></a>00257 
<a name="l00258"></a><a class="code" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">00258</a> <a class="code" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation::SCTPAssociation</a>(<a class="code" href="class_s_c_t_p.html">SCTP</a>* _module, int32 _appGateIndex, int32 _assocId)
<a name="l00259"></a>00259 {
<a name="l00260"></a>00260     <span class="comment">// ====== Initialize variables ===========================================</span>
<a name="l00261"></a>00261     <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>                            = _module;
<a name="l00262"></a>00262     <a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>                        = _appGateIndex;
<a name="l00263"></a>00263     <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>                             = _assocId;
<a name="l00264"></a>00264     <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>                           = 0;
<a name="l00265"></a>00265     <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>                          = 0;
<a name="l00266"></a>00266     <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>                           = 0;
<a name="l00267"></a>00267     <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>                            = 0;
<a name="l00268"></a>00268     <a class="code" href="class_s_c_t_p_association.html#aa66d26fc71717ca6158c03a212cc4071">numberOfRemoteAddresses</a>             = 0;
<a name="l00269"></a>00269     <a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>                      = <a class="code" href="_s_c_t_p_association_8h.html#a34c7c7c047d941065871d33ce7f97bc3">SCTP_DEFAULT_INBOUND_STREAMS</a>;
<a name="l00270"></a>00270     <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>                     = <a class="code" href="_s_c_t_p_association_8h.html#af09cc91ff86473911040f475082ff0de">SCTP_DEFAULT_OUTBOUND_STREAMS</a>;
<a name="l00271"></a>00271     <span class="comment">// queues and algorithm will be created on active or passive open</span>
<a name="l00272"></a>00272     <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>                       = NULL;
<a name="l00273"></a>00273     <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>                     = NULL;
<a name="l00274"></a>00274     <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>                       = NULL;
<a name="l00275"></a>00275     <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>                               = NULL;
<a name="l00276"></a>00276     <a class="code" href="class_s_c_t_p_association.html#a29f900c7ca380c1671bb957109fc338b">sackPeriod</a>                          = <a class="code" href="_s_c_t_p_association_8h.html#a5f8211f50dea40fa08f410e3631eb1fe">SACK_DELAY</a>;
<a name="l00277"></a>00277 <span class="comment">/*</span>
<a name="l00278"></a>00278 <span class="comment">    totalCwndAdjustmentTime         = simTime();</span>
<a name="l00279"></a>00279 <span class="comment">    lastTotalSSthresh                   = ~0;</span>
<a name="l00280"></a>00280 <span class="comment">    lastTotalCwnd                       = ~0;*/</span>
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <a class="code" href="class_s_c_t_p_association.html#a904881907985d7c23d7dc3cf630834aa">cumTsnAck</a>                           = NULL;
<a name="l00283"></a>00283     <a class="code" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a>                           = NULL;
<a name="l00284"></a>00284     <a class="code" href="class_s_c_t_p_association.html#a136b47892a6e405c494f055dc50eaec6">numGapBlocks</a>                        = NULL;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286     <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> = 0;
<a name="l00287"></a>00287     <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> = 0;
<a name="l00288"></a>00288     <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aa860967a47451b6ea090f0c3b81156de">roomSumRcvStreams</a>      = 0;
<a name="l00289"></a>00289     <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>                         = <span class="keyword">false</span>;
<a name="l00290"></a>00290     <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>                        = <span class="keyword">false</span>;
<a name="l00291"></a>00291     <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a>                   = 0;
<a name="l00292"></a>00292 
<a name="l00293"></a>00293     <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationBase::SCTPAssociation(): new assocId=&quot;</span>
<a name="l00294"></a>00294               &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a> &lt;&lt; endl;
<a name="l00295"></a>00295 
<a name="l00296"></a>00296     <span class="comment">// ====== FSM ============================================================</span>
<a name="l00297"></a>00297     <span class="keywordtype">char</span> fsmName[64];
<a name="l00298"></a>00298     snprintf(fsmName, <span class="keyword">sizeof</span>(fsmName), <span class="stringliteral">&quot;fsm-%d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00299"></a>00299     <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a> = <span class="keyword">new</span> cFSM();
<a name="l00300"></a>00300     <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;setName(fsmName);
<a name="l00301"></a>00301     <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;setState(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>);
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <span class="comment">// ====== Path Info ======================================================</span>
<a name="l00305"></a>00305     <a class="code" href="class_s_c_t_p_path_info.html">SCTPPathInfo</a>* pinfo = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_path_info.html">SCTPPathInfo</a>(<span class="stringliteral">&quot;pathInfo&quot;</span>);
<a name="l00306"></a>00306     pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a418c5b75ec8cbeefece0d15ae02de263">setRemoteAddress</a>(<a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>));
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <span class="comment">// ====== Timers =========================================================</span>
<a name="l00309"></a>00309     <span class="keywordtype">char</span> timerName[128];
<a name="l00310"></a>00310     snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T1_INIT of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00311"></a>00311     <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a> = <span class="keyword">new</span> cMessage(timerName);
<a name="l00312"></a>00312     snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T2_SHUTDOWN of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00313"></a>00313     <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a> = <span class="keyword">new</span> cMessage(timerName);
<a name="l00314"></a>00314     snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T5_SHUTDOWN_GUARD of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00315"></a>00315     <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a> = <span class="keyword">new</span> cMessage(timerName);
<a name="l00316"></a>00316     snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;SACK_TIMER of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00317"></a>00317     <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a> = <span class="keyword">new</span> cMessage(timerName);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319     <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a35089977465533256142ee442021b18d">testTimeout</a> &gt; 0){
<a name="l00320"></a>00320         <a class="code" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;StartTesting&quot;</span>);
<a name="l00321"></a>00321         <a class="code" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a>-&gt;setContextPointer(<span class="keyword">this</span>);
<a name="l00322"></a>00322         <a class="code" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a>-&gt;setControlInfo(pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a10bbede35c176736652af4b02efc84dc">dup</a>());
<a name="l00323"></a>00323         <a class="code" href="class_s_c_t_p_association.html#a9093fdb20d9c289d699376be9b3b80ba">scheduleTimeout</a>(<a class="code" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a>, <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a35089977465533256142ee442021b18d">testTimeout</a>);
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325     <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>-&gt;setContextPointer(<span class="keyword">this</span>);
<a name="l00326"></a>00326     <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>-&gt;setContextPointer(<span class="keyword">this</span>);
<a name="l00327"></a>00327     <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>-&gt;setContextPointer(<span class="keyword">this</span>);
<a name="l00328"></a>00328     <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>-&gt;setContextPointer(<span class="keyword">this</span>);
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>-&gt;setControlInfo(pinfo);
<a name="l00331"></a>00331     <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>-&gt;setControlInfo(pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a10bbede35c176736652af4b02efc84dc">dup</a>());
<a name="l00332"></a>00332     <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>-&gt;setControlInfo(pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a10bbede35c176736652af4b02efc84dc">dup</a>());
<a name="l00333"></a>00333     <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>-&gt;setControlInfo(pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#a10bbede35c176736652af4b02efc84dc">dup</a>());
<a name="l00334"></a>00334 
<a name="l00335"></a>00335     <span class="comment">// ====== Output vectors =================================================</span>
<a name="l00336"></a>00336     <span class="keywordtype">char</span> vectorName[128];
<a name="l00337"></a>00337     snprintf(vectorName, <span class="keyword">sizeof</span>(vectorName), <span class="stringliteral">&quot;Advertised Receiver Window %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00338"></a>00338     <a class="code" href="class_s_c_t_p_association.html#a28d421b793ab5db3b09737c0f9f4b905">advRwnd</a> = <span class="keyword">new</span> cOutVector(vectorName);
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     <span class="comment">// ====== Stream scheduling ==============================================</span>
<a name="l00341"></a>00341     <a class="code" href="class_s_c_t_p_association.html#a4b6cafcaa2a8ec5379637f837ca5550a">ssModule</a> = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;ssModule&quot;</span>);
<a name="l00342"></a>00342     <span class="keywordflow">switch</span> (<a class="code" href="class_s_c_t_p_association.html#a4b6cafcaa2a8ec5379637f837ca5550a">ssModule</a>)
<a name="l00343"></a>00343     {
<a name="l00344"></a>00344         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a75eb0a6ff44280b6261fbc9a3b0cee9ca9e805af736d9be20caf33f5ec0dc1d47">ROUND_ROBIN</a>:
<a name="l00345"></a>00345             <a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#a5796699025095f8e6c57aaff4b5d3538">ssInitStreams</a>    = &amp;<a class="code" href="class_s_c_t_p_association.html#ae6aa9f8b9a817bb3caddb96c68b2b9c5">SCTPAssociation::initStreams</a>;
<a name="l00346"></a>00346             <a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#ad1b6db0c49758dcf9cb642afec4ea4a7">ssGetNextSid</a>     = &amp;<a class="code" href="class_s_c_t_p_association.html#af82770db14bde55545184d74ffc6ea75">SCTPAssociation::streamScheduler</a>;
<a name="l00347"></a>00347             <a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#a4a2658a2c708281402b52571029ec7f7">ssUsableStreams</a>  = &amp;<a class="code" href="class_s_c_t_p_association.html#a38fd6b713baffb261f409aec60a3c279">SCTPAssociation::numUsableStreams</a>;
<a name="l00348"></a>00348             <span class="keywordflow">break</span>;
<a name="l00349"></a>00349     }
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a><a class="code" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">00352</a> <a class="code" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">SCTPAssociation::~SCTPAssociation</a>()
<a name="l00353"></a>00353 {
<a name="l00354"></a>00354     <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Destructor SCTPAssociation&quot;</span> &lt;&lt; endl;
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>;
<a name="l00357"></a>00357     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>;
<a name="l00358"></a>00358     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>;
<a name="l00359"></a>00359     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>;
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a28d421b793ab5db3b09737c0f9f4b905">advRwnd</a>;
<a name="l00362"></a>00362     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a904881907985d7c23d7dc3cf630834aa">cumTsnAck</a>;
<a name="l00363"></a>00363     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a136b47892a6e405c494f055dc50eaec6">numGapBlocks</a>;
<a name="l00364"></a>00364     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a>;
<a name="l00365"></a>00365 
<a name="l00366"></a>00366 
<a name="l00367"></a>00367     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>;
<a name="l00368"></a>00368     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>;
<a name="l00369"></a>00369     <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>;
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a><a class="code" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">00372</a> <span class="keywordtype">bool</span> <a class="code" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">SCTPAssociation::processTimer</a>(cMessage *msg)
<a name="l00373"></a>00373 {
<a name="l00374"></a>00374     <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = NULL;
<a name="l00375"></a>00375 
<a name="l00376"></a>00376     <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; timer expired at &quot;</span>&lt;&lt;simulation.getSimTime()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     <a class="code" href="class_s_c_t_p_path_info.html">SCTPPathInfo</a>* pinfo = check_and_cast&lt;<a class="code" href="class_s_c_t_p_path_info.html">SCTPPathInfo</a>*&gt;(msg-&gt;getControlInfo());
<a name="l00379"></a>00379     <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> addr = pinfo-&gt;<a class="code" href="class_s_c_t_p_path_info.html#af992fc9653fdc9d094fa59ad3e1724fd">getRemoteAddress</a>();
<a name="l00380"></a>00380 
<a name="l00381"></a>00381     <span class="keywordflow">if</span> (addr != <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>))
<a name="l00382"></a>00382         path = <a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(addr);
<a name="l00383"></a>00383      <span class="comment">// first do actions</span>
<a name="l00384"></a>00384     <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> event;
<a name="l00385"></a>00385     <span class="keyword">event</span> = <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
<a name="l00386"></a>00386     <span class="keywordflow">if</span> (msg==<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>)
<a name="l00387"></a>00387     {
<a name="l00388"></a>00388         <a class="code" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT</a>(event);
<a name="l00389"></a>00389     }
<a name="l00390"></a>00390     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg==<a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>)
<a name="l00391"></a>00391     {
<a name="l00392"></a>00392     <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;simulation.getSimTime()&lt;&lt;<span class="stringliteral">&quot; delayed Sack: cTsnAck=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>&lt;&lt;<span class="stringliteral">&quot; highestTsnReceived=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>&lt;&lt;<span class="stringliteral">&quot; lastTsnReceived=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5cc697d3b68b64aca76152385d5cb6f0">lastTsnReceived</a>&lt;&lt;<span class="stringliteral">&quot; ackState=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a>&lt;&lt;<span class="stringliteral">&quot; numGaps=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00393"></a>00393         <a class="code" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack</a>();
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg==<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>)
<a name="l00396"></a>00396     {
<a name="l00397"></a>00397         <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>);
<a name="l00398"></a>00398         <a class="code" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN</a>(event);
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg==<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>)
<a name="l00401"></a>00401     {
<a name="l00402"></a>00402         <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>);
<a name="l00403"></a>00403         <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab71f05d4300e0fd95bd5e371c3615979">shutdownChunk</a>;
<a name="l00404"></a>00404         <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3afc5424e52a8919715c5f0433afcdd3b5">SCTP_I_CONN_LOST</a>);
<a name="l00405"></a>00405         <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
<a name="l00406"></a>00406         <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path!=NULL &amp;&amp; msg==path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>)
<a name="l00409"></a>00409     {
<a name="l00410"></a>00410         <a class="code" href="class_s_c_t_p_association.html#ac2468daebc456147e6568b99650165ca">process_TIMEOUT_HEARTBEAT_INTERVAL</a>(path, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aef4eb456f3a0da1e92d670e13cae325a">forceHb</a>);
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path!=NULL &amp;&amp; msg==path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>)
<a name="l00413"></a>00413     {
<a name="l00414"></a>00414         <a class="code" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT</a>(path);
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path!=NULL &amp;&amp; msg==path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>)
<a name="l00417"></a>00417     {
<a name="l00418"></a>00418         <a class="code" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX</a>(path);
<a name="l00419"></a>00419     }
<a name="l00420"></a>00420     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path!=NULL &amp;&amp; msg==path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>)
<a name="l00421"></a>00421     {
<a name="l00422"></a>00422         (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#adb4779550ec7802f1087a2bcc82fc13a">ccUpdateAfterCwndTimeout</a>)(path);
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(msg-&gt;getName(), <span class="stringliteral">&quot;StartTesting&quot;</span>)==0)
<a name="l00425"></a>00425     {
<a name="l00426"></a>00426         <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a0c82ce1676bd810f2defcce17bd1bd0a">testing</a> == <span class="keyword">false</span>)
<a name="l00427"></a>00427         {
<a name="l00428"></a>00428             <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a0c82ce1676bd810f2defcce17bd1bd0a">testing</a> = <span class="keyword">true</span>;
<a name="l00429"></a>00429             <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;set testing to true\n&quot;</span>;
<a name="l00430"></a>00430         }
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432     <span class="keywordflow">else</span>
<a name="l00433"></a>00433     {
<a name="l00434"></a>00434         <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#a1829a98985752d015733b71fd058c10d">processTimer</a>(msg, event);
<a name="l00435"></a>00435     }
<a name="l00436"></a>00436      <span class="comment">// then state transitions</span>
<a name="l00437"></a>00437      <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(event);
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00440"></a><a class="code" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">00440</a> <span class="keywordtype">bool</span> <a class="code" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">SCTPAssociation::processSCTPMessage</a>(<a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>*           sctpmsg,
<a name="l00441"></a>00441                                                       <span class="keyword">const</span> <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>&amp; msgSrcAddr,
<a name="l00442"></a>00442                                                       <span class="keyword">const</span> <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>&amp; msgDestAddr)
<a name="l00443"></a>00443 {
<a name="l00444"></a>00444     <a class="code" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief</a>();
<a name="l00445"></a>00445 
<a name="l00446"></a>00446     <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>  = msgDestAddr;
<a name="l00447"></a>00447     <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>  = sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message___base.html#a813a5ab9db3e1c4ae354bf44de934a5b">getDestPort</a>();
<a name="l00448"></a>00448     <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a> = msgSrcAddr;
<a name="l00449"></a>00449     <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a> = sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message___base.html#a558f8691efac42febdfd422ce52a762c">getSrcPort</a>();
<a name="l00450"></a>00450 
<a name="l00451"></a>00451     <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message</a>(sctpmsg, msgSrcAddr, msgDestAddr);
<a name="l00452"></a>00452 }
<a name="l00453"></a>00453 
<a name="l00454"></a><a class="code" href="class_s_c_t_p_association.html#a946f737e0ae27932aba2899aa24d2660">00454</a> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> <a class="code" href="class_s_c_t_p_association.html#a946f737e0ae27932aba2899aa24d2660">SCTPAssociation::preanalyseAppCommandEvent</a>(int32 commandCode)
<a name="l00455"></a>00455 {
<a name="l00456"></a>00456     <span class="keywordflow">switch</span> (commandCode) {
<a name="l00457"></a>00457     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea408002f9592dcab6ceb60f683bee7e83">SCTP_C_ASSOCIATE</a>:           <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab1a4ad21616e72e2d7c4bef4b392d674">SCTP_E_ASSOCIATE</a>;
<a name="l00458"></a>00458     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea4660ef9a2685b60b3aa2388461c43deb">SCTP_C_OPEN_PASSIVE</a>:        <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda9f1fd7fc777cc9fcb87a49cd64412c70">SCTP_E_OPEN_PASSIVE</a>;
<a name="l00459"></a>00459     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463eacb34da0d2a8bc9071c353d5e92ab0d94">SCTP_C_SEND</a>:                <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>;
<a name="l00460"></a>00460     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea36c1bad836563c7468a9877491b1db5d">SCTP_C_CLOSE</a>:               <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>;
<a name="l00461"></a>00461     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea7d45ef3a5ccaa811a5edd77a342bc3b0">SCTP_C_ABORT</a>:               <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>;
<a name="l00462"></a>00462     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea2ba582af18939c296a16e1b083e74397">SCTP_C_RECEIVE</a>:             <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda914409a350944272bbd72083b6b5281b">SCTP_E_RECEIVE</a>;
<a name="l00463"></a>00463     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea7c99f40fe26cf98c3275ca9c38bd98a3">SCTP_C_SEND_UNORDERED</a>:      <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>;
<a name="l00464"></a>00464     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea6b3b36984ab51a0714609ca913bbb54f">SCTP_C_SEND_ORDERED</a>:        <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>;
<a name="l00465"></a>00465     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea642be41f281aef49b9cb8402278be2f7">SCTP_C_PRIMARY</a>:             <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ab4fe49257ab6212a8dd336e4d07991">SCTP_E_PRIMARY</a>;
<a name="l00466"></a>00466     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea4fe02c6f134855267e6f95cf92fadee1">SCTP_C_QUEUE_MSGS_LIMIT</a>:    <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda982447e78039f557e892297768866518">SCTP_E_QUEUE_MSGS_LIMIT</a>;
<a name="l00467"></a>00467     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463eac6ae02fe564dd3a68214528a0b25eeb7">SCTP_C_QUEUE_BYTES_LIMIT</a>:   <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda3d83eea39de6b7b191caae724ae5146e">SCTP_E_QUEUE_BYTES_LIMIT</a>;
<a name="l00468"></a>00468     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea349e117c148f5b223ecef4d8334b7077">SCTP_C_SHUTDOWN</a>:            <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>;
<a name="l00469"></a>00469     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463eaaf691bde7e4b92ce33b4579760761a62">SCTP_C_NO_OUTSTANDING</a>:      <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda65d6eeb62214f93d929739b4f81cd01c">SCTP_E_SEND_SHUTDOWN_ACK</a>;
<a name="l00470"></a>00470     <span class="keywordflow">default</span>:
<a name="l00471"></a>00471         <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;commandCode=&quot;</span>&lt;&lt;commandCode&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00472"></a>00472         opp_error(<span class="stringliteral">&quot;Unknown message kind in app command&quot;</span>);
<a name="l00473"></a>00473                       <span class="keywordflow">return</span> (<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a>)0; <span class="comment">// to satisfy compiler</span>
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">00477</a> <span class="keywordtype">bool</span> <a class="code" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">SCTPAssociation::processAppCommand</a>(cPacket *msg)
<a name="l00478"></a>00478 {
<a name="l00479"></a>00479     <a class="code" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief</a>();
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     <span class="comment">// first do actions</span>
<a name="l00482"></a>00482     <a class="code" href="class_s_c_t_p_command.html">SCTPCommand</a> *sctpCommand = (<a class="code" href="class_s_c_t_p_command.html">SCTPCommand</a> *)(msg-&gt;removeControlInfo());
<a name="l00483"></a>00483     <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> <span class="keyword">event</span> = <a class="code" href="class_s_c_t_p_association.html#a946f737e0ae27932aba2899aa24d2660">preanalyseAppCommandEvent</a>(msg-&gt;getKind());
<a name="l00484"></a>00484 
<a name="l00485"></a>00485     <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;App command: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a>(event) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00486"></a>00486     <span class="keywordflow">switch</span> (event)
<a name="l00487"></a>00487     {
<a name="l00488"></a>00488         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab1a4ad21616e72e2d7c4bef4b392d674">SCTP_E_ASSOCIATE</a>: <a class="code" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE</a>(event, sctpCommand, msg); <span class="keywordflow">break</span>;
<a name="l00489"></a>00489         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda9f1fd7fc777cc9fcb87a49cd64412c70">SCTP_E_OPEN_PASSIVE</a>: <a class="code" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE</a>(event, sctpCommand, msg); <span class="keywordflow">break</span>;
<a name="l00490"></a>00490         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>: <a class="code" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND</a>(event, sctpCommand, msg); <span class="keywordflow">break</span>;
<a name="l00491"></a>00491         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>: <a class="code" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE</a>(event); <span class="keywordflow">break</span>;
<a name="l00492"></a>00492         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: <a class="code" href="class_s_c_t_p_association.html#a0604d2735afd938650aa540e1ed7b9d1">process_ABORT</a>(event); <span class="keywordflow">break</span>;
<a name="l00493"></a>00493         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda914409a350944272bbd72083b6b5281b">SCTP_E_RECEIVE</a>: <a class="code" href="class_s_c_t_p_association.html#ae086afec043034fc936b270b71c1e6f4">process_RECEIVE_REQUEST</a>(event, sctpCommand); <span class="keywordflow">break</span>;
<a name="l00494"></a>00494         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ab4fe49257ab6212a8dd336e4d07991">SCTP_E_PRIMARY</a>: <a class="code" href="class_s_c_t_p_association.html#a1f578c7e75df4066f4aaf34b8f195f6f">process_PRIMARY</a>(event, sctpCommand); <span class="keywordflow">break</span>;
<a name="l00495"></a>00495         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda3d83eea39de6b7b191caae724ae5146e">SCTP_E_QUEUE_BYTES_LIMIT</a>: <a class="code" href="class_s_c_t_p_association.html#a0bce41a300c3dfdab9d2ca190d5790d3">process_QUEUE_BYTES_LIMIT</a>(sctpCommand); <span class="keywordflow">break</span>;
<a name="l00496"></a>00496         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda982447e78039f557e892297768866518">SCTP_E_QUEUE_MSGS_LIMIT</a>:    <a class="code" href="class_s_c_t_p_association.html#a5f8be6b52ad2164e96fd19799dfd8e01">process_QUEUE_MSGS_LIMIT</a>(sctpCommand); <span class="keywordflow">break</span>;
<a name="l00497"></a>00497         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>: <span class="comment">/*sendShutdown*/</span>
<a name="l00498"></a>00498         <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTP_E_SHUTDOWN in state &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00499"></a>00499             <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>) {
<a name="l00500"></a>00500             <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;send shutdown ack\n&quot;</span>;
<a name="l00501"></a>00501                 <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
<a name="l00502"></a>00502                 }
<a name="l00503"></a>00503             <span class="keywordflow">break</span>;  <span class="comment">//I.R.</span>
<a name="l00504"></a>00504         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda309375f495c30e879128bda85711a6b9">SCTP_E_STOP_SENDING</a>: <span class="keywordflow">break</span>;
<a name="l00505"></a>00505         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda65d6eeb62214f93d929739b4f81cd01c">SCTP_E_SEND_SHUTDOWN_ACK</a>:
<a name="l00506"></a>00506                 <span class="comment">/*if (fsm-&gt;getState()==SCTP_S_SHUTDOWN_RECEIVED &amp;&amp; getOutstandingBytes()==0</span>
<a name="l00507"></a>00507 <span class="comment">                    &amp;&amp; qCounter.roomSumSendStreams==0 &amp;&amp; transmissionQ-&gt;getQueueSize()==0)</span>
<a name="l00508"></a>00508 <span class="comment">                {</span>
<a name="l00509"></a>00509 <span class="comment">                    sendShutdownAck(state-&gt;primaryPathIndex);</span>
<a name="l00510"></a>00510 <span class="comment">                }*/</span>
<a name="l00511"></a>00511                 <span class="keywordflow">break</span>;
<a name="l00512"></a>00512         <span class="keywordflow">default</span>: opp_error(<span class="stringliteral">&quot;wrong event code&quot;</span>);
<a name="l00513"></a>00513     }
<a name="l00514"></a>00514     <span class="keyword">delete</span> sctpCommand;
<a name="l00515"></a>00515     <span class="comment">// then state transitions</span>
<a name="l00516"></a>00516     <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(event);
<a name="l00517"></a>00517 }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519 
<a name="l00520"></a><a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">00520</a> <span class="keywordtype">bool</span> <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">SCTPAssociation::performStateTransition</a>(<span class="keyword">const</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a>&amp; event)
<a name="l00521"></a>00521 {
<a name="l00522"></a>00522     <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;performStateTransition\n&quot;</span>;
<a name="l00523"></a>00523     <span class="keywordflow">if</span> (event==<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>)   <span class="comment">// e.g. discarded segment</span>
<a name="l00524"></a>00524     {
<a name="l00525"></a>00525         ev &lt;&lt; <span class="stringliteral">&quot;Staying in state: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot; (no FSM event)\n&quot;</span>;
<a name="l00526"></a>00526         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529     <span class="comment">// state machine</span>
<a name="l00530"></a>00530     int32 oldState = <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState();
<a name="l00531"></a>00531     <span class="keywordflow">switch</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())
<a name="l00532"></a>00532     {
<a name="l00533"></a>00533         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>:
<a name="l00534"></a>00534             <span class="keywordflow">switch</span> (event)
<a name="l00535"></a>00535             {
<a name="l00536"></a>00536                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00537"></a>00537                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda9f1fd7fc777cc9fcb87a49cd64412c70">SCTP_E_OPEN_PASSIVE</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00538"></a>00538                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab1a4ad21616e72e2d7c4bef4b392d674">SCTP_E_ASSOCIATE</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>); <span class="keywordflow">break</span>;
<a name="l00539"></a>00539                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8aa9b5c31869bf157aa993cea077747">SCTP_E_RCV_INIT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00540"></a>00540                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00541"></a>00541                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8c4ae7bdc1d15fd08dbe454cdbf0fcb">SCTP_E_RCV_VALID_COOKIE_ECHO</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>); <span class="keywordflow">break</span>;
<a name="l00542"></a>00542                     <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00543"></a>00543                 <span class="keywordflow">default</span>:;
<a name="l00544"></a>00544             }
<a name="l00545"></a>00545             <span class="keywordflow">break</span>;
<a name="l00546"></a>00546 
<a name="l00547"></a>00547         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>:
<a name="l00548"></a>00548             <span class="keywordflow">switch</span> (event)
<a name="l00549"></a>00549             {
<a name="l00550"></a>00550                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00551"></a>00551                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00552"></a>00552                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddabad36afdf7219f94be14abb8fe080640">SCTP_E_RCV_INIT_ACK</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>); <span class="keywordflow">break</span>;
<a name="l00553"></a>00553                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8c4ae7bdc1d15fd08dbe454cdbf0fcb">SCTP_E_RCV_VALID_COOKIE_ECHO</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>); <span class="keywordflow">break</span>;
<a name="l00554"></a>00554                 <span class="keywordflow">default</span>:;
<a name="l00555"></a>00555             }
<a name="l00556"></a>00556             <span class="keywordflow">break</span>;
<a name="l00557"></a>00557 
<a name="l00558"></a>00558         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>:
<a name="l00559"></a>00559             <span class="keywordflow">switch</span> (event)
<a name="l00560"></a>00560             {
<a name="l00561"></a>00561                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00562"></a>00562                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00563"></a>00563                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2f2d1da65ad0c265e5733999458898fb">SCTP_E_RCV_COOKIE_ACK</a>:FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>); <span class="keywordflow">break</span>;
<a name="l00564"></a>00564                 <span class="keywordflow">default</span>:;
<a name="l00565"></a>00565             }
<a name="l00566"></a>00566             <span class="keywordflow">break</span>;
<a name="l00567"></a>00567         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>:
<a name="l00568"></a>00568             <span class="keywordflow">switch</span> (event)
<a name="l00569"></a>00569             {
<a name="l00570"></a>00570                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>); <span class="keywordflow">break</span>;
<a name="l00571"></a>00571                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00572"></a>00572                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00573"></a>00573                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>);    <span class="keywordflow">break</span>;
<a name="l00574"></a>00574                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda309375f495c30e879128bda85711a6b9">SCTP_E_STOP_SENDING</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>); <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab6ab9d382caab3e8ddc90ba57c9b7ac2">stopSending</a> = <span class="keyword">true</span>; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a66dc15b846de9c6aaa9516479481cdaf">lastTSN</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>-1; <span class="keywordflow">break</span>;    <span class="comment">//I.R.</span>
<a name="l00575"></a>00575                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda7712aa29c30d8415b4a4f8bcf27036dd">SCTP_E_RCV_SHUTDOWN</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>); <span class="keywordflow">break</span>;
<a name="l00576"></a>00576                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00577"></a>00577                 <span class="keywordflow">default</span>:;
<a name="l00578"></a>00578             }
<a name="l00579"></a>00579             <span class="keywordflow">break</span>;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>:
<a name="l00582"></a>00582             <span class="keywordflow">switch</span> (event)
<a name="l00583"></a>00583             {
<a name="l00584"></a>00584                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00585"></a>00585                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00586"></a>00586                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda861e58ca6562ffbfe4884eec2e704431">SCTP_E_NO_MORE_OUTSTANDING</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a0ec4d7400f71ce88a8bbce0e66c97f55">SCTP_S_SHUTDOWN_SENT</a>); <span class="keywordflow">break</span>;
<a name="l00587"></a>00587                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda7712aa29c30d8415b4a4f8bcf27036dd">SCTP_E_RCV_SHUTDOWN</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>); <span class="keywordflow">break</span>;
<a name="l00588"></a>00588                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ba625b5ddb58a87dc16748b4eef0282">SCTP_E_RCV_SHUTDOWN_ACK</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00589"></a>00589                 <span class="keywordflow">default</span>:;
<a name="l00590"></a>00590             }
<a name="l00591"></a>00591             <span class="keywordflow">break</span>;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>:
<a name="l00594"></a>00594             <span class="keywordflow">switch</span> (event)
<a name="l00595"></a>00595             {
<a name="l00596"></a>00596                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00597"></a>00597                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00598"></a>00598                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda861e58ca6562ffbfe4884eec2e704431">SCTP_E_NO_MORE_OUTSTANDING</a>:
<a name="l00599"></a>00599                             FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>);
<a name="l00600"></a>00600                     <span class="keywordflow">break</span>;
<a name="l00601"></a>00601                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>: <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>); <span class="comment">/*FSM_Goto((*fsm), SCTP_S_SHUTDOWN_ACK_SENT);*/</span> <span class="keywordflow">break</span>;
<a name="l00602"></a>00602                 <span class="keywordflow">default</span>:;
<a name="l00603"></a>00603             }
<a name="l00604"></a>00604             <span class="keywordflow">break</span>;
<a name="l00605"></a>00605 
<a name="l00606"></a>00606         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a0ec4d7400f71ce88a8bbce0e66c97f55">SCTP_S_SHUTDOWN_SENT</a>:
<a name="l00607"></a>00607             <span class="keywordflow">switch</span> (event)
<a name="l00608"></a>00608             {
<a name="l00609"></a>00609                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00610"></a>00610                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00611"></a>00611                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ba625b5ddb58a87dc16748b4eef0282">SCTP_E_RCV_SHUTDOWN_ACK</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00612"></a>00612                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda7712aa29c30d8415b4a4f8bcf27036dd">SCTP_E_RCV_SHUTDOWN</a>: <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>); FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>); <span class="keywordflow">break</span>;
<a name="l00613"></a>00613                 <span class="keywordflow">default</span>:;
<a name="l00614"></a>00614             }
<a name="l00615"></a>00615             <span class="keywordflow">break</span>;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>:
<a name="l00618"></a>00618             <span class="keywordflow">switch</span> (event)
<a name="l00619"></a>00619             {
<a name="l00620"></a>00620                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00621"></a>00621                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00622"></a>00622                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda57e8e0f4353663385300b7746ec16d6a">SCTP_E_RCV_SHUTDOWN_COMPLETE</a>:      FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
<a name="l00623"></a>00623                 <span class="keywordflow">default</span>:;
<a name="l00624"></a>00624             }
<a name="l00625"></a>00625             <span class="keywordflow">break</span>;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627     }
<a name="l00628"></a>00628 
<a name="l00629"></a>00629     <span class="keywordflow">if</span> (oldState!=<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())
<a name="l00630"></a>00630     {
<a name="l00631"></a>00631         ev &lt;&lt; <span class="stringliteral">&quot;Transition: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(oldState) &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot;    (event was: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a>(event) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
<a name="l00632"></a>00632         <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(oldState) &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot;  (on &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a>(event) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
<a name="l00633"></a>00633         <a class="code" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState());
<a name="l00634"></a>00634     }
<a name="l00635"></a>00635     <span class="keywordflow">else</span>
<a name="l00636"></a>00636     {
<a name="l00637"></a>00637         ev&lt;&lt; <span class="stringliteral">&quot;Staying in state: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot; (event was: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a>(event) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639     <span class="keywordflow">if</span> (event==<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a> &amp;&amp; oldState==<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
<a name="l00640"></a>00640         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642     <span class="keywordflow">if</span> (oldState!=<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
<a name="l00643"></a>00643     {
<a name="l00644"></a>00644         <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;return false because oldState=&quot;</span>&lt;&lt;oldState&lt;&lt;<span class="stringliteral">&quot; and new state is closed\n&quot;</span>;
<a name="l00645"></a>00645         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00646"></a>00646     }
<a name="l00647"></a>00647     <span class="keywordflow">else</span>
<a name="l00648"></a>00648         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00649"></a>00649 }
<a name="l00650"></a>00650 
<a name="l00651"></a><a class="code" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">00651</a> <span class="keywordtype">void</span> <a class="code" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">SCTPAssociation::stateEntered</a>(int32 status)
<a name="l00652"></a>00652 {
<a name="l00653"></a>00653     <span class="keywordflow">switch</span> (status)
<a name="l00654"></a>00654     {
<a name="l00655"></a>00655         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>:
<a name="l00656"></a>00656             <span class="keywordflow">break</span>;
<a name="l00657"></a>00657         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>:
<a name="l00658"></a>00658         {
<a name="l00659"></a>00659             <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;State ESTABLISHED entered&quot;</span> &lt;&lt; endl;
<a name="l00660"></a>00660             <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>);
<a name="l00661"></a>00661             <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af687fe1d41e0f02e4f393ce45a83dd19">initChunk</a>) {
<a name="l00662"></a>00662                 <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af687fe1d41e0f02e4f393ce45a83dd19">initChunk</a>;
<a name="l00663"></a>00663             }
<a name="l00664"></a>00664             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5a4195a30b502699a6fd92ce5965f15c">nagleEnabled</a>                   = (bool)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;nagleEnabled&quot;</span>);
<a name="l00665"></a>00665             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a443c8e2a234674a5b8bb385831bf147f">enableHeartbeats</a>               = (bool)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;enableHeartbeats&quot;</span>);
<a name="l00666"></a>00666             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1e7737c5f6c7fa4c3faa782f0078a9b7">numGapReports</a>                  = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;numGapReports&quot;</span>);
<a name="l00667"></a>00667             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa9fd5385ee9beba279f069309e9b0018">maxBurst</a>                       = (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;maxBurst&quot;</span>);
<a name="l00668"></a>00668                 <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5cdefe133e1a8c71203aa26631ed09c7">header</a> = 0;
<a name="l00669"></a>00669             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a>                      = (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;swsLimit&quot;</span>);
<a name="l00670"></a>00670             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8e59e86d19565705ea4e9d0aadb9500d">fastRecoverySupported</a>         = (bool)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;fastRecoverySupported&quot;</span>);
<a name="l00671"></a>00671             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a96e740d1f0d386449c13853fadff56b1">reactivatePrimaryPath</a>         = (bool)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;reactivatePrimaryPath&quot;</span>);
<a name="l00672"></a>00672             <a class="code" href="class_s_c_t_p_association.html#a29f900c7ca380c1671bb957109fc338b">sackPeriod</a>                           = (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sackPeriod&quot;</span>);
<a name="l00673"></a>00673             <a class="code" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a>                        = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sackFrequency&quot;</span>);
<a name="l00674"></a>00674             <a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html">SCTP::AssocStat</a> stat;
<a name="l00675"></a>00675             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#af6d2b88d12009123a90976f56451a43f">assocId</a>                         = <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>;
<a name="l00676"></a>00676             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#adb6d3d3bab2e33cd79cf26363c7fe6fd">start</a>                           = simulation.getSimTime();
<a name="l00677"></a>00677             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a8350bc0756ad1c9d9c4b221e0f3cbde8">stop</a>                            = 0;
<a name="l00678"></a>00678             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a3d4a454aff95cc5338209a5b55539083">rcvdBytes</a>                       = 0;
<a name="l00679"></a>00679             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#acc55fd8a06afd95c5fd58930e5537cf2">ackedBytes</a>                      = 0;
<a name="l00680"></a>00680             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#ae2d4f4001028f1aa570bdb4c68818a8a">sentBytes</a>                       = 0;
<a name="l00681"></a>00681             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a456a49c0acd0315753b9900ab720f272">transmittedBytes</a>                = 0;
<a name="l00682"></a>00682             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a375a63659531c9124b90e7dfa527d34b">numFastRtx</a>                      = 0;
<a name="l00683"></a>00683             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a4106523ad51fd8ed0b51008b63333e0e">numT3Rtx</a>                        = 0;
<a name="l00684"></a>00684             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a241f15afb831c0c4750e59ed00e8a794">numDups</a>                         = 0;
<a name="l00685"></a>00685             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a9b881501500b50607d80c7e1420b70f4">numPathFailures</a>                 = 0;
<a name="l00686"></a>00686             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a347d3a84ee0bd7c151761d96140059dc">numForwardTsn</a>                   = 0;
<a name="l00687"></a>00687             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a5fb723fc12d2858561865a432267244c">lifeTime</a>                        = 0;
<a name="l00688"></a>00688             stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#aefab702936b7f133023cab351f1578ab">throughput</a>                      = 0;
<a name="l00689"></a>00689             <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a43c9f3107b99f1c969a4d5ca9c168bd3">assocStatMap</a>[stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#af6d2b88d12009123a90976f56451a43f">assocId</a>] = stat;
<a name="l00690"></a>00690             <a class="code" href="class_s_c_t_p_association.html#a3d6c3997389c261a61cc57543111973b">ccModule</a> = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;ccModule&quot;</span>);
<a name="l00691"></a>00691             <span class="keywordflow">switch</span> (<a class="code" href="class_s_c_t_p_association.html#a3d6c3997389c261a61cc57543111973b">ccModule</a>)
<a name="l00692"></a>00692             {
<a name="l00693"></a>00693                 <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#ad9a9cbc92cb49e36c2bd8f1de35aa477aa38b2d1ce0f55ed0b36414423acf41b1">RFC4960</a>:
<a name="l00694"></a>00694                 {
<a name="l00695"></a>00695                     <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a0335ace73784010424c405e6399d2682">ccInitParams</a>                 = &amp;<a class="code" href="class_s_c_t_p_association.html#a27ab7a3f0d7e82a5b48f47e39e53dd23">SCTPAssociation::initCCParameters</a>;
<a name="l00696"></a>00696                     <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a96e83612de4220f4ae94288f12321664">ccUpdateAfterSack</a>            = &amp;<a class="code" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">SCTPAssociation::cwndUpdateAfterSack</a>;
<a name="l00697"></a>00697                     <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#adb4779550ec7802f1087a2bcc82fc13a">ccUpdateAfterCwndTimeout</a>     = &amp;<a class="code" href="class_s_c_t_p_association.html#a9a5de305f7873c84ef644dce513964cd">SCTPAssociation::cwndUpdateAfterCwndTimeout</a>;
<a name="l00698"></a>00698                     <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a295dbbfc4f7566e89d9b93a11d82d26e">ccUpdateAfterRtxTimeout</a>      = &amp;<a class="code" href="class_s_c_t_p_association.html#a53665e3333a5e7b2aae79a65b9a1482b">SCTPAssociation::cwndUpdateAfterRtxTimeout</a>;
<a name="l00699"></a>00699                     <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a85af39d34f5ec41337ccc16a4232fbe6">ccUpdateMaxBurst</a>             = &amp;<a class="code" href="class_s_c_t_p_association.html#af5c86c86388313edeeff8434266a85cd">SCTPAssociation::cwndUpdateMaxBurst</a>;
<a name="l00700"></a>00700                     <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#ad8f61b32a24107ce516331725cfe443d">ccUpdateBytesAcked</a>           = &amp;<a class="code" href="class_s_c_t_p_association.html#a356510e0d2cfb8c6770c72f29634cb93">SCTPAssociation::cwndUpdateBytesAcked</a>;
<a name="l00701"></a>00701                     <span class="keywordflow">break</span>;
<a name="l00702"></a>00702                 }
<a name="l00703"></a>00703             }
<a name="l00704"></a>00704             <a class="code" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement</a>();
<a name="l00705"></a>00705             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a> = (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sendQueueLimit&quot;</span>);
<a name="l00706"></a>00706             <a class="code" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp</a>();
<a name="l00707"></a>00707             <span class="keywordtype">char</span> str[128];
<a name="l00708"></a>00708             snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;Cumulated TSN Ack of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00709"></a>00709             <a class="code" href="class_s_c_t_p_association.html#a904881907985d7c23d7dc3cf630834aa">cumTsnAck</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00710"></a>00710             snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;Number of Gap Blocks in Last SACK of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00711"></a>00711             <a class="code" href="class_s_c_t_p_association.html#a136b47892a6e405c494f055dc50eaec6">numGapBlocks</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00712"></a>00712             snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;SendQueue of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
<a name="l00713"></a>00713             <a class="code" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a> = <span class="keyword">new</span> cOutVector(str);
<a name="l00714"></a>00714             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a> = (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sendQueueLimit&quot;</span>);
<a name="l00715"></a>00715             <a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html">SCTP::VTagPair</a> vtagPair;
<a name="l00716"></a>00716             vtagPair.<a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html#a136cc70e0344af9a4f0388b1ffeb9e12">peerVTag</a>     = <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>;
<a name="l00717"></a>00717             vtagPair.<a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html#a67fc2778b273030c911b9fc683d3510c">localVTag</a>  = <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>;
<a name="l00718"></a>00718             vtagPair.<a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html#a9b3b16f4dfff829a87b3e698fa5e21ed">localPort</a>  = <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>;
<a name="l00719"></a>00719             vtagPair.<a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html#a84ab11845673e58189b16c6053b9d24a">remotePort</a> = <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>;
<a name="l00720"></a>00720             <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#ad27c44853f019878d8c9be020c56f8d9">sctpVTagMap</a>[<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>] = vtagPair;
<a name="l00721"></a>00721             <span class="keywordflow">break</span>;
<a name="l00722"></a>00722         }
<a name="l00723"></a>00723         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>:
<a name="l00724"></a>00724         {
<a name="l00725"></a>00725             <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3ace58e516838fe8c15ac9ce67f4f4409c">SCTP_I_CLOSED</a>);
<a name="l00726"></a>00726             <span class="keywordflow">break</span>;
<a name="l00727"></a>00727         }
<a name="l00728"></a>00728         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>:
<a name="l00729"></a>00729         {
<a name="l00730"></a>00730             <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a>==0)
<a name="l00731"></a>00731                 <a class="code" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown</a>();
<a name="l00732"></a>00732             <span class="keywordflow">break</span>;
<a name="l00733"></a>00733         }
<a name="l00734"></a>00734         <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>:
<a name="l00735"></a>00735         {
<a name="l00736"></a>00736             <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Entered state SHUTDOWN_RECEIVED, osb=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>()
<a name="l00737"></a>00737                       &lt;&lt; <span class="stringliteral">&quot;, transQ=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>()
<a name="l00738"></a>00738                       &lt;&lt; <span class="stringliteral">&quot;, scount=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> &lt;&lt; endl;
<a name="l00739"></a>00739             <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a>==0) {
<a name="l00740"></a>00740                 <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
<a name="l00741"></a>00741             }
<a name="l00742"></a>00742             <span class="keywordflow">else</span> {
<a name="l00743"></a>00743                 <a class="code" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>());
<a name="l00744"></a>00744             }
<a name="l00745"></a>00745             <span class="keywordflow">break</span>;
<a name="l00746"></a>00746         }
<a name="l00747"></a>00747     }
<a name="l00748"></a>00748 }
<a name="l00749"></a>00749 
<a name="l00750"></a><a class="code" href="class_s_c_t_p_association.html#a48840034dca5052abf481f6a5753f923">00750</a> <span class="keywordtype">void</span> <a class="code" href="class_s_c_t_p_association.html#a48840034dca5052abf481f6a5753f923">SCTPAssociation::removePath</a>()
<a name="l00751"></a>00751 {
<a name="l00752"></a>00752     SCTPPathMap::iterator pathIterator;
<a name="l00753"></a>00753     <span class="keywordflow">while</span>((pathIterator = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin()) != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end())
<a name="l00754"></a>00754     {
<a name="l00755"></a>00755         <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = pathIterator-&gt;second;
<a name="l00756"></a>00756         <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; getFullPath() &lt;&lt; <span class="stringliteral">&quot; remove path &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; endl;
<a name="l00757"></a>00757         <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>);
<a name="l00758"></a>00758         <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>;
<a name="l00759"></a>00759         <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>);
<a name="l00760"></a>00760         <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;delete timer &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>-&gt;getName() &lt;&lt; endl;
<a name="l00761"></a>00761         <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>;
<a name="l00762"></a>00762         <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>);
<a name="l00763"></a>00763         <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>;
<a name="l00764"></a>00764         <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>);
<a name="l00765"></a>00765         <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>;
<a name="l00766"></a>00766         <span class="keyword">delete</span> path;
<a name="l00767"></a>00767         <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.erase(pathIterator);
<a name="l00768"></a>00768     }
<a name="l00769"></a>00769 }
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Mar 23 17:08:29 2010 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
