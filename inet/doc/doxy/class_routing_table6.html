<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: RoutingTable6 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>RoutingTable6 Class Reference</h1><!-- doxytag: class="RoutingTable6" --><!-- doxytag: inherits="INotifiable" -->
<p><code>#include &lt;<a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for RoutingTable6:</div>
<div class="dynsection">
 <div class="center">
  <img src="class_routing_table6.gif" usemap="#RoutingTable6_map" alt=""/>
  <map id="RoutingTable6_map" name="RoutingTable6_map">
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="0,0,92,24"/>
</map>
 </div>
</div>

<p><a href="class_routing_table6-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_routing_table6_1_1_dest_cache_entry.html">DestCacheEntry</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a212c6cdbc175cef88bfcc3cc17ef842d">RoutingTable6</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#aa08b78617d4f08502d746686ecf0a58c">~RoutingTable6</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a79a742fa2d94543412e183ebe0e83d3a">isRouter</a> () const </td></tr>
<tr><td colspan="2"><div class="groupHeader">Interfaces</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp756640f0aea5f5bea1cbe250a9d08989"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a24cede6c1b7ed7a17fad2525a4702851">getInterfaceByAddress</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;address)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Routing functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpbfbe3feccdee7bf1145ab03a36418b97"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#acbf9dbfff5efa25eec0982afa1bbf061">isLocalAddress</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;dest) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#af91523a83ab946e36d292337435b3679">lookupDestCache</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;dest, int &amp;outInterfaceId) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_i_pv6_route.html">IPv6Route</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#aa3ba1d17dc59f3e5d77ead359dd3a999">doLongestPrefixMatch</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;dest)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#afef0aa2431b02b3744b58238c7a73547">isPrefixPresent</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;prefix) const </td></tr>
<tr><td colspan="2"><div class="groupHeader">Managing the destination cache</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpfc1acd7c022d2d7a67b9e159d1334682"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a0b95d2a43a904e2cae8521bebe8b3335">updateDestCache</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;dest, const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;nextHopAddr, int interfaceId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a508ea0dd32bd3256348e99abe32a48a9">purgeDestCache</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a1b4f1c86d678de8ac3f873ac7de0687f">purgeDestCacheEntriesToNeighbour</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;nextHopAddr, int interfaceId)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Managing prefixes and the route table</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp48490be0430d941112313cbe7498d47b"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#ad942d6cb5b1376b132947f75924344f6">addOrUpdateOnLinkPrefix</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;destPrefix, int prefixLength, int interfaceId, simtime_t expiryTime)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a85e00922381c188efc0ad51197e5f718">removeOnLinkPrefix</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;destPrefix, int prefixLength)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#aad45eef791b41fe469357f1f4c6090bb">addOrUpdateOwnAdvPrefix</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;destPrefix, int prefixLength, int interfaceId, simtime_t expiryTime)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#adf9413825a24ef26051d8a78539dec29">addStaticRoute</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;destPrefix, int prefixLength, unsigned int interfaceId, const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;nextHop, int metric=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a50f73e181d9c5e965ad72f74f0b43c40">addDefaultRoute</a> (const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;raSrcAddr, unsigned int ifID, simtime_t routerLifetime)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#af11c468a66aa9edc3b16cc7b6b01d5bb">addRoutingProtocolRoute</a> (<a class="el" href="class_i_pv6_route.html">IPv6Route</a> *route)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#acd6b7dbf0bfa1e923366a2bcb1f309fc">removeRoute</a> (<a class="el" href="class_i_pv6_route.html">IPv6Route</a> *route)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a384a101ad5895b4cdbc796ec0fb427e3">getNumRoutes</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_pv6_route.html">IPv6Route</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a037e2206e766dff2c8cc904694feba88">getRoute</a> (int i)</td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="class_i_pv6_address.html">IPv6Address</a>, <br class="typebreak"/>
<a class="el" href="struct_routing_table6_1_1_dest_cache_entry.html">DestCacheEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#ae97d16a39dd6e82ed1fef07e2bd5ac49">DestCache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="class_i_pv6_route.html">IPv6Route</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#ae2d7a96a112758e54bb1fa5e5f41d4bc">RouteList</a></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#ac5315cdff4b757915773f1c22f273ba4">addRoute</a> (<a class="el" href="class_i_pv6_route.html">IPv6Route</a> *route)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#ab78638e39019d6ca1690d926da5f04fe">configureInterfaceForIPv6</a> (<a class="el" href="class_interface_entry.html">InterfaceEntry</a> *ie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a84a7121fd02397bfd4ea169675381e3e">assignRequiredNodeAddresses</a> (<a class="el" href="class_interface_entry.html">InterfaceEntry</a> *ie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a5d4f86dbabc31663a4bd12f50a72140f">configureInterfaceFromXML</a> (<a class="el" href="class_interface_entry.html">InterfaceEntry</a> *ie, cXMLElement *cfg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a19bf3f3581b2564834e3afda3c7181e6">numInitStages</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a3a930dca8cabc52375c754dfce15252d">initialize</a> (int stage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a3dc6e638b861a416cd1a44f8dbde473a">parseXMLConfigFile</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a3aa22d18d79d749697aba97c01e21076">handleMessage</a> (cMessage *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a7b233ea89357dd9c3cb13260e4877432">receiveChangeNotification</a> (int category, const cPolymorphic *details)</td></tr>
<tr><td colspan="2"><h2>Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a707cec2ac6652e7eb0ff97b53f70d9b9">routeLessThan</a> (const <a class="el" href="class_i_pv6_route.html">IPv6Route</a> *a, const <a class="el" href="class_i_pv6_route.html">IPv6Route</a> *b)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a0cebbe3d99a2059179fbb17dc833476d">isrouter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_routing_table6.html#ae97d16a39dd6e82ed1fef07e2bd5ac49">DestCache</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_routing_table6.html#ae2d7a96a112758e54bb1fa5e5f41d4bc">RouteList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a></td></tr>
<tr><td colspan="2"><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routing_table6.html#a9a8e6d548f687ed667d614b61d4b7ab8">operator&lt;&lt;</a> (std::ostream &amp;os, const <a class="el" href="struct_routing_table6_1_1_dest_cache_entry.html">DestCacheEntry</a> &amp;e)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Represents the <a class="el" href="class_i_pv6.html">IPv6</a> routing table and neighbour discovery data structures. This object has one instance per host or router.</p>
<p>See the NED documentation for general overview.</p>
<p>This is a simple module without gates, it requires function calls to it (message handling does nothing). Methods are provided for reading and updating the interface table and the route table, as well as for unicast and multicast routing.</p>
<p>The route table is read from a file. The route table can also be read and modified during simulation, typically by routing protocol implementations. </p>

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00102">102</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="ae97d16a39dd6e82ed1fef07e2bd5ac49"></a><!-- doxytag: member="RoutingTable6::DestCache" ref="ae97d16a39dd6e82ed1fef07e2bd5ac49" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="class_i_pv6_address.html">IPv6Address</a>,<a class="el" href="struct_routing_table6_1_1_dest_cache_entry.html">DestCacheEntry</a>&gt; <a class="el" href="class_routing_table6.html#ae97d16a39dd6e82ed1fef07e2bd5ac49">RoutingTable6::DestCache</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00119">119</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae2d7a96a112758e54bb1fa5e5f41d4bc"></a><!-- doxytag: member="RoutingTable6::RouteList" ref="ae2d7a96a112758e54bb1fa5e5f41d4bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="class_i_pv6_route.html">IPv6Route</a>*&gt; <a class="el" href="class_routing_table6.html#ae2d7a96a112758e54bb1fa5e5f41d4bc">RoutingTable6::RouteList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00124">124</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a212c6cdbc175cef88bfcc3cc17ef842d"></a><!-- doxytag: member="RoutingTable6::RoutingTable6" ref="a212c6cdbc175cef88bfcc3cc17ef842d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RoutingTable6::RoutingTable6 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00073">73</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {
<a name="l00075"></a>00075 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa08b78617d4f08502d746686ecf0a58c"></a><!-- doxytag: member="RoutingTable6::~RoutingTable6" ref="aa08b78617d4f08502d746686ecf0a58c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RoutingTable6::~RoutingTable6 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00077">77</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00078"></a>00078 {
<a name="l00079"></a>00079     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.size(); i++)
<a name="l00080"></a>00080         <span class="keyword">delete</span> <a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>[i];
<a name="l00081"></a>00081 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a50f73e181d9c5e965ad72f74f0b43c40"></a><!-- doxytag: member="RoutingTable6::addDefaultRoute" ref="a50f73e181d9c5e965ad72f74f0b43c40" args="(const IPv6Address &amp;raSrcAddr, unsigned int ifID, simtime_t routerLifetime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::addDefaultRoute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>raSrcAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>ifID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>routerLifetime</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds a default route for a host. This method requires the RA's source address and the router expiry time plus the simTime(). </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00590">590</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l01153">IPv6NeighbourDiscovery::processRAForRouterUpdates()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00592"></a>00592 {
<a name="l00593"></a>00593     <span class="comment">// create route object</span>
<a name="l00594"></a>00594     <a class="code" href="class_i_pv6_route.html">IPv6Route</a> *route = <span class="keyword">new</span> <a class="code" href="class_i_pv6_route.html">IPv6Route</a>(<a class="code" href="class_i_pv6_address.html">IPv6Address</a>(), 0, <a class="code" href="class_i_pv6_route.html#a4eac9172e292e624476a22b74478e087a7e360222defd4f4a1af6d1e70442a5c8" title="on-link prefix, from Router Advertisement">IPv6Route::FROM_RA</a>);
<a name="l00595"></a>00595     route-&gt;<a class="code" href="class_i_pv6_route.html#a7619951592a3ab6f32eb8b5c1beaf864">setInterfaceId</a>(ifID);
<a name="l00596"></a>00596     route-&gt;<a class="code" href="class_i_pv6_route.html#aafb5f10807c0d3d563c3459d99faf109">setNextHop</a>(nextHop);
<a name="l00597"></a>00597     route-&gt;<a class="code" href="class_i_pv6_route.html#a04c4ec94dbc0fa34799091a3fa7a0e8d">setMetric</a>(10);<span class="comment">//FIXME:should be filled from interface metric</span>
<a name="l00598"></a>00598 
<a name="l00599"></a>00599     <span class="comment">// then add it</span>
<a name="l00600"></a>00600     <a class="code" href="class_routing_table6.html#ac5315cdff4b757915773f1c22f273ba4">addRoute</a>(route);
<a name="l00601"></a>00601 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad942d6cb5b1376b132947f75924344f6"></a><!-- doxytag: member="RoutingTable6::addOrUpdateOnLinkPrefix" ref="ad942d6cb5b1376b132947f75924344f6" args="(const IPv6Address &amp;destPrefix, int prefixLength, int interfaceId, simtime_t expiryTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::addOrUpdateOnLinkPrefix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prefixLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interfaceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>expiryTime</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add on-link prefix (route of type FROM_RA), or update existing one. To be called from code processing on-link prefixes in Router Advertisements. Expiry time can be derived from the Valid Lifetime field in the Router Advertisements.</p>
<p>NOTE: This method does NOT update the lifetime of matching addresses in the <a class="el" href="class_i_interface_table.html">IInterfaceTable</a> (see <a class="el" href="class_i_pv6_interface_data.html">IPv6InterfaceData</a>); that has to be done separately. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00483">483</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l01278">IPv6NeighbourDiscovery::processRAPrefixInfo()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00485"></a>00485 {
<a name="l00486"></a>00486     <span class="comment">// see if prefix exists in table</span>
<a name="l00487"></a>00487     <a class="code" href="class_i_pv6_route.html">IPv6Route</a> *route = NULL;
<a name="l00488"></a>00488     <span class="keywordflow">for</span> (RouteList::iterator it=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.begin(); it!=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.end(); it++)
<a name="l00489"></a>00489     {
<a name="l00490"></a>00490         <span class="keywordflow">if</span> ((*it)-&gt;getSrc()==<a class="code" href="class_i_pv6_route.html#a4eac9172e292e624476a22b74478e087a7e360222defd4f4a1af6d1e70442a5c8" title="on-link prefix, from Router Advertisement">IPv6Route::FROM_RA</a> &amp;&amp; (*it)-&gt;getDestPrefix()==destPrefix &amp;&amp; (*it)-&gt;getPrefixLength()==prefixLength)
<a name="l00491"></a>00491         {
<a name="l00492"></a>00492             route = *it;
<a name="l00493"></a>00493             <span class="keywordflow">break</span>;
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497     <span class="keywordflow">if</span> (route==NULL)
<a name="l00498"></a>00498     {
<a name="l00499"></a>00499         <span class="comment">// create new route object</span>
<a name="l00500"></a>00500         <a class="code" href="class_i_pv6_route.html">IPv6Route</a> *route = <span class="keyword">new</span> <a class="code" href="class_i_pv6_route.html">IPv6Route</a>(destPrefix, prefixLength, <a class="code" href="class_i_pv6_route.html#a4eac9172e292e624476a22b74478e087a7e360222defd4f4a1af6d1e70442a5c8" title="on-link prefix, from Router Advertisement">IPv6Route::FROM_RA</a>);
<a name="l00501"></a>00501         route-&gt;<a class="code" href="class_i_pv6_route.html#a7619951592a3ab6f32eb8b5c1beaf864">setInterfaceId</a>(interfaceId);
<a name="l00502"></a>00502         route-&gt;<a class="code" href="class_i_pv6_route.html#a946095196f3826b1c3a3390245dcda05">setExpiryTime</a>(expiryTime);
<a name="l00503"></a>00503         route-&gt;<a class="code" href="class_i_pv6_route.html#a04c4ec94dbc0fa34799091a3fa7a0e8d">setMetric</a>(0);
<a name="l00504"></a>00504 
<a name="l00505"></a>00505         <span class="comment">// then add it</span>
<a name="l00506"></a>00506         <a class="code" href="class_routing_table6.html#ac5315cdff4b757915773f1c22f273ba4">addRoute</a>(route);
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508     <span class="keywordflow">else</span>
<a name="l00509"></a>00509     {
<a name="l00510"></a>00510         <span class="comment">// update existing one; notification-wise, we pretend the route got removed then re-added</span>
<a name="l00511"></a>00511         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba6c8f0e68e262e322d82609fae7425c5f">NF_IPv6_ROUTE_DELETED</a>, route);
<a name="l00512"></a>00512         route-&gt;<a class="code" href="class_i_pv6_route.html#a7619951592a3ab6f32eb8b5c1beaf864">setInterfaceId</a>(interfaceId);
<a name="l00513"></a>00513         route-&gt;<a class="code" href="class_i_pv6_route.html#a946095196f3826b1c3a3390245dcda05">setExpiryTime</a>(expiryTime);
<a name="l00514"></a>00514         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baa58d74dc8cd5ab0b63267030da712cc1">NF_IPv6_ROUTE_ADDED</a>, route);
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00518"></a>00518 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aad45eef791b41fe469357f1f4c6090bb"></a><!-- doxytag: member="RoutingTable6::addOrUpdateOwnAdvPrefix" ref="aad45eef791b41fe469357f1f4c6090bb" args="(const IPv6Address &amp;destPrefix, int prefixLength, int interfaceId, simtime_t expiryTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::addOrUpdateOwnAdvPrefix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prefixLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interfaceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>expiryTime</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add route of type OWN_ADV_PREFIX. This is a prefix that *this* router advertises on this interface. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00520">520</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_flat_network_configurator6_8cc_source.html#l00133">FlatNetworkConfigurator6::addOwnAdvPrefixRoutes()</a>, and <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00522"></a>00522 {
<a name="l00523"></a>00523     <span class="comment">// FIXME this is very similar to the one above -- refactor!!</span>
<a name="l00524"></a>00524 
<a name="l00525"></a>00525     <span class="comment">// see if prefix exists in table</span>
<a name="l00526"></a>00526     <a class="code" href="class_i_pv6_route.html">IPv6Route</a> *route = NULL;
<a name="l00527"></a>00527     <span class="keywordflow">for</span> (RouteList::iterator it=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.begin(); it!=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.end(); it++)
<a name="l00528"></a>00528     {
<a name="l00529"></a>00529         <span class="keywordflow">if</span> ((*it)-&gt;getSrc()==<a class="code" href="class_i_pv6_route.html#a4eac9172e292e624476a22b74478e087ad46ec93945a0a1b07a9097be97e56c1e" title="on routers: on-link prefix that the router **itself** advertises on the link">IPv6Route::OWN_ADV_PREFIX</a> &amp;&amp; (*it)-&gt;getDestPrefix()==destPrefix &amp;&amp; (*it)-&gt;getPrefixLength()==prefixLength)
<a name="l00530"></a>00530         {
<a name="l00531"></a>00531             route = *it;
<a name="l00532"></a>00532             <span class="keywordflow">break</span>;
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     <span class="keywordflow">if</span> (route==NULL)
<a name="l00537"></a>00537     {
<a name="l00538"></a>00538         <span class="comment">// create new route object</span>
<a name="l00539"></a>00539         <a class="code" href="class_i_pv6_route.html">IPv6Route</a> *route = <span class="keyword">new</span> <a class="code" href="class_i_pv6_route.html">IPv6Route</a>(destPrefix, prefixLength, <a class="code" href="class_i_pv6_route.html#a4eac9172e292e624476a22b74478e087ad46ec93945a0a1b07a9097be97e56c1e" title="on routers: on-link prefix that the router **itself** advertises on the link">IPv6Route::OWN_ADV_PREFIX</a>);
<a name="l00540"></a>00540         route-&gt;<a class="code" href="class_i_pv6_route.html#a7619951592a3ab6f32eb8b5c1beaf864">setInterfaceId</a>(interfaceId);
<a name="l00541"></a>00541         route-&gt;<a class="code" href="class_i_pv6_route.html#a946095196f3826b1c3a3390245dcda05">setExpiryTime</a>(expiryTime);
<a name="l00542"></a>00542         route-&gt;<a class="code" href="class_i_pv6_route.html#a04c4ec94dbc0fa34799091a3fa7a0e8d">setMetric</a>(0);
<a name="l00543"></a>00543 
<a name="l00544"></a>00544         <span class="comment">// then add it</span>
<a name="l00545"></a>00545         <a class="code" href="class_routing_table6.html#ac5315cdff4b757915773f1c22f273ba4">addRoute</a>(route);
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547     <span class="keywordflow">else</span>
<a name="l00548"></a>00548     {
<a name="l00549"></a>00549         <span class="comment">// update existing one; notification-wise, we pretend the route got removed then re-added</span>
<a name="l00550"></a>00550         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba6c8f0e68e262e322d82609fae7425c5f">NF_IPv6_ROUTE_DELETED</a>, route);
<a name="l00551"></a>00551         route-&gt;<a class="code" href="class_i_pv6_route.html#a7619951592a3ab6f32eb8b5c1beaf864">setInterfaceId</a>(interfaceId);
<a name="l00552"></a>00552         route-&gt;<a class="code" href="class_i_pv6_route.html#a946095196f3826b1c3a3390245dcda05">setExpiryTime</a>(expiryTime);
<a name="l00553"></a>00553         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baa58d74dc8cd5ab0b63267030da712cc1">NF_IPv6_ROUTE_ADDED</a>, route);
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556     <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00557"></a>00557 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac5315cdff4b757915773f1c22f273ba4"></a><!-- doxytag: member="RoutingTable6::addRoute" ref="ac5315cdff4b757915773f1c22f273ba4" args="(IPv6Route *route)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::addRoute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv6_route.html">IPv6Route</a> *&nbsp;</td>
          <td class="paramname"> <em>route</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00619">619</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00590">addDefaultRoute()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00483">addOrUpdateOnLinkPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00520">addOrUpdateOwnAdvPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00603">addRoutingProtocolRoute()</a>, and <a class="el" href="_routing_table6_8cc_source.html#l00574">addStaticRoute()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00620"></a>00620 {
<a name="l00621"></a>00621     <a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.push_back(route);
<a name="l00622"></a>00622 
<a name="l00623"></a>00623     <span class="comment">// we keep entries sorted by prefix length in routeList, so that we can</span>
<a name="l00624"></a>00624     <span class="comment">// stop at the first match when doing the longest prefix matching</span>
<a name="l00625"></a>00625     std::sort(<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.begin(), <a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.end(), <a class="code" href="class_routing_table6.html#a707cec2ac6652e7eb0ff97b53f70d9b9">routeLessThan</a>);
<a name="l00626"></a>00626 
<a name="l00627"></a>00627     <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00628"></a>00628 
<a name="l00629"></a>00629     <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baa58d74dc8cd5ab0b63267030da712cc1">NF_IPv6_ROUTE_ADDED</a>, route);
<a name="l00630"></a>00630 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af11c468a66aa9edc3b16cc7b6b01d5bb"></a><!-- doxytag: member="RoutingTable6::addRoutingProtocolRoute" ref="af11c468a66aa9edc3b16cc7b6b01d5bb" args="(IPv6Route *route)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::addRoutingProtocolRoute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv6_route.html">IPv6Route</a> *&nbsp;</td>
          <td class="paramname"> <em>route</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds the given getRoute(which can be OSPF, BGP, RIP or any other route) with src==ROUTING_PROT. To store additional information with the route, one can subclass from <a class="el" href="class_i_pv6_route.html">IPv6Route</a> and add more fields. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00603">603</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00604"></a>00604 {
<a name="l00605"></a>00605     ASSERT(route-&gt;<a class="code" href="class_i_pv6_route.html#ac5098952cb1e2a9f2cf12bd0b8b0887d">getSrc</a>()==<a class="code" href="class_i_pv6_route.html#a4eac9172e292e624476a22b74478e087aa0040039d1490c0b7bdd8602269a894b" title="route is managed by a routing protocol (OSPF,BGP,etc)">IPv6Route::ROUTING_PROT</a>);
<a name="l00606"></a>00606     <a class="code" href="class_routing_table6.html#ac5315cdff4b757915773f1c22f273ba4">addRoute</a>(route);
<a name="l00607"></a>00607 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adf9413825a24ef26051d8a78539dec29"></a><!-- doxytag: member="RoutingTable6::addStaticRoute" ref="adf9413825a24ef26051d8a78539dec29" args="(const IPv6Address &amp;destPrefix, int prefixLength, unsigned int interfaceId, const IPv6Address &amp;nextHop, int metric=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::addStaticRoute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prefixLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>interfaceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>nextHop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>metric</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a static route. If metric is omitted, it gets initialized to the interface's metric value. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00574">574</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_flat_network_configurator6_8cc_source.html#l00168">FlatNetworkConfigurator6::addStaticRoutes()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00577"></a>00577 {
<a name="l00578"></a>00578     <span class="comment">// create route object</span>
<a name="l00579"></a>00579     <a class="code" href="class_i_pv6_route.html">IPv6Route</a> *route = <span class="keyword">new</span> <a class="code" href="class_i_pv6_route.html">IPv6Route</a>(destPrefix, prefixLength, <a class="code" href="class_i_pv6_route.html#a4eac9172e292e624476a22b74478e087a97c5ec5cf895578cbd6247a8bba80638" title="static route">IPv6Route::STATIC</a>);
<a name="l00580"></a>00580     route-&gt;<a class="code" href="class_i_pv6_route.html#a7619951592a3ab6f32eb8b5c1beaf864">setInterfaceId</a>(interfaceId);
<a name="l00581"></a>00581     route-&gt;<a class="code" href="class_i_pv6_route.html#aafb5f10807c0d3d563c3459d99faf109">setNextHop</a>(nextHop);
<a name="l00582"></a>00582     <span class="keywordflow">if</span> (metric==0)
<a name="l00583"></a>00583         metric = 10; <span class="comment">// TBD should be filled from interface metric</span>
<a name="l00584"></a>00584     route-&gt;<a class="code" href="class_i_pv6_route.html#a04c4ec94dbc0fa34799091a3fa7a0e8d">setMetric</a>(metric);
<a name="l00585"></a>00585 
<a name="l00586"></a>00586     <span class="comment">// then add it</span>
<a name="l00587"></a>00587     <a class="code" href="class_routing_table6.html#ac5315cdff4b757915773f1c22f273ba4">addRoute</a>(route);
<a name="l00588"></a>00588 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a84a7121fd02397bfd4ea169675381e3e"></a><!-- doxytag: member="RoutingTable6::assignRequiredNodeAddresses" ref="a84a7121fd02397bfd4ea169675381e3e" args="(InterfaceEntry *ie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::assignRequiredNodeAddresses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td>
          <td class="paramname"> <em>ie</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>RFC 3513: Section 2.8 A Node's Required Address Assign the various addresses to the node's respective interface. This should be done when the <a class="el" href="class_i_pv6.html">IPv6</a> Protocol stack is created. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00234">234</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00216">configureInterfaceForIPv6()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00235"></a>00235 {
<a name="l00236"></a>00236     <span class="comment">//RFC 3513 Section 2.8:A Node&apos;s Required Addresses</span>
<a name="l00237"></a>00237     <span class="comment">/*A host is required to recognize the following addresses as</span>
<a name="l00238"></a>00238 <span class="comment">    identifying itself:*/</span>
<a name="l00239"></a>00239 
<a name="l00240"></a>00240     <span class="comment">//o  The loopback address.</span>
<a name="l00241"></a>00241     <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a0ee93e88273f61390d1293dae55004d1">isLoopback</a>())
<a name="l00242"></a>00242     {
<a name="l00243"></a>00243         ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#a715b339dc41612149940ed0607af1535">assignAddress</a>(<a class="code" href="class_i_pv6_address.html">IPv6Address</a>(<span class="stringliteral">&quot;::1&quot;</span>), <span class="keyword">false</span>, 0, 0);
<a name="l00244"></a>00244         <span class="keywordflow">return</span>;
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246     <span class="comment">//o  Its required Link-Local Address for each interface.</span>
<a name="l00247"></a>00247     <span class="comment">//IPv6Address linkLocalAddr = IPv6Address().formLinkLocalAddress(ie-&gt;getInterfaceToken());</span>
<a name="l00248"></a>00248     <span class="comment">//ie-&gt;ipv6Data()-&gt;assignAddress(linkLocalAddr, true, 0, 0);</span>
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="comment">/*o  Any additional Unicast and Anycast Addresses that have been configured</span>
<a name="l00251"></a>00251 <span class="comment">    for the node&apos;s interfaces (manually or automatically).*/</span>
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     <span class="comment">// FIXME FIXME Andras: commented out the following lines, because these addresses</span>
<a name="l00254"></a>00254     <span class="comment">// are implicitly checked for in isLocalAddress()  (we don&apos;t want redundancy,</span>
<a name="l00255"></a>00255     <span class="comment">// and manually adding solicited-node mcast address for each and every address</span>
<a name="l00256"></a>00256     <span class="comment">// is very error-prone!)</span>
<a name="l00257"></a>00257     <span class="comment">//</span>
<a name="l00258"></a>00258     <span class="comment">//o  The All-Nodes Multicast Addresses defined in section 2.7.1.</span>
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="comment">/*o  The Solicited-Node Multicast Address for each of its unicast and anycast</span>
<a name="l00261"></a>00261 <span class="comment">    addresses.*/</span>
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="comment">//o  Multicast Addresses of all other groups to which the node belongs.</span>
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     <span class="comment">/*A router is required to recognize all addresses that a host is</span>
<a name="l00266"></a>00266 <span class="comment">    required to recognize, plus the following addresses as identifying</span>
<a name="l00267"></a>00267 <span class="comment">    itself:*/</span>
<a name="l00268"></a>00268     <span class="comment">/*o  The Subnet-Router Anycast Addresses for all interfaces for</span>
<a name="l00269"></a>00269 <span class="comment">    which it is configured to act as a router.*/</span>
<a name="l00270"></a>00270 
<a name="l00271"></a>00271     <span class="comment">//o  All other Anycast Addresses with which the router has been configured.</span>
<a name="l00272"></a>00272     <span class="comment">//o  The All-Routers Multicast Addresses defined in section 2.7.1.</span>
<a name="l00273"></a>00273 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab78638e39019d6ca1690d926da5f04fe"></a><!-- doxytag: member="RoutingTable6::configureInterfaceForIPv6" ref="ab78638e39019d6ca1690d926da5f04fe" args="(InterfaceEntry *ie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::configureInterfaceForIPv6 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td>
          <td class="paramname"> <em>ie</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00216">216</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00217"></a>00217 {
<a name="l00218"></a>00218     <a class="code" href="class_i_pv6_interface_data.html">IPv6InterfaceData</a> *ipv6IfData = <span class="keyword">new</span> <a class="code" href="class_i_pv6_interface_data.html">IPv6InterfaceData</a>();
<a name="l00219"></a>00219     ie-&gt;<a class="code" href="class_interface_entry.html#a1a2550df394a766847d0ad89aa1a9349">setIPv6Data</a>(ipv6IfData);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="comment">// for routers, turn on advertisements by default</span>
<a name="l00222"></a>00222     <span class="comment">//FIXME: we will use this isRouter flag for now. what if future implementations</span>
<a name="l00223"></a>00223     <span class="comment">//have 2 interfaces where one interface is configured as a router and the other</span>
<a name="l00224"></a>00224     <span class="comment">//as a host?</span>
<a name="l00225"></a>00225     ipv6IfData-&gt;<a class="code" href="class_i_pv6_interface_data.html#a18958f1a76719473e9e2a0099032075f">setAdvSendAdvertisements</a>(<a class="code" href="class_routing_table6.html#a0cebbe3d99a2059179fbb17dc833476d">isrouter</a>);<span class="comment">//Added by WEI</span>
<a name="l00226"></a>00226 
<a name="l00227"></a>00227     <span class="comment">// metric: some hints: OSPF cost (2e9/bps value), MS KB article Q299540, ...</span>
<a name="l00228"></a>00228     <span class="comment">//d-&gt;setMetric((int)ceil(2e9/ie-&gt;getDatarate())); // use OSPF cost as default</span>
<a name="l00229"></a>00229     <span class="comment">//FIXME TBD fill in the rest</span>
<a name="l00230"></a>00230 
<a name="l00231"></a>00231     <a class="code" href="class_routing_table6.html#a84a7121fd02397bfd4ea169675381e3e">assignRequiredNodeAddresses</a>(ie);
<a name="l00232"></a>00232 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5d4f86dbabc31663a4bd12f50a72140f"></a><!-- doxytag: member="RoutingTable6::configureInterfaceFromXML" ref="a5d4f86dbabc31663a4bd12f50a72140f" args="(InterfaceEntry *ie, cXMLElement *cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::configureInterfaceFromXML </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> *&nbsp;</td>
          <td class="paramname"> <em>ie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cXMLElement *&nbsp;</td>
          <td class="paramname"> <em>cfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00290">290</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00136">parseXMLConfigFile()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00291"></a>00291 {
<a name="l00292"></a>00292     <span class="comment">/*XML parsing capabilities tweaked by WEI. For now, we can configure a specific</span>
<a name="l00293"></a>00293 <span class="comment">    node&apos;s interface. We can set advertising prefixes and other variables to be used</span>
<a name="l00294"></a>00294 <span class="comment">    in RAs. The IPv6 interface data gets overwritten if lines 249 to 262 is uncommented.</span>
<a name="l00295"></a>00295 <span class="comment">    The fix is to create an XML file with all the default values. Customised XML files</span>
<a name="l00296"></a>00296 <span class="comment">    can be used for future protocols that requires different values. (MIPv6)*/</span>
<a name="l00297"></a>00297     <a class="code" href="class_i_pv6_interface_data.html">IPv6InterfaceData</a> *d = ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>();
<a name="l00298"></a>00298 
<a name="l00299"></a>00299     <span class="comment">// parse basic config (attributes)</span>
<a name="l00300"></a>00300     d-&gt;<a class="code" href="class_i_pv6_interface_data.html#a18958f1a76719473e9e2a0099032075f">setAdvSendAdvertisements</a>(toBool(getRequiredAttr(cfg, <span class="stringliteral">&quot;AdvSendAdvertisements&quot;</span>)));
<a name="l00301"></a>00301     <span class="comment">//TODO: leave this off first!! They overwrite stuff!</span>
<a name="l00302"></a>00302 <span class="comment">/* TODO: Wei commented out the stuff below. To be checked why (Andras).</span>
<a name="l00303"></a>00303 <span class="comment">    d-&gt;setMaxRtrAdvInterval(OPP_Global::atod(getRequiredAttr(cfg, &quot;MaxRtrAdvInterval&quot;)));</span>
<a name="l00304"></a>00304 <span class="comment">    d-&gt;setMinRtrAdvInterval(OPP_Global::atod(getRequiredAttr(cfg, &quot;MinRtrAdvInterval&quot;)));</span>
<a name="l00305"></a>00305 <span class="comment">    d-&gt;setAdvManagedFlag(toBool(getRequiredAttr(cfg, &quot;AdvManagedFlag&quot;)));</span>
<a name="l00306"></a>00306 <span class="comment">    d-&gt;setAdvOtherConfigFlag(toBool(getRequiredAttr(cfg, &quot;AdvOtherConfigFlag&quot;)));</span>
<a name="l00307"></a>00307 <span class="comment">    d-&gt;setAdvLinkMTU(OPP_Global::atoul(getRequiredAttr(cfg, &quot;AdvLinkMTU&quot;)));</span>
<a name="l00308"></a>00308 <span class="comment">    d-&gt;setAdvReachableTime(OPP_Global::atoul(getRequiredAttr(cfg, &quot;AdvReachableTime&quot;)));</span>
<a name="l00309"></a>00309 <span class="comment">    d-&gt;setAdvRetransTimer(OPP_Global::atoul(getRequiredAttr(cfg, &quot;AdvRetransTimer&quot;)));</span>
<a name="l00310"></a>00310 <span class="comment">    d-&gt;setAdvCurHopLimit(OPP_Global::atoul(getRequiredAttr(cfg, &quot;AdvCurHopLimit&quot;)));</span>
<a name="l00311"></a>00311 <span class="comment">    d-&gt;setAdvDefaultLifetime(OPP_Global::atoul(getRequiredAttr(cfg, &quot;AdvDefaultLifetime&quot;)));</span>
<a name="l00312"></a>00312 <span class="comment">    ie-&gt;setMtu(OPP_Global::atoul(getRequiredAttr(cfg, &quot;HostLinkMTU&quot;)));</span>
<a name="l00313"></a>00313 <span class="comment">    d-&gt;setCurHopLimit(OPP_Global::atoul(getRequiredAttr(cfg, &quot;HostCurHopLimit&quot;)));</span>
<a name="l00314"></a>00314 <span class="comment">    d-&gt;setBaseReachableTime(OPP_Global::atoul(getRequiredAttr(cfg, &quot;HostBaseReachableTime&quot;)));</span>
<a name="l00315"></a>00315 <span class="comment">    d-&gt;setRetransTimer(OPP_Global::atoul(getRequiredAttr(cfg, &quot;HostRetransTimer&quot;)));</span>
<a name="l00316"></a>00316 <span class="comment">    d-&gt;setDupAddrDetectTransmits(OPP_Global::atoul(getRequiredAttr(cfg, &quot;HostDupAddrDetectTransmits&quot;)));</span>
<a name="l00317"></a>00317 <span class="comment">*/</span>
<a name="l00318"></a>00318 
<a name="l00319"></a>00319     <span class="comment">// parse prefixes (AdvPrefix elements; they should be inside an AdvPrefixList</span>
<a name="l00320"></a>00320     <span class="comment">// element, but we don&apos;t check that)</span>
<a name="l00321"></a>00321     cXMLElementList prefixList = cfg-&gt;getElementsByTagName(<span class="stringliteral">&quot;AdvPrefix&quot;</span>);
<a name="l00322"></a>00322     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;prefixList.size(); i++)
<a name="l00323"></a>00323     {
<a name="l00324"></a>00324         cXMLElement *node = prefixList[i];
<a name="l00325"></a>00325         <a class="code" href="struct_i_pv6_interface_data_1_1_adv_prefix.html">IPv6InterfaceData::AdvPrefix</a> prefix;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327         <span class="comment">// FIXME todo implement: advValidLifetime, advPreferredLifetime can</span>
<a name="l00328"></a>00328         <span class="comment">// store (absolute) expiry time (if &gt;0) or lifetime (delta) (if &lt;0);</span>
<a name="l00329"></a>00329         <span class="comment">// 0 should be treated as infinity</span>
<a name="l00330"></a>00330         <span class="keywordtype">int</span> pfxLen;
<a name="l00331"></a>00331         <span class="keywordflow">if</span> (!prefix.<a class="code" href="struct_i_pv6_interface_data_1_1_adv_prefix.html#a8dbd979f7860762721b55d4793629258">prefix</a>.<a class="code" href="class_i_pv6_address.html#a55ffa37e2140d970b86e62d03b973ea2">tryParseAddrWithPrefix</a>(node-&gt;getNodeValue(),pfxLen))
<a name="l00332"></a>00332             opp_error(<span class="stringliteral">&quot;element &lt;%s&gt; at %s: wrong IPv6Address/prefix syntax %s&quot;</span>,
<a name="l00333"></a>00333                       node-&gt;getTagName(), node-&gt;getSourceLocation(), node-&gt;getNodeValue());
<a name="l00334"></a>00334         prefix.<a class="code" href="struct_i_pv6_interface_data_1_1_adv_prefix.html#a8e68016dcc5cb215199e7f61402f854b">prefixLength</a> = pfxLen;
<a name="l00335"></a>00335         prefix.<a class="code" href="struct_i_pv6_interface_data_1_1_adv_prefix.html#a8a0703cb25c21fb9db5e7a4408e40680">advValidLifetime</a> = <a class="code" href="namespace_o_p_p___global.html#a7a945483736b99900d3da3c648c33f5e">OPP_Global::atoul</a>(getRequiredAttr(node, <span class="stringliteral">&quot;AdvValidLifetime&quot;</span>));
<a name="l00336"></a>00336         prefix.<a class="code" href="struct_i_pv6_interface_data_1_1_adv_prefix.html#a9c2fa49f3db59393e76c08e022c4e12c">advOnLinkFlag</a> = toBool(getRequiredAttr(node, <span class="stringliteral">&quot;AdvOnLinkFlag&quot;</span>));
<a name="l00337"></a>00337         prefix.<a class="code" href="struct_i_pv6_interface_data_1_1_adv_prefix.html#a0df07072856386db3465443deffacd6f">advPreferredLifetime</a> = <a class="code" href="namespace_o_p_p___global.html#a7a945483736b99900d3da3c648c33f5e">OPP_Global::atoul</a>(getRequiredAttr(node, <span class="stringliteral">&quot;AdvPreferredLifetime&quot;</span>));
<a name="l00338"></a>00338         prefix.<a class="code" href="struct_i_pv6_interface_data_1_1_adv_prefix.html#ac593127a85f0ced6a4f8d9c0aee2184d">advAutonomousFlag</a> = toBool(getRequiredAttr(node, <span class="stringliteral">&quot;AdvAutonomousFlag&quot;</span>));
<a name="l00339"></a>00339         d-&gt;<a class="code" href="class_i_pv6_interface_data.html#ac746c3ceb962985e4b6fb17364294e46">addAdvPrefix</a>(prefix);
<a name="l00340"></a>00340     }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342     <span class="comment">// parse addresses</span>
<a name="l00343"></a>00343     cXMLElementList addrList = cfg-&gt;getChildrenByTagName(<span class="stringliteral">&quot;inetAddr&quot;</span>);
<a name="l00344"></a>00344     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0; k&lt;addrList.size(); k++)
<a name="l00345"></a>00345     {
<a name="l00346"></a>00346         cXMLElement *node = addrList[k];
<a name="l00347"></a>00347         <a class="code" href="class_i_pv6_address.html">IPv6Address</a> address = node-&gt;getNodeValue();
<a name="l00348"></a>00348         <span class="comment">//We can now decide if the address is tentative or not.</span>
<a name="l00349"></a>00349         d-&gt;<a class="code" href="class_i_pv6_interface_data.html#a715b339dc41612149940ed0607af1535">assignAddress</a>(address, toBool(getRequiredAttr(node, <span class="stringliteral">&quot;tentative&quot;</span>)), 0, 0);  <span class="comment">// set up with infinite lifetimes</span>
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa3ba1d17dc59f3e5d77ead359dd3a999"></a><!-- doxytag: member="RoutingTable6::doLongestPrefixMatch" ref="aa3ba1d17dc59f3e5d77ead359dd3a999" args="(const IPv6Address &amp;dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_pv6_route.html">IPv6Route</a> * RoutingTable6::doLongestPrefixMatch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>dest</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Performs longest prefix match in the routing table and returns the resulting route, or NULL if there was no match. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00416">416</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l00381">IPv6NeighbourDiscovery::determineNextHop()</a>, and <a class="el" href="_i_pv6_8cc_source.html#l00165">IPv6::routePacket()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00417"></a>00417 {
<a name="l00418"></a>00418     Enter_Method(<span class="stringliteral">&quot;doLongestPrefixMatch(%s)&quot;</span>, dest.<a class="code" href="class_i_pv6_address.html#a7c42fb066db81588a439aed1de5e4b3a">str</a>().c_str());
<a name="l00419"></a>00419 
<a name="l00420"></a>00420     <span class="comment">// we&apos;ll just stop at the first match, because the table is sorted</span>
<a name="l00421"></a>00421     <span class="comment">// by prefix lengths and metric (see addRoute())</span>
<a name="l00422"></a>00422     <span class="keywordflow">for</span> (RouteList::const_iterator it=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.begin(); it!=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.end(); it++)
<a name="l00423"></a>00423     {
<a name="l00424"></a>00424         <span class="keywordflow">if</span> (dest.<a class="code" href="class_i_pv6_address.html#a4d9102b52fcf98d1945c75a098bc678a">matches</a>((*it)-&gt;getDestPrefix(),(*it)-&gt;getPrefixLength()))
<a name="l00425"></a>00425         {
<a name="l00426"></a>00426             <span class="comment">// FIXME proofread this code, iterator invalidation-wise, etc</span>
<a name="l00427"></a>00427             <span class="keywordtype">bool</span> entryExpired = <span class="keyword">false</span>;
<a name="l00428"></a>00428             <span class="keywordflow">if</span> (simTime() &gt; (*it)-&gt;getExpiryTime() &amp;&amp; (*it)-&gt;getExpiryTime() != 0)<span class="comment">//since 0 represents infinity.</span>
<a name="l00429"></a>00429             {
<a name="l00430"></a>00430                 <a class="code" href="_basic_module_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Expired prefix detected!!&quot;</span> &lt;&lt; endl;
<a name="l00431"></a>00431                 <a class="code" href="class_routing_table6.html#a85e00922381c188efc0ad51197e5f718">removeOnLinkPrefix</a>((*it)-&gt;getDestPrefix(), (*it)-&gt;getPrefixLength());
<a name="l00432"></a>00432                 entryExpired = <span class="keyword">true</span>;
<a name="l00433"></a>00433             }
<a name="l00434"></a>00434             <span class="keywordflow">if</span> (entryExpired == <span class="keyword">false</span>) <span class="keywordflow">return</span> *it;
<a name="l00435"></a>00435         }
<a name="l00436"></a>00436     }
<a name="l00437"></a>00437     <span class="comment">// FIXME todo: if we selected an expired route, throw it out and select again!</span>
<a name="l00438"></a>00438     <span class="keywordflow">return</span> NULL;
<a name="l00439"></a>00439 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a24cede6c1b7ed7a17fad2525a4702851"></a><!-- doxytag: member="RoutingTable6::getInterfaceByAddress" ref="a24cede6c1b7ed7a17fad2525a4702851" args="(const IPv6Address &amp;address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_interface_entry.html">InterfaceEntry</a> * RoutingTable6::getInterfaceByAddress </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>address</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns an interface given by its address. Returns NULL if not found. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00353">353</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_8cc_source.html#l00502">IPv6::encapsulate()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00354"></a>00354 {
<a name="l00355"></a>00355     Enter_Method(<span class="stringliteral">&quot;getInterfaceByAddress(%s)=?&quot;</span>, addr.str().c_str());
<a name="l00356"></a>00356 
<a name="l00357"></a>00357     <span class="keywordflow">if</span> (addr.isUnspecified())
<a name="l00358"></a>00358         <span class="keywordflow">return</span> NULL;
<a name="l00359"></a>00359     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); ++i)
<a name="l00360"></a>00360     {
<a name="l00361"></a>00361         <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i);
<a name="l00362"></a>00362         <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#af4856e5c4da3563e03fbc388db63ba8a">hasAddress</a>(addr))
<a name="l00363"></a>00363             <span class="keywordflow">return</span> ie;
<a name="l00364"></a>00364     }
<a name="l00365"></a>00365     <span class="keywordflow">return</span> NULL;
<a name="l00366"></a>00366 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a384a101ad5895b4cdbc796ec0fb427e3"></a><!-- doxytag: member="RoutingTable6::getNumRoutes" ref="a384a101ad5895b4cdbc796ec0fb427e3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RoutingTable6::getNumRoutes </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the number of routes. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00645">645</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00169">updateDisplayString()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00646"></a>00646 {
<a name="l00647"></a>00647     <span class="keywordflow">return</span> <a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.size();
<a name="l00648"></a>00648 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a037e2206e766dff2c8cc904694feba88"></a><!-- doxytag: member="RoutingTable6::getRoute" ref="a037e2206e766dff2c8cc904694feba88" args="(int i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv6_route.html">IPv6Route</a> * RoutingTable6::getRoute </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the ith route. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00650">650</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00651"></a>00651 {
<a name="l00652"></a>00652     ASSERT(i&gt;=0 &amp;&amp; i&lt;(<span class="keywordtype">int</span>)<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.size());
<a name="l00653"></a>00653     <span class="keywordflow">return</span> <a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>[i];
<a name="l00654"></a>00654 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3aa22d18d79d749697aba97c01e21076"></a><!-- doxytag: member="RoutingTable6::handleMessage" ref="a3aa22d18d79d749697aba97c01e21076" args="(cMessage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Raises an error. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00179">179</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00180"></a>00180 {
<a name="l00181"></a>00181     opp_error(<span class="stringliteral">&quot;This module doesn&apos;t process messages&quot;</span>);
<a name="l00182"></a>00182 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3a930dca8cabc52375c754dfce15252d"></a><!-- doxytag: member="RoutingTable6::initialize" ref="a3a930dca8cabc52375c754dfce15252d" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00083">83</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00084"></a>00084 {
<a name="l00085"></a>00085     <span class="keywordflow">if</span> (stage==1)
<a name="l00086"></a>00086     {
<a name="l00087"></a>00087         <a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a> = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().get();
<a name="l00088"></a>00088         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a> = <a class="code" href="class_notification_board_access.html">NotificationBoardAccess</a>().get();
<a name="l00089"></a>00089 
<a name="l00090"></a>00090         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baea2d4297f1e519520524d4bd8ff865b4">NF_INTERFACE_CREATED</a>);
<a name="l00091"></a>00091         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba4f8e57f4754cbf2e6ba92a7079b483e4">NF_INTERFACE_DELETED</a>);
<a name="l00092"></a>00092         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba5ed0701efe7413c8f98fd0ba7fa9947d">NF_INTERFACE_STATE_CHANGED</a>);
<a name="l00093"></a>00093         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba3a1d2cac1cec476f84c60030a70ef902">NF_INTERFACE_CONFIG_CHANGED</a>);
<a name="l00094"></a>00094         <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba7ce81127c07e25b007f9ec96f3643d52">NF_INTERFACE_IPv6CONFIG_CHANGED</a>);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096         WATCH_PTRVECTOR(<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>);
<a name="l00097"></a>00097         WATCH_MAP(<a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>); <span class="comment">// FIXME commented out for now</span>
<a name="l00098"></a>00098         <a class="code" href="class_routing_table6.html#a0cebbe3d99a2059179fbb17dc833476d">isrouter</a> = par(<span class="stringliteral">&quot;isRouter&quot;</span>);
<a name="l00099"></a>00099         WATCH(<a class="code" href="class_routing_table6.html#a0cebbe3d99a2059179fbb17dc833476d">isrouter</a>);
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="comment">// add IPv6InterfaceData to interfaces</span>
<a name="l00102"></a>00102         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); i++)
<a name="l00103"></a>00103         {
<a name="l00104"></a>00104             <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i);
<a name="l00105"></a>00105             <a class="code" href="class_routing_table6.html#ab78638e39019d6ca1690d926da5f04fe">configureInterfaceForIPv6</a>(ie);
<a name="l00106"></a>00106         }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108         <a class="code" href="class_routing_table6.html#a3dc6e638b861a416cd1a44f8dbde473a">parseXMLConfigFile</a>();
<a name="l00109"></a>00109 
<a name="l00110"></a>00110         <span class="comment">// skip hosts</span>
<a name="l00111"></a>00111         <span class="keywordflow">if</span> (<a class="code" href="class_routing_table6.html#a0cebbe3d99a2059179fbb17dc833476d">isrouter</a>)
<a name="l00112"></a>00112         {
<a name="l00113"></a>00113             <span class="comment">// add globally routable prefixes to routing table</span>
<a name="l00114"></a>00114             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); x++)
<a name="l00115"></a>00115             {
<a name="l00116"></a>00116                 <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(x);
<a name="l00117"></a>00117 
<a name="l00118"></a>00118                 <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a0ee93e88273f61390d1293dae55004d1">isLoopback</a>())
<a name="l00119"></a>00119                     <span class="keywordflow">continue</span>;
<a name="l00120"></a>00120 
<a name="l00121"></a>00121                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#a1d84187cfbe9e91f7af79927c813f61c">getNumAdvPrefixes</a>(); y++)
<a name="l00122"></a>00122                     <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#a90da8f012bd443c75e6e742bcf6f7d38">getAdvPrefix</a>(y).prefix.isGlobal())
<a name="l00123"></a>00123                         <a class="code" href="class_routing_table6.html#aad45eef791b41fe469357f1f4c6090bb">addOrUpdateOwnAdvPrefix</a>(ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#a90da8f012bd443c75e6e742bcf6f7d38">getAdvPrefix</a>(y).prefix,
<a name="l00124"></a>00124                                                 ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#a90da8f012bd443c75e6e742bcf6f7d38">getAdvPrefix</a>(y).prefixLength,
<a name="l00125"></a>00125                                                 ie-&gt;<a class="code" href="class_interface_entry.html#adc901fa42c37ce16b5c0785da81106ce">getInterfaceId</a>(), 0);
<a name="l00126"></a>00126             }
<a name="l00127"></a>00127         }
<a name="l00128"></a>00128     }
<a name="l00129"></a>00129     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stage==4)
<a name="l00130"></a>00130     {
<a name="l00131"></a>00131         <span class="comment">// configurator adds routes only in stage==3</span>
<a name="l00132"></a>00132         <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acbf9dbfff5efa25eec0982afa1bbf061"></a><!-- doxytag: member="RoutingTable6::isLocalAddress" ref="acbf9dbfff5efa25eec0982afa1bbf061" args="(const IPv6Address &amp;dest) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RoutingTable6::isLocalAddress </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>dest</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks if the address is one of the host's addresses, i.e. assigned to one of its interfaces (tentatively or not). </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00368">368</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l01671">IPv6NeighbourDiscovery::processNSForTentativeAddress()</a>, <a class="el" href="_i_pv6_8cc_source.html#l00272">IPv6::routeMulticastPacket()</a>, and <a class="el" href="_i_pv6_8cc_source.html#l00165">IPv6::routePacket()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00369"></a>00369 {
<a name="l00370"></a>00370     Enter_Method(<span class="stringliteral">&quot;isLocalAddress(%s) y/n&quot;</span>, dest.<a class="code" href="class_i_pv6_address.html#a7c42fb066db81588a439aed1de5e4b3a">str</a>().c_str());
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <span class="comment">// first, check if we have an interface with this address</span>
<a name="l00373"></a>00373     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); i++)
<a name="l00374"></a>00374     {
<a name="l00375"></a>00375         <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i);
<a name="l00376"></a>00376         <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#af4856e5c4da3563e03fbc388db63ba8a">hasAddress</a>(dest))
<a name="l00377"></a>00377             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379 
<a name="l00380"></a>00380     <span class="comment">// then check for special, preassigned multicast addresses</span>
<a name="l00381"></a>00381     <span class="comment">// (these addresses occur more rarely than specific interface addresses,</span>
<a name="l00382"></a>00382     <span class="comment">// that&apos;s why we check for them last)</span>
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     <span class="keywordflow">if</span> (dest==<a class="code" href="class_i_pv6_address.html#affc233fad6ef60e013d37bd105a7d2fd">IPv6Address::ALL_NODES_1</a> || dest==<a class="code" href="class_i_pv6_address.html#af71ff608917fe0fc14baf50d11815aeb">IPv6Address::ALL_NODES_2</a>)
<a name="l00385"></a>00385         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00386"></a>00386     <span class="keywordflow">if</span> (<a class="code" href="class_routing_table6.html#a79a742fa2d94543412e183ebe0e83d3a">isRouter</a>() &amp;&amp; (dest==<a class="code" href="class_i_pv6_address.html#a6b3ccf4a474ef48fb87935d5d4f92c17">IPv6Address::ALL_ROUTERS_1</a> || dest==<a class="code" href="class_i_pv6_address.html#a3550339d4b3388eb3891c4744dca2aa1">IPv6Address::ALL_ROUTERS_2</a> || dest==<a class="code" href="class_i_pv6_address.html#ae88319a24467c2ed45c6ef94c1105007">IPv6Address::ALL_ROUTERS_5</a>))
<a name="l00387"></a>00387         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     <span class="comment">// check for solicited-node multicast address</span>
<a name="l00390"></a>00390     <span class="keywordflow">if</span> (dest.<a class="code" href="class_i_pv6_address.html#a4d9102b52fcf98d1945c75a098bc678a">matches</a>(<a class="code" href="class_i_pv6_address.html#a05683ca5f1a158a96c9a319314cb47bd">IPv6Address::SOLICITED_NODE_PREFIX</a>, 104))
<a name="l00391"></a>00391     {
<a name="l00392"></a>00392         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); i++)
<a name="l00393"></a>00393         {
<a name="l00394"></a>00394             <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i);
<a name="l00395"></a>00395             <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#af4999b8a05ad79d0f97920b1d8a5cadd">matchesSolicitedNodeMulticastAddress</a>(dest))
<a name="l00396"></a>00396                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00397"></a>00397         }
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00400"></a>00400 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afef0aa2431b02b3744b58238c7a73547"></a><!-- doxytag: member="RoutingTable6::isPrefixPresent" ref="afef0aa2431b02b3744b58238c7a73547" args="(const IPv6Address &amp;prefix) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RoutingTable6::isPrefixPresent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>prefix</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks if the given prefix already exists in the routing table (prefix list) </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00441">441</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l01278">IPv6NeighbourDiscovery::processRAPrefixInfo()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00442"></a>00442 {
<a name="l00443"></a>00443     <span class="keywordflow">for</span> (RouteList::const_iterator it=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.begin(); it!=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.end(); it++)
<a name="l00444"></a>00444         <span class="keywordflow">if</span> (prefix.<a class="code" href="class_i_pv6_address.html#a4d9102b52fcf98d1945c75a098bc678a">matches</a>((*it)-&gt;getDestPrefix(),128))
<a name="l00445"></a>00445             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00446"></a>00446     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00447"></a>00447 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a79a742fa2d94543412e183ebe0e83d3a"></a><!-- doxytag: member="RoutingTable6::isRouter" ref="a79a742fa2d94543412e183ebe0e83d3a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool RoutingTable6::isRouter </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="class_i_p.html">IP</a> forwarding on/off </p>

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00179">179</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l00049">IPv6NeighbourDiscovery::initialize()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00368">isLocalAddress()</a>, <a class="el" href="_i_pv6_8cc_source.html#l00272">IPv6::routeMulticastPacket()</a>, <a class="el" href="_i_pv6_8cc_source.html#l00165">IPv6::routePacket()</a>, and <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l01761">IPv6NeighbourDiscovery::sendSolicitedNA()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00179"></a>00179 {<span class="keywordflow">return</span> <a class="code" href="class_routing_table6.html#a0cebbe3d99a2059179fbb17dc833476d">isrouter</a>;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af91523a83ab946e36d292337435b3679"></a><!-- doxytag: member="RoutingTable6::lookupDestCache" ref="af91523a83ab946e36d292337435b3679" args="(const IPv6Address &amp;dest, int &amp;outInterfaceId) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp; RoutingTable6::lookupDestCache </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>outInterfaceId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Looks up the given destination address in the Destination Cache, then returns the next-hop address and the interface in the outInterfaceId variable. If the destination is not in the cache, outInterfaceId is set to -1 and the unspecified address is returned. The caller should check for interfaceId==-1, because unspecified address is also returned if the link layer doesn't use addresses at all (e.g. <a class="el" href="class_p_p_p.html">PPP</a>).</p>
<p>NOTE: outInterfaceId is an OUTPUT parameter -- its initial value is ignored, and the <a class="el" href="class_routing_table6.html#af91523a83ab946e36d292337435b3679">lookupDestCache()</a> sets it to the correct value instead. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00402">402</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_8cc_source.html#l00165">IPv6::routePacket()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00403"></a>00403 {
<a name="l00404"></a>00404     Enter_Method(<span class="stringliteral">&quot;lookupDestCache(%s)&quot;</span>, dest.<a class="code" href="class_i_pv6_address.html#a7c42fb066db81588a439aed1de5e4b3a">str</a>().c_str());
<a name="l00405"></a>00405 
<a name="l00406"></a>00406     DestCache::const_iterator it = <a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>.find(dest);
<a name="l00407"></a>00407     <span class="keywordflow">if</span> (it == <a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>.end())
<a name="l00408"></a>00408     {
<a name="l00409"></a>00409         outInterfaceId = -1;
<a name="l00410"></a>00410         <span class="keywordflow">return</span> <a class="code" href="class_i_pv6_address.html#a0c1e137cb3b1470ec6b8d9a95e03dbe5">IPv6Address::UNSPECIFIED_ADDRESS</a>;
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412     outInterfaceId = it-&gt;second.interfaceId;
<a name="l00413"></a>00413     <span class="keywordflow">return</span> it-&gt;second.nextHopAddr;
<a name="l00414"></a>00414 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a19bf3f3581b2564834e3afda3c7181e6"></a><!-- doxytag: member="RoutingTable6::numInitStages" ref="a19bf3f3581b2564834e3afda3c7181e6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int RoutingTable6::numInitStages </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00152">152</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00152"></a>00152 {<span class="keywordflow">return</span> 5;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3dc6e638b861a416cd1a44f8dbde473a"></a><!-- doxytag: member="RoutingTable6::parseXMLConfigFile" ref="a3dc6e638b861a416cd1a44f8dbde473a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::parseXMLConfigFile </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00136">136</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00137"></a>00137 {
<a name="l00138"></a>00138     <span class="comment">// TODO to be revised by Andras</span>
<a name="l00139"></a>00139     <span class="comment">// configure interfaces from XML config file</span>
<a name="l00140"></a>00140     cXMLElement *config = par(<span class="stringliteral">&quot;routingTableFile&quot;</span>);
<a name="l00141"></a>00141     <span class="keywordflow">for</span> (cXMLElement *child=config-&gt;getFirstChild(); child; child = child-&gt;getNextSibling())
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143         <span class="comment">//std::cout &lt;&lt; &quot;configuring interfaces from XML file.&quot; &lt;&lt; endl;</span>
<a name="l00144"></a>00144         <span class="comment">//std::cout &lt;&lt; &quot;selected element is: &quot; &lt;&lt; child-&gt;getTagName() &lt;&lt; endl;</span>
<a name="l00145"></a>00145         <span class="comment">// we ensure that the selected element is local.</span>
<a name="l00146"></a>00146         <span class="keywordflow">if</span> (opp_strcmp(child-&gt;getTagName(),<span class="stringliteral">&quot;local&quot;</span>)!=0) <span class="keywordflow">continue</span>;
<a name="l00147"></a>00147         <span class="comment">//ensure that this is the right parent module we are configuring.</span>
<a name="l00148"></a>00148         <span class="keywordflow">if</span> (opp_strcmp(child-&gt;getAttribute(<span class="stringliteral">&quot;node&quot;</span>),getParentModule()-&gt;getFullName())!=0)
<a name="l00149"></a>00149             <span class="keywordflow">continue</span>;
<a name="l00150"></a>00150         <span class="comment">//Go one level deeper.</span>
<a name="l00151"></a>00151         <span class="comment">//child = child-&gt;getFirstChild();</span>
<a name="l00152"></a>00152         <span class="keywordflow">for</span> (cXMLElement *ifTag=child-&gt;getFirstChild(); ifTag; ifTag = ifTag-&gt;getNextSibling())
<a name="l00153"></a>00153         {
<a name="l00154"></a>00154             <span class="comment">//The next tag should be &quot;interface&quot;.</span>
<a name="l00155"></a>00155             <span class="keywordflow">if</span> (opp_strcmp(ifTag-&gt;getTagName(),<span class="stringliteral">&quot;interface&quot;</span>)!=0)
<a name="l00156"></a>00156                 <span class="keywordflow">continue</span>;
<a name="l00157"></a>00157             <span class="comment">//std::cout &lt;&lt; &quot;Getting attribute: name&quot; &lt;&lt; endl;</span>
<a name="l00158"></a>00158             <span class="keyword">const</span> <span class="keywordtype">char</span> *ifname = ifTag-&gt;getAttribute(<span class="stringliteral">&quot;name&quot;</span>);
<a name="l00159"></a>00159             <span class="keywordflow">if</span> (!ifname)
<a name="l00160"></a>00160                 error(<span class="stringliteral">&quot;&lt;interface&gt; without name attribute at %s&quot;</span>, child-&gt;getSourceLocation());
<a name="l00161"></a>00161             <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a8ad86ee823d6200b4f558383b39af658">getInterfaceByName</a>(ifname);
<a name="l00162"></a>00162             <span class="keywordflow">if</span> (!ie)
<a name="l00163"></a>00163                 error(<span class="stringliteral">&quot;no interface named %s was registered, %s&quot;</span>, ifname, child-&gt;getSourceLocation());
<a name="l00164"></a>00164             <a class="code" href="class_routing_table6.html#a5d4f86dbabc31663a4bd12f50a72140f">configureInterfaceFromXML</a>(ie, ifTag);
<a name="l00165"></a>00165         }
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a508ea0dd32bd3256348e99abe32a48a9"></a><!-- doxytag: member="RoutingTable6::purgeDestCache" ref="a508ea0dd32bd3256348e99abe32a48a9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::purgeDestCache </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Discard all entries in destination cache </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00458">458</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00459"></a>00459 {
<a name="l00460"></a>00460     <a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>.clear();
<a name="l00461"></a>00461     <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00462"></a>00462 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1b4f1c86d678de8ac3f873ac7de0687f"></a><!-- doxytag: member="RoutingTable6::purgeDestCacheEntriesToNeighbour" ref="a1b4f1c86d678de8ac3f873ac7de0687f" args="(const IPv6Address &amp;nextHopAddr, int interfaceId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::purgeDestCacheEntriesToNeighbour </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>nextHopAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interfaceId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Discard all entries in destination cache where next hop is the given address on the given interface. This is typically called when a router becomes unreachable, and all destinations going via that router have to go though router selection again. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00464">464</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l00578">IPv6NeighbourDiscovery::timeoutDefaultRouter()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00465"></a>00465 {
<a name="l00466"></a>00466     <span class="keywordflow">for</span> (DestCache::iterator it=<a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>.begin(); it!=<a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>.end(); )
<a name="l00467"></a>00467     {
<a name="l00468"></a>00468         <span class="keywordflow">if</span> (it-&gt;second.interfaceId==interfaceId &amp;&amp; it-&gt;second.nextHopAddr==nextHopAddr)
<a name="l00469"></a>00469         {
<a name="l00470"></a>00470             <span class="comment">// move the iterator past this element before removing it</span>
<a name="l00471"></a>00471             DestCache::iterator oldIt = it++;
<a name="l00472"></a>00472             <a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>.erase(oldIt);
<a name="l00473"></a>00473         }
<a name="l00474"></a>00474         <span class="keywordflow">else</span>
<a name="l00475"></a>00475         {
<a name="l00476"></a>00476             it++;
<a name="l00477"></a>00477         }
<a name="l00478"></a>00478     }
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00481"></a>00481 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7b233ea89357dd9c3cb13260e4877432"></a><!-- doxytag: member="RoutingTable6::receiveChangeNotification" ref="a7b233ea89357dd9c3cb13260e4877432" args="(int category, const cPolymorphic *details)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::receiveChangeNotification </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>details</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called by the <a class="el" href="class_notification_board.html">NotificationBoard</a> whenever a change of a category occurs to which this client has subscribed. </p>

<p>Implements <a class="el" href="class_i_notifiable.html#a67d757190e1128eaec8f0a8e51ed38f6">INotifiable</a>.</p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00184">184</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00185"></a>00185 {
<a name="l00186"></a>00186     <span class="keywordflow">if</span> (simulation.getContextType()==CTX_INITIALIZE)
<a name="l00187"></a>00187         <span class="keywordflow">return</span>;  <span class="comment">// ignore notifications during initialize</span>
<a name="l00188"></a>00188 
<a name="l00189"></a>00189     Enter_Method_Silent();
<a name="l00190"></a>00190     <a class="code" href="_notifier_consts_8cc.html#a68fd4b933fae636048bb9ee52fd922e5">printNotificationBanner</a>(category, details);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     <span class="keywordflow">if</span> (category==<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baea2d4297f1e519520524d4bd8ff865b4">NF_INTERFACE_CREATED</a>)
<a name="l00193"></a>00193     {
<a name="l00194"></a>00194         <span class="comment">//TODO something like this:</span>
<a name="l00195"></a>00195         <span class="comment">//InterfaceEntry *ie = check_and_cast&lt;InterfaceEntry*&gt;(details);</span>
<a name="l00196"></a>00196         <span class="comment">//configureInterfaceForIPv6(ie);</span>
<a name="l00197"></a>00197     }
<a name="l00198"></a>00198     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (category==<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba4f8e57f4754cbf2e6ba92a7079b483e4">NF_INTERFACE_DELETED</a>)
<a name="l00199"></a>00199     {
<a name="l00200"></a>00200         <span class="comment">//TODO remove all routes that point to that interface (?)</span>
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (category==<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba5ed0701efe7413c8f98fd0ba7fa9947d">NF_INTERFACE_STATE_CHANGED</a>)
<a name="l00203"></a>00203     {
<a name="l00204"></a>00204         <span class="comment">//TODO invalidate routing cache (?)</span>
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (category==<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba3a1d2cac1cec476f84c60030a70ef902">NF_INTERFACE_CONFIG_CHANGED</a>)
<a name="l00207"></a>00207     {
<a name="l00208"></a>00208         <span class="comment">//TODO invalidate routing cache (?)</span>
<a name="l00209"></a>00209     }
<a name="l00210"></a>00210     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (category==<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba7ce81127c07e25b007f9ec96f3643d52">NF_INTERFACE_IPv6CONFIG_CHANGED</a>)
<a name="l00211"></a>00211     {
<a name="l00212"></a>00212         <span class="comment">//TODO</span>
<a name="l00213"></a>00213     }
<a name="l00214"></a>00214 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a85e00922381c188efc0ad51197e5f718"></a><!-- doxytag: member="RoutingTable6::removeOnLinkPrefix" ref="a85e00922381c188efc0ad51197e5f718" args="(const IPv6Address &amp;destPrefix, int prefixLength)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::removeOnLinkPrefix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prefixLength</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove an on-link prefix. To be called when the prefix gets advertised with zero lifetime, or to purge an expired prefix.</p>
<p>NOTE: This method does NOT remove the matching addresses from the <a class="el" href="class_i_interface_table.html">IInterfaceTable</a> (see <a class="el" href="class_i_pv6_interface_data.html">IPv6InterfaceData</a>); that has to be done separately. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00559">559</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00416">doLongestPrefixMatch()</a>, <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l01278">IPv6NeighbourDiscovery::processRAPrefixInfo()</a>, and <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l00563">IPv6NeighbourDiscovery::timeoutPrefixEntry()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00560"></a>00560 {
<a name="l00561"></a>00561     <span class="comment">// scan the routing table for this prefix and remove it</span>
<a name="l00562"></a>00562     <span class="keywordflow">for</span> (RouteList::iterator it=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.begin(); it!=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.end(); it++)
<a name="l00563"></a>00563     {
<a name="l00564"></a>00564         <span class="keywordflow">if</span> ((*it)-&gt;getSrc()==<a class="code" href="class_i_pv6_route.html#a4eac9172e292e624476a22b74478e087a7e360222defd4f4a1af6d1e70442a5c8" title="on-link prefix, from Router Advertisement">IPv6Route::FROM_RA</a> &amp;&amp; (*it)-&gt;getDestPrefix()==destPrefix &amp;&amp; (*it)-&gt;getPrefixLength()==prefixLength)
<a name="l00565"></a>00565         {
<a name="l00566"></a>00566             <a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.erase(it);
<a name="l00567"></a>00567             <span class="keywordflow">return</span>; <span class="comment">// there can be only one such route, addOrUpdateOnLinkPrefix() guarantees that</span>
<a name="l00568"></a>00568         }
<a name="l00569"></a>00569     }
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00572"></a>00572 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acd6b7dbf0bfa1e923366a2bcb1f309fc"></a><!-- doxytag: member="RoutingTable6::removeRoute" ref="acd6b7dbf0bfa1e923366a2bcb1f309fc" args="(IPv6Route *route)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::removeRoute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv6_route.html">IPv6Route</a> *&nbsp;</td>
          <td class="paramname"> <em>route</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deletes the given route from the route table. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00632">632</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00633"></a>00633 {
<a name="l00634"></a>00634     RouteList::iterator it = <a class="code" href="_utils_8cc.html#a33bdc8b2583dcc9d2a8bfe1ec578352d">std::find</a>(<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.begin(), <a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.end(), route);
<a name="l00635"></a>00635     ASSERT(it!=<a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.end());
<a name="l00636"></a>00636 
<a name="l00637"></a>00637     <a class="code" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba6c8f0e68e262e322d82609fae7425c5f">NF_IPv6_ROUTE_DELETED</a>, route); <span class="comment">// rather: going to be deleted</span>
<a name="l00638"></a>00638 
<a name="l00639"></a>00639     <a class="code" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">routeList</a>.erase(it);
<a name="l00640"></a>00640     <span class="keyword">delete</span> route;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642     <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00643"></a>00643 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a707cec2ac6652e7eb0ff97b53f70d9b9"></a><!-- doxytag: member="RoutingTable6::routeLessThan" ref="a707cec2ac6652e7eb0ff97b53f70d9b9" args="(const IPv6Route *a, const IPv6Route *b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RoutingTable6::routeLessThan </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_route.html">IPv6Route</a> *&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_route.html">IPv6Route</a> *&nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00609">609</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00619">addRoute()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00610"></a>00610 {
<a name="l00611"></a>00611     <span class="comment">// helper for sort() in addRoute(). We want routes with longer</span>
<a name="l00612"></a>00612     <span class="comment">// prefixes to be at front, so we compare them as &quot;less&quot;.</span>
<a name="l00613"></a>00613     <span class="comment">// For metric, a smaller value is better (we report that as &quot;less&quot;).</span>
<a name="l00614"></a>00614     <span class="keywordflow">if</span> (a-&gt;<a class="code" href="class_i_pv6_route.html#af9fbb20e012a32c3511e426b4d939457">getPrefixLength</a>()!=b-&gt;<a class="code" href="class_i_pv6_route.html#af9fbb20e012a32c3511e426b4d939457">getPrefixLength</a>())
<a name="l00615"></a>00615         <span class="keywordflow">return</span> a-&gt;<a class="code" href="class_i_pv6_route.html#af9fbb20e012a32c3511e426b4d939457">getPrefixLength</a>() &gt; b-&gt;<a class="code" href="class_i_pv6_route.html#af9fbb20e012a32c3511e426b4d939457">getPrefixLength</a>();
<a name="l00616"></a>00616     <span class="keywordflow">return</span> a-&gt;<a class="code" href="class_i_pv6_route.html#ab62f850b1e21b95cbd200f2d3099fb7d">getMetric</a>() &lt; b-&gt;<a class="code" href="class_i_pv6_route.html#ab62f850b1e21b95cbd200f2d3099fb7d">getMetric</a>();
<a name="l00617"></a>00617 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0b95d2a43a904e2cae8521bebe8b3335"></a><!-- doxytag: member="RoutingTable6::updateDestCache" ref="a0b95d2a43a904e2cae8521bebe8b3335" args="(const IPv6Address &amp;dest, const IPv6Address &amp;nextHopAddr, int interfaceId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::updateDestCache </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv6_address.html">IPv6Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>nextHopAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interfaceId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add or update a destination cache entry. </p>

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00449">449</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_i_pv6_neighbour_discovery_8cc_source.html#l00381">IPv6NeighbourDiscovery::determineNextHop()</a>, and <a class="el" href="_i_pv6_8cc_source.html#l00165">IPv6::routePacket()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00450"></a>00450 {
<a name="l00451"></a>00451     <span class="comment">// FIXME this performs 2 lookups -- optimize to do only one</span>
<a name="l00452"></a>00452     <a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>[dest].nextHopAddr = nextHopAddr;
<a name="l00453"></a>00453     <a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>[dest].interfaceId = interfaceId;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455     <a class="code" href="class_routing_table6.html#ac174c90714b3e6b245c5084850651af7">updateDisplayString</a>();
<a name="l00456"></a>00456 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac174c90714b3e6b245c5084850651af7"></a><!-- doxytag: member="RoutingTable6::updateDisplayString" ref="ac174c90714b3e6b245c5084850651af7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoutingTable6::updateDisplayString </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00169">169</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00483">addOrUpdateOnLinkPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00520">addOrUpdateOwnAdvPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00619">addRoute()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00458">purgeDestCache()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00464">purgeDestCacheEntriesToNeighbour()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00559">removeOnLinkPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00632">removeRoute()</a>, and <a class="el" href="_routing_table6_8cc_source.html#l00449">updateDestCache()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00170"></a>00170 {
<a name="l00171"></a>00171     <span class="keywordflow">if</span> (!ev.isGUI())
<a name="l00172"></a>00172         <span class="keywordflow">return</span>;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174     <span class="keywordtype">char</span> buf[80];
<a name="l00175"></a>00175     sprintf(buf, <span class="stringliteral">&quot;%d routes\n%d destcache entries&quot;</span>, <a class="code" href="class_routing_table6.html#a384a101ad5895b4cdbc796ec0fb427e3">getNumRoutes</a>(), <a class="code" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">destCache</a>.size());
<a name="l00176"></a>00176     getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>,0,buf);
<a name="l00177"></a>00177 }
</pre></div></p>

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a9a8e6d548f687ed667d614b61d4b7ab8"></a><!-- doxytag: member="RoutingTable6::operator&lt;&lt;" ref="a9a8e6d548f687ed667d614b61d4b7ab8" args="(std::ostream &amp;os, const DestCacheEntry &amp;e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_routing_table6_1_1_dest_cache_entry.html">DestCacheEntry</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8cc_source.html#l00067">67</a> of file <a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00068"></a>00068 {
<a name="l00069"></a>00069     os &lt;&lt; <span class="stringliteral">&quot;if=&quot;</span> &lt;&lt; e.interfaceId &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; e.nextHopAddr;  <span class="comment">//FIXME try printing interface name</span>
<a name="l00070"></a>00070     <span class="keywordflow">return</span> os;
<a name="l00071"></a>00071 };
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a40eeef91dde2b4b37c53fdc2d88a6b7d"></a><!-- doxytag: member="RoutingTable6::destCache" ref="a40eeef91dde2b4b37c53fdc2d88a6b7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_routing_table6.html#ae97d16a39dd6e82ed1fef07e2bd5ac49">DestCache</a> <a class="el" href="class_routing_table6.html#a40eeef91dde2b4b37c53fdc2d88a6b7d">RoutingTable6::destCache</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00120">120</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00402">lookupDestCache()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00458">purgeDestCache()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00464">purgeDestCacheEntriesToNeighbour()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00449">updateDestCache()</a>, and <a class="el" href="_routing_table6_8cc_source.html#l00169">updateDisplayString()</a>.</p>

</div>
</div>
<a class="anchor" id="aaaec39a83ad4a660b4cea65d1266b0e4"></a><!-- doxytag: member="RoutingTable6::ift" ref="aaaec39a83ad4a660b4cea65d1266b0e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a>* <a class="el" href="class_routing_table6.html#aaaec39a83ad4a660b4cea65d1266b0e4">RoutingTable6::ift</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00105">105</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00353">getInterfaceByAddress()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00368">isLocalAddress()</a>, and <a class="el" href="_routing_table6_8cc_source.html#l00136">parseXMLConfigFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a0cebbe3d99a2059179fbb17dc833476d"></a><!-- doxytag: member="RoutingTable6::isrouter" ref="a0cebbe3d99a2059179fbb17dc833476d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_routing_table6.html#a0cebbe3d99a2059179fbb17dc833476d">RoutingTable6::isrouter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00108">108</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00216">configureInterfaceForIPv6()</a>, and <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a03a9b00ecf47fb5395108c427d9e05f7"></a><!-- doxytag: member="RoutingTable6::nb" ref="a03a9b00ecf47fb5395108c427d9e05f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_notification_board.html">NotificationBoard</a>* <a class="el" href="class_routing_table6.html#a03a9b00ecf47fb5395108c427d9e05f7">RoutingTable6::nb</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00106">106</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00483">addOrUpdateOnLinkPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00520">addOrUpdateOwnAdvPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00619">addRoute()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>, and <a class="el" href="_routing_table6_8cc_source.html#l00632">removeRoute()</a>.</p>

</div>
</div>
<a class="anchor" id="a876169265a1d3d1fc1224becfcb7ca67"></a><!-- doxytag: member="RoutingTable6::routeList" ref="a876169265a1d3d1fc1224becfcb7ca67" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_routing_table6.html#ae2d7a96a112758e54bb1fa5e5f41d4bc">RouteList</a> <a class="el" href="class_routing_table6.html#a876169265a1d3d1fc1224becfcb7ca67">RoutingTable6::routeList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_routing_table6_8h_source.html#l00125">125</a> of file <a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a>.</p>

<p>Referenced by <a class="el" href="_routing_table6_8cc_source.html#l00483">addOrUpdateOnLinkPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00520">addOrUpdateOwnAdvPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00619">addRoute()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00416">doLongestPrefixMatch()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00645">getNumRoutes()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00650">getRoute()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00083">initialize()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00441">isPrefixPresent()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00559">removeOnLinkPrefix()</a>, <a class="el" href="_routing_table6_8cc_source.html#l00632">removeRoute()</a>, and <a class="el" href="_routing_table6_8cc_source.html#l00077">~RoutingTable6()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_routing_table6_8h_source.html">RoutingTable6.h</a></li>
<li><a class="el" href="_routing_table6_8cc_source.html">RoutingTable6.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Mar 23 17:08:35 2010 for INET Framework for OMNeT++/OMNEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
